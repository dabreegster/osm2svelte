import{V as yt,K as z,W as p,X as ht,S as A,i as P,s as j,E as k,G as F,Y as E,k as et,o as G,Z as it,_ as rt,a as w,$ as bt,t as _,g as ct,b as h,c as mt,d as L,I as Ct,N as wt,m as R,P as Lt,Q as Zt,R as zt,n as B,u as S,y as O,a0 as st,L as Bt,D as St,h as Ot,j as kt,O as $,x as At}from"./maplibre-gl-d0269db5.js";const dt=Symbol.for("svelte-maplibre");function K(){return ht(dt)}function Pt(){return yt(dt,{map:z(null),source:p(null),layer:p(null),popupTarget:p(null),cluster:z(),loadedImages:z(new Set),minzoom:z(0),maxzoom:z(24),layerEvent:z(null)})}function jt(i,t,o){let n;const{map:u}=K();k(i,u,a=>o(4,n=a));let{position:e="top-left"}=t,{container:r=void 0}=t,l=null;return F(()=>{n!=null&&n.loaded()&&l&&n.removeControl(l)}),i.$$set=a=>{"position"in a&&o(1,e=a.position),"container"in a&&o(2,r=a.container)},i.$$.update=()=>{if(i.$$.dirty&30&&n&&!l){let a;typeof r=="string"?a=document.querySelector(r)??void 0:a=r,o(3,l=new E.FullscreenControl({container:a})),n.addControl(l,e)}},[u,e,r,l,n]}class qt extends A{constructor(t){super(),P(this,t,jt,null,j,{position:1,container:2})}}function Mt(i,t,o){let n;const{map:u}=K();k(i,u,m=>o(8,n=m));let{position:e="top-left"}=t,{positionOptions:r=void 0}=t,{fitBoundsOptions:l=void 0}=t,{trackUserLocation:a=!1}=t,{showAccuracyCircle:f=!0}=t,{showUserLocation:c=!0}=t,g=null;return F(()=>{n!=null&&n.loaded()&&g&&n.removeControl(g)}),i.$$set=m=>{"position"in m&&o(1,e=m.position),"positionOptions"in m&&o(2,r=m.positionOptions),"fitBoundsOptions"in m&&o(3,l=m.fitBoundsOptions),"trackUserLocation"in m&&o(4,a=m.trackUserLocation),"showAccuracyCircle"in m&&o(5,f=m.showAccuracyCircle),"showUserLocation"in m&&o(6,c=m.showUserLocation)},i.$$.update=()=>{i.$$.dirty&510&&n&&!g&&(o(7,g=new E.GeolocateControl({positionOptions:r,fitBoundsOptions:l,trackUserLocation:a,showAccuracyCircle:f,showUserLocation:c})),n.addControl(g,e))},[u,e,r,l,a,f,c,g,n]}class Et extends A{constructor(t){super(),P(this,t,Mt,null,j,{position:1,positionOptions:2,fitBoundsOptions:3,trackUserLocation:4,showAccuracyCircle:5,showUserLocation:6})}}var tt=ot;function ot(i,t){return i===t||i!==i&&t!==t?!0:typeof i!=typeof t||{}.toString.call(i)!={}.toString.call(t)||i!==Object(i)||!i?!1:Array.isArray(i)?lt(i,t):{}.toString.call(i)=="[object Set]"?lt(Array.from(i),Array.from(t)):{}.toString.call(i)=="[object Object]"?Wt(i,t):Ut(i,t)}function Ut(i,t){return i.toString()===t.toString()}function lt(i,t){var o=i.length;if(o!=t.length)return!1;for(var n=0;n<o;n++)if(!ot(i[n],t[n]))return!1;return!0}function Wt(i,t){var o=Object.keys(i),n=o.length;if(n!=Object.keys(t).length)return!1;for(var u=0;u<n;u++){var e=o[u];if(!(t.hasOwnProperty(e)&&ot(i[e],t[e])))return!1}return!0}function Dt(i,t,o){let n;const{map:u}=K();k(i,u,c=>o(6,n=c));let{position:e="top-left"}=t,{showCompass:r=!0}=t,{showZoom:l=!0}=t,{visualizePitch:a=!1}=t,f=null;return F(()=>{n!=null&&n.loaded()&&f&&n.removeControl(f)}),i.$$set=c=>{"position"in c&&o(1,e=c.position),"showCompass"in c&&o(2,r=c.showCompass),"showZoom"in c&&o(3,l=c.showZoom),"visualizePitch"in c&&o(4,a=c.visualizePitch)},i.$$.update=()=>{i.$$.dirty&126&&n&&!f&&(o(5,f=new E.NavigationControl({showCompass:r,showZoom:l,visualizePitch:a})),n.addControl(f,e))},[u,e,r,l,a,f,n]}class Nt extends A{constructor(t){super(),P(this,t,Dt,null,j,{position:1,showCompass:2,showZoom:3,visualizePitch:4})}}function Tt(i,t,o){let n;const{map:u}=K();k(i,u,f=>o(5,n=f));let{position:e="bottom-left"}=t,{maxWidth:r=void 0}=t,{unit:l="metric"}=t,a=null;return F(()=>{n!=null&&n.loaded()&&a&&n.removeControl(a)}),i.$$set=f=>{"position"in f&&o(1,e=f.position),"maxWidth"in f&&o(2,r=f.maxWidth),"unit"in f&&o(3,l=f.unit)},i.$$.update=()=>{i.$$.dirty&62&&n&&!a&&(o(4,a=new E.ScaleControl({maxWidth:r,unit:l})),n.addControl(a,e))},[u,e,r,l,a,n]}class Rt extends A{constructor(t){super(),P(this,t,Tt,null,j,{position:1,maxWidth:2,unit:3})}}const Gt=i=>({map:i&8,loadedImages:i&16,allImagesLoaded:i&32}),ft=i=>({map:i[3],loadedImages:i[4],allImagesLoaded:i[5]});function at(i){let t,o,n=i[2]&&ut(i);const u=i[27].default,e=wt(u,i,i[26],ft);return{c(){n&&n.c(),t=R(),e&&e.c()},m(r,l){n&&n.m(r,l),w(r,t,l),e&&e.m(r,l),o=!0},p(r,l){r[2]?n?(n.p(r,l),l&4&&_(n,1)):(n=ut(r),n.c(),_(n,1),n.m(t.parentNode,t)):n&&(ct(),h(n,1,1,()=>{n=null}),mt()),e&&e.p&&(!o||l&67108920)&&Lt(e,u,r,r[26],o?zt(u,r[26],l,Gt):Zt(r[26]),ft)},i(r){o||(_(n),_(e,r),o=!0)},o(r){h(n),h(e,r),o=!1},d(r){r&&L(t),n&&n.d(r),e&&e.d(r)}}}function ut(i){let t,o,n,u,e,r,l,a;return t=new Nt({props:{position:i[6]}}),n=new Et({props:{position:i[6],fitBoundsOptions:{maxZoom:12}}}),e=new qt({props:{position:i[6]}}),l=new Rt({props:{position:i[6]}}),{c(){B(t.$$.fragment),o=R(),B(n.$$.fragment),u=R(),B(e.$$.fragment),r=R(),B(l.$$.fragment)},m(f,c){S(t,f,c),w(f,o,c),S(n,f,c),w(f,u,c),S(e,f,c),w(f,r,c),S(l,f,c),a=!0},p(f,c){const g={};c&64&&(g.position=f[6]),t.$set(g);const m={};c&64&&(m.position=f[6]),n.$set(m);const y={};c&64&&(y.position=f[6]),e.$set(y);const Z={};c&64&&(Z.position=f[6]),l.$set(Z)},i(f){a||(_(t.$$.fragment,f),_(n.$$.fragment,f),_(e.$$.fragment,f),_(l.$$.fragment,f),a=!0)},o(f){h(t.$$.fragment,f),h(n.$$.fragment,f),h(e.$$.fragment,f),h(l.$$.fragment,f),a=!1},d(f){f&&(L(o),L(u),L(r)),O(t,f),O(n,f),O(e,f),O(l,f)}}}function Ft(i){let t,o,n,u,e,r=i[3]&&i[0]&&at(i);return{c(){t=et("div"),r&&r.c(),G(t,"class",o=it(i[1])+" svelte-p00lfq"),rt(t,"expand-map",!i[1])},m(l,a){w(l,t,a),r&&r.m(t,null),n=!0,u||(e=bt(i[9].call(null,t)),u=!0)},p(l,[a]){l[3]&&l[0]?r?(r.p(l,a),a&9&&_(r,1)):(r=at(l),r.c(),_(r,1),r.m(t,null)):r&&(ct(),h(r,1,1,()=>{r=null}),mt()),(!n||a&2&&o!==(o=it(l[1])+" svelte-p00lfq"))&&G(t,"class",o),(!n||a&2)&&rt(t,"expand-map",!l[1])},i(l){n||(_(r),n=!0)},o(l){h(r),n=!1},d(l){l&&L(t),r&&r.d(),u=!1,e()}}}function Kt(i,t,o){let n,u,e,r,{$$slots:l={},$$scope:a}=t,{map:f=null}=t,{class:c=void 0}=t,{style:g}=t,{center:m=[0,0]}=t,{zoom:y=1}=t,{pitch:Z=0}=t,{bearing:X=0}=t,{bounds:C=void 0}=t,{loaded:q=!1}=t,{minZoom:Y=0}=t,{maxZoom:H=22}=t,{interactive:J=!0}=t,{attributionControl:Q=!0}=t,{preserveDrawingBuffer:V=!1}=t,{maxBounds:x=void 0}=t,{images:U=[]}=t,{standardControls:W=!1}=t,{filterLayers:D=void 0}=t,{transformRequest:I=void 0}=t;const b=Ct(),{map:N,loadedImages:T}=Pt();k(i,N,s=>o(3,e=s)),k(i,T,s=>o(4,r=s));let v=new Set;function gt(s){e!=null&&e.loaded()&&("url"in s?(v.add(s.id),e.loadImage(s.url,(d,M)=>{v.delete(s.id),d?b("error",d):M&&(e==null||e.addImage(s.id,M,s.options),r.add(s.id),T.set(r))})):(e.addImage(s.id,s.data,s.options),r.add(s.id),T.set(r)))}function _t(s){return st(N,e=new E.Map({container:s,style:g,center:m,zoom:y,pitch:Z,bearing:X,minZoom:Y,maxZoom:H,interactive:J,preserveDrawingBuffer:V,maxBounds:x,bounds:C,attributionControl:Q,transformRequest:I}),e),e.on("load",d=>{o(0,q=!0),b("load",e)}),e.on("error",d=>b("error",{...d,map:e})),e.on("movestart",d=>b("movestart",{...d,map:e})),e.on("moveend",d=>{o(10,m=d.target.getCenter()),o(11,y=d.target.getZoom()),o(12,C=d.target.getBounds()),b("moveend",{...d,map:e})}),e.on("zoomstart",d=>b("zoomstart",{...d,map:e})),e.on("zoom",d=>{o(11,y=d.target.getZoom()),b("zoom",{...d,map:e})}),e.on("zoomend",d=>{o(11,y=d.target.getZoom()),b("zoomend",{...d,map:e})}),e.on("styledata",d=>{if(e&&D){const M=e.getStyle().layers;if(M)for(let nt of M)D(nt)||e.setLayoutProperty(nt.id,"visibility","none")}b("styledata",{...d,map:e})}),{destroy(){o(0,q=!1),e==null||e.remove(),st(N,e=null,e)}}}return i.$$set=s=>{"map"in s&&o(13,f=s.map),"class"in s&&o(1,c=s.class),"style"in s&&o(14,g=s.style),"center"in s&&o(10,m=s.center),"zoom"in s&&o(11,y=s.zoom),"pitch"in s&&o(15,Z=s.pitch),"bearing"in s&&o(16,X=s.bearing),"bounds"in s&&o(12,C=s.bounds),"loaded"in s&&o(0,q=s.loaded),"minZoom"in s&&o(17,Y=s.minZoom),"maxZoom"in s&&o(18,H=s.maxZoom),"interactive"in s&&o(19,J=s.interactive),"attributionControl"in s&&o(20,Q=s.attributionControl),"preserveDrawingBuffer"in s&&o(21,V=s.preserveDrawingBuffer),"maxBounds"in s&&o(22,x=s.maxBounds),"images"in s&&o(23,U=s.images),"standardControls"in s&&o(2,W=s.standardControls),"filterLayers"in s&&o(24,D=s.filterLayers),"transformRequest"in s&&o(25,I=s.transformRequest),"$$scope"in s&&o(26,a=s.$$scope)},i.$$.update=()=>{if(i.$$.dirty&4&&o(6,n=typeof W=="boolean"?void 0:W),i.$$.dirty&8&&o(13,f=e),i.$$.dirty&8388617&&q&&e!=null&&e.loaded())for(let s of U)!v.has(s.id)&&!e.hasImage(s.id)&&gt(s);i.$$.dirty&8388624&&o(5,u=U.every(s=>r.has(s.id))),i.$$.dirty&1032&&m&&!tt(m,e==null?void 0:e.getCenter())&&(e==null||e.panTo(m)),i.$$.dirty&2056&&y&&!tt(y,e==null?void 0:e.getZoom())&&(e==null||e.zoomTo(y)),i.$$.dirty&4104&&C&&!tt(C,e==null?void 0:e.getBounds())&&(e==null||e.fitBounds(C))},[q,c,W,e,r,u,n,N,T,_t,m,y,C,f,g,Z,X,Y,H,J,Q,V,x,U,D,I,a,l]}class Xt extends A{constructor(t){super(),P(this,t,Kt,Ft,j,{map:13,class:1,style:14,center:10,zoom:11,pitch:15,bearing:16,bounds:12,loaded:0,minZoom:17,maxZoom:18,interactive:19,attributionControl:20,preserveDrawingBuffer:21,maxBounds:22,images:23,standardControls:2,filterLayers:24,transformRequest:25})}}function Yt(i){let t;return{c(){t=et("div"),t.innerHTML="<h1>Maps for Cats</h1>",G(t,"slot","left")},m(o,n){w(o,t,n)},p:St,d(o){o&&L(t)}}}function Ht(i){let t,o,n,u;function e(l){i[2](l)}let r={style:"https://api.maptiler.com/maps/streets/style.json?key=MZEJTanw3WpxRvt7qDfo",center:[-.1095,51.5076],zoom:13};return i[0]!==void 0&&(r.map=i[0]),o=new Xt({props:r}),Ot.push(()=>kt(o,"map",e)),o.$on("load",i[1]),{c(){t=et("div"),B(o.$$.fragment),G(t,"slot","main"),$(t,"position","relative"),$(t,"width","100%"),$(t,"height","100vh")},m(l,a){w(l,t,a),S(o,t,null),u=!0},p(l,a){const f={};!n&&a&1&&(n=!0,f.map=l[0],At(()=>n=!1)),o.$set(f)},i(l){u||(_(o.$$.fragment,l),u=!0)},o(l){h(o.$$.fragment,l),u=!1},d(l){l&&L(t),O(o)}}}function Jt(i){let t,o;return t=new Bt({props:{$$slots:{main:[Ht],left:[Yt]},$$scope:{ctx:i}}}),{c(){B(t.$$.fragment)},m(n,u){S(t,n,u),o=!0},p(n,[u]){const e={};u&9&&(e.$$scope={dirty:u,ctx:n}),t.$set(e)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){h(t.$$.fragment,n),o=!1},d(n){O(t,n)}}}function Qt(i,t,o){let n;function u(){for(let r of n.getStyle().layers)(r.id.startsWith("road_")||r.id.startsWith("bridge_"))&&n.setLayoutProperty(r.id,"visibility","none")}function e(r){n=r,o(0,n)}return[n,u,e]}class Vt extends A{constructor(t){super(),P(this,t,Qt,Jt,j,{})}}new Vt({target:document.getElementById("app")});
