import{S as B,i as P,s as R,c as h,d as b,e as p,m as k,t as d,f as y,k as m,l as w,n as C,o as $,v as S,p as M,r as c,z,q as T,u as A,A as E,L as F,C as G,g as N,h as V}from"./OverpassSelector-95003c07.js";import{a as W,m as q,d as D,g as I,A as H,I as J,M as K,i as O,e as Q}from"./MainLayers-c3bde718.js";import{T as U}from"./TopLeftPanel-2652fd01.js";function X(i){let e;return{c(){e=$("p"),e.textContent="Click a road"},m(n,t){p(n,e,t)},p:S,d(n){n&&m(e)}}}function Y(i){let e,n=i[0].features.length+"",t,r;return{c(){e=$("p"),t=M(n),r=M(" buildings onscreen")},m(l,a){p(l,e,a),c(e,t),c(e,r)},p(l,a){a&1&&n!==(n=l[0].features.length+"")&&z(t,n)},d(l){l&&m(e)}}}function Z(i){let e,n,t;function r(s,o){return s[1]?Y:X}let l=r(i),a=l(i);return n=new W({props:{source:"building-hitboxes",gj:i[0],layerStyle:i[2]}}),{c(){a.c(),e=h(),b(n.$$.fragment)},m(s,o){a.m(s,o),p(s,e,o),k(n,s,o),t=!0},p(s,[o]){l===(l=r(s))&&a?a.p(s,o):(a.d(1),a=l(s),a&&(a.c(),a.m(e.parentNode,e)));const _={};o&1&&(_.gj=s[0]),n.$set(_)},i(s){t||(d(n.$$.fragment,s),t=!0)},o(s){y(n.$$.fragment,s),t=!1},d(s){s&&m(e),a.d(s),w(n,s)}}}function ee(i,e,n){let t,r;C(i,q,s=>n(3,t=s)),C(i,D,s=>n(1,r=s));let l=I(),a={type:"fill",paint:{"fill-color":"blue"}};return i.$$.update=()=>{if(i.$$.dirty&11){if(n(0,l=I()),r)for(let s of t.queryRenderedFeatures())s.layer.id=="building-3d"&&l.features.push(s);n(0,l),n(1,r),n(3,t)}},[l,r,a,t]}class te extends B{constructor(e){super(),P(this,e,ee,Z,R,{})}}function ne(i){let e,n,t,r,l,a,s,o,_,L,v;return{c(){e=$("label"),n=$("input"),t=M(`
  Basemap roads`),r=h(),l=$("br"),a=h(),s=$("label"),o=$("input"),_=M(`
  Basemap buildings`),T(n,"type","checkbox"),T(o,"type","checkbox")},m(f,u){p(f,e,u),c(e,n),n.checked=i[0],c(e,t),p(f,r,u),p(f,l,u),p(f,a,u),p(f,s,u),c(s,o),o.checked=i[1],c(s,_),L||(v=[A(n,"change",i[3]),A(o,"change",i[4])],L=!0)},p(f,[u]){u&1&&(n.checked=f[0]),u&2&&(o.checked=f[1])},i:S,o:S,d(f){f&&(m(e),m(r),m(l),m(a),m(s)),L=!1,E(v)}}}function re(i,e,n){let t;C(i,q,o=>n(2,t=o));let r=!0,l=!0;function a(){r=this.checked,n(0,r)}function s(){l=this.checked,n(1,l)}return i.$$.update=()=>{if(i.$$.dirty&5&&t){let o=r?"visible":"none";for(let _ of t.getStyle().layers)_.id.startsWith("road_")&&t.setLayoutProperty(_.id,"visibility",o)}if(i.$$.dirty&6&&t){let o=l?"visible":"none";t.setLayoutProperty("building","visibility",o),t.setLayoutProperty("building-3d","visibility",o)}},[r,l,t,a,s]}class se extends B{constructor(e){super(),P(this,e,re,ne,R,{})}}function x(i){let e,n;return e=new te({}),{c(){b(e.$$.fragment)},m(t,r){k(e,t,r),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function le(i){let e,n,t,r,l,a,s,o,_,L,v,f;r=new H({}),o=new J({});let u=i[0]&&x();return{c(){e=$("div"),n=$("h1"),n.textContent="osm2streets road width tool",t=h(),b(r.$$.fragment),l=h(),a=$("hr"),s=h(),b(o.$$.fragment),_=h(),L=$("hr"),v=h(),u&&u.c(),T(e,"slot","left")},m(g,j){p(g,e,j),c(e,n),c(e,t),k(r,e,null),c(e,l),c(e,a),c(e,s),k(o,e,null),c(e,_),c(e,L),c(e,v),u&&u.m(e,null),f=!0},p(g,j){g[0]?u?j&1&&d(u,1):(u=x(),u.c(),d(u,1),u.m(e,null)):u&&(N(),y(u,1,1,()=>{u=null}),V())},i(g){f||(d(r.$$.fragment,g),d(o.$$.fragment,g),d(u),f=!0)},o(g){y(r.$$.fragment,g),y(o.$$.fragment,g),y(u),f=!1},d(g){g&&m(e),w(r),w(o),u&&u.d()}}}function ie(i){let e,n,t,r,l,a;return e=new Q({}),l=new se({}),{c(){b(e.$$.fragment),n=h(),t=$("hr"),r=h(),b(l.$$.fragment)},m(s,o){k(e,s,o),p(s,n,o),p(s,t,o),p(s,r,o),k(l,s,o),a=!0},p:S,i(s){a||(d(e.$$.fragment,s),d(l.$$.fragment,s),a=!0)},o(s){y(e.$$.fragment,s),y(l.$$.fragment,s),a=!1},d(s){s&&(m(n),m(t),m(r)),w(e,s),w(l,s)}}}function oe(i){let e,n;return e=new U({props:{$$slots:{default:[ie]},$$scope:{ctx:i}}}),{c(){b(e.$$.fragment)},m(t,r){k(e,t,r),n=!0},p(t,r){const l={};r&2&&(l.$$scope={dirty:r,ctx:t}),e.$set(l)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ae(i){let e,n,t;return n=new K({props:{$$slots:{default:[oe]},$$scope:{ctx:i}}}),{c(){e=$("div"),b(n.$$.fragment),T(e,"slot","main")},m(r,l){p(r,e,l),k(n,e,null),t=!0},p(r,l){const a={};l&2&&(a.$$scope={dirty:l,ctx:r}),n.$set(a)},i(r){t||(d(n.$$.fragment,r),t=!0)},o(r){y(n.$$.fragment,r),t=!1},d(r){r&&m(e),w(n)}}}function ue(i){let e,n;return e=new F({props:{$$slots:{main:[ae],left:[le]},$$scope:{ctx:i}}}),{c(){b(e.$$.fragment)},m(t,r){k(e,t,r),n=!0},p(t,[r]){const l={};r&3&&(l.$$scope={dirty:r,ctx:t}),e.$set(l)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function fe(i,e,n){let t;return C(i,q,r=>n(0,t=r)),G(async()=>{await O()}),[t]}class ce extends B{constructor(e){super(),P(this,e,fe,ue,R,{})}}new ce({target:document.getElementById("app")});
