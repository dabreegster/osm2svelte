import{N as oe,O as dt,S as B,i as W,s as z,e as Ee,a as A,E as $,d as I,F as N,I as tt,H as nt,l as k,p as L,w as q,t as C,g as pe,b as M,c as ye,j as U,k as J,o as X,v as Z,y as V,z as Q,G as ke,m as Y,C as le,q as gt,r as w,u as We,B as Ue,D as bt,f as ze,P as rt,n as E,Q as qe,J as wt,R as ot,T as it,U as st,h as Ve,x as lt,V as ht,W as pt,X as yt,Y as mt}from"./OverpassSelector-a1b80286.js";let _;const x=new Array(128).fill(void 0);x.push(void 0,null,!0,!1);function v(r){return x[r]}let be=x.length;function kt(r){r<132||(x[r]=be,be=r)}function Ce(r){const e=v(r);return kt(r),e}const at=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});at.decode();let _e=null;function je(){return(_e===null||_e.byteLength===0)&&(_e=new Uint8Array(_.memory.buffer)),_e}function O(r,e){return at.decode(je().subarray(r,r+e))}function R(r){be===x.length&&x.push(x.length+1);const e=be;return be=x[e],x[e]=r,e}function Oe(r){return r==null}let fe=null;function jt(){return(fe===null||fe.byteLength===0)&&(fe=new Float64Array(_.memory.buffer)),fe}let de=null;function y(){return(de===null||de.byteLength===0)&&(de=new Int32Array(_.memory.buffer)),de}let ne=0;const ve=new TextEncoder("utf-8"),vt=typeof ve.encodeInto=="function"?function(r,e){return ve.encodeInto(r,e)}:function(r,e){const n=ve.encode(r);return e.set(n),{read:r.length,written:n.length}};function ae(r,e,n){if(n===void 0){const u=ve.encode(r),l=e(u.length);return je().subarray(l,l+u.length).set(u),ne=u.length,l}let t=r.length,o=e(t);const s=je();let i=0;for(;i<t;i++){const u=r.charCodeAt(i);if(u>127)break;s[o+i]=u}if(i!==t){i!==0&&(r=r.slice(i)),o=n(o,t,t=i+r.length*3);const u=je().subarray(o+i,o+t),l=vt(r,u);i+=l.written}return ne=i,o}function Re(r){const e=typeof r;if(e=="number"||e=="boolean"||r==null)return`${r}`;if(e=="string")return`"${r}"`;if(e=="symbol"){const o=r.description;return o==null?"Symbol":`Symbol(${o})`}if(e=="function"){const o=r.name;return typeof o=="string"&&o.length>0?`Function(${o})`:"Function"}if(Array.isArray(r)){const o=r.length;let s="[";o>0&&(s+=Re(r[0]));for(let i=1;i<o;i++)s+=", "+Re(r[i]);return s+="]",s}const n=/\[object ([^\]]+)\]/.exec(toString.call(r));let t;if(n.length>1)t=n[1];else return toString.call(r);if(t=="Object")try{return"Object("+JSON.stringify(r)+")"}catch{return"Object"}return r instanceof Error?`${r.name}: ${r.message}
${r.stack}`:t}let ge=null;function St(){return(ge===null||ge.byteLength===0)&&(ge=new Uint32Array(_.memory.buffer)),ge}function Ct(r,e){const t=St().subarray(r/4,r/4+e),o=[];for(let s=0;s<t.length;s++)o.push(Ce(t[s]));return o}function se(r,e){try{return r.apply(this,e)}catch(n){_.__wbindgen_exn_store(R(n))}}class Pe{static __wrap(e){const n=Object.create(Pe.prototype);return n.ptr=e,n}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();_.__wbg_jsdebugstreets_free(e)}getLabel(){try{const t=_.__wbindgen_add_to_stack_pointer(-16);_.jsdebugstreets_getLabel(t,this.ptr);var e=y()[t/4+0],n=y()[t/4+1];return O(e,n)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(e,n)}}getNetwork(){const e=_.jsdebugstreets_getNetwork(this.ptr);return Ce(e)}toDebugGeojson(){try{const t=_.__wbindgen_add_to_stack_pointer(-16);_.jsdebugstreets_toDebugGeojson(t,this.ptr);var e=y()[t/4+0],n=y()[t/4+1];let o;return e!==0&&(o=O(e,n).slice(),_.__wbindgen_free(e,n*1)),o}finally{_.__wbindgen_add_to_stack_pointer(16)}}}class we{static __wrap(e){const n=Object.create(we.prototype);return n.ptr=e,n}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();_.__wbg_jsstreetnetwork_free(e)}constructor(e,n,t){try{const u=_.__wbindgen_add_to_stack_pointer(-16),l=ae(e,_.__wbindgen_malloc,_.__wbindgen_realloc),a=ne,f=ae(n,_.__wbindgen_malloc,_.__wbindgen_realloc),d=ne;_.jsstreetnetwork_new(u,l,a,f,d,R(t));var o=y()[u/4+0],s=y()[u/4+1],i=y()[u/4+2];if(i)throw Ce(s);return we.__wrap(o)}finally{_.__wbindgen_add_to_stack_pointer(16)}}toGeojsonPlain(){try{const t=_.__wbindgen_add_to_stack_pointer(-16);_.jsstreetnetwork_toGeojsonPlain(t,this.ptr);var e=y()[t/4+0],n=y()[t/4+1];return O(e,n)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(e,n)}}toLanePolygonsGeojson(){try{const t=_.__wbindgen_add_to_stack_pointer(-16);_.jsstreetnetwork_toLanePolygonsGeojson(t,this.ptr);var e=y()[t/4+0],n=y()[t/4+1];return O(e,n)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(e,n)}}toLaneMarkingsGeojson(){try{const t=_.__wbindgen_add_to_stack_pointer(-16);_.jsstreetnetwork_toLaneMarkingsGeojson(t,this.ptr);var e=y()[t/4+0],n=y()[t/4+1];return O(e,n)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(e,n)}}toIntersectionMarkingsGeojson(){try{const t=_.__wbindgen_add_to_stack_pointer(-16);_.jsstreetnetwork_toIntersectionMarkingsGeojson(t,this.ptr);var e=y()[t/4+0],n=y()[t/4+1];return O(e,n)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(e,n)}}toGraphviz(){try{const t=_.__wbindgen_add_to_stack_pointer(-16);_.jsstreetnetwork_toGraphviz(t,this.ptr);var e=y()[t/4+0],n=y()[t/4+1];return O(e,n)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(e,n)}}getDebugSteps(){try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.jsstreetnetwork_getDebugSteps(o,this.ptr);var e=y()[o/4+0],n=y()[o/4+1],t=Ct(e,n).slice();return _.__wbindgen_free(e,n*4),t}finally{_.__wbindgen_add_to_stack_pointer(16)}}debugClockwiseOrderingGeojson(){try{const t=_.__wbindgen_add_to_stack_pointer(-16);_.jsstreetnetwork_debugClockwiseOrderingGeojson(t,this.ptr);var e=y()[t/4+0],n=y()[t/4+1];return O(e,n)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(e,n)}}debugClockwiseOrderingForIntersectionGeojson(e){try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.jsstreetnetwork_debugClockwiseOrderingForIntersectionGeojson(o,this.ptr,e);var n=y()[o/4+0],t=y()[o/4+1];return O(n,t)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(n,t)}}debugMovementsFromLaneGeojson(e,n){try{const s=_.__wbindgen_add_to_stack_pointer(-16);_.jsstreetnetwork_debugMovementsFromLaneGeojson(s,this.ptr,e,n);var t=y()[s/4+0],o=y()[s/4+1];return O(t,o)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(t,o)}}debugRoadsConnectedToIntersectionGeojson(e){try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.jsstreetnetwork_debugRoadsConnectedToIntersectionGeojson(o,this.ptr,e);var n=y()[o/4+0],t=y()[o/4+1];return O(n,t)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(n,t)}}getOsmTagsForWay(e){try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.jsstreetnetwork_getOsmTagsForWay(o,this.ptr,e);var n=y()[o/4+0],t=y()[o/4+1];return O(n,t)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(n,t)}}toJson(){try{const t=_.__wbindgen_add_to_stack_pointer(-16);_.jsstreetnetwork_toJson(t,this.ptr);var e=y()[t/4+0],n=y()[t/4+1];return O(e,n)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(e,n)}}getGeometryForWay(e){try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.jsstreetnetwork_getGeometryForWay(o,this.ptr,e);var n=y()[o/4+0],t=y()[o/4+1];return O(n,t)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(n,t)}}wayToXml(e){try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.jsstreetnetwork_wayToXml(o,this.ptr,e);var n=y()[o/4+0],t=y()[o/4+1];return O(n,t)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(n,t)}}overwriteOsmTagsForWay(e,n){const t=ae(n,_.__wbindgen_malloc,_.__wbindgen_realloc),o=ne;_.jsstreetnetwork_overwriteOsmTagsForWay(this.ptr,e,t,o)}collapseShortRoad(e){_.jsstreetnetwork_collapseShortRoad(this.ptr,e)}collapseIntersection(e){_.jsstreetnetwork_collapseIntersection(this.ptr,e)}zipSidepath(e){_.jsstreetnetwork_zipSidepath(this.ptr,e)}}async function Ft(r,e){if(typeof Response=="function"&&r instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(r,e)}catch(t){if(r.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t);else throw t}const n=await r.arrayBuffer();return await WebAssembly.instantiate(n,e)}else{const n=await WebAssembly.instantiate(r,e);return n instanceof WebAssembly.Instance?{instance:n,module:r}:n}}function Lt(){const r={};return r.wbg={},r.wbg.__wbg_jsdebugstreets_new=function(e){const n=Pe.__wrap(e);return R(n)},r.wbg.__wbindgen_boolean_get=function(e){const n=v(e);return typeof n=="boolean"?n?1:0:2},r.wbg.__wbindgen_object_drop_ref=function(e){Ce(e)},r.wbg.__wbindgen_is_object=function(e){const n=v(e);return typeof n=="object"&&n!==null},r.wbg.__wbindgen_is_undefined=function(e){return v(e)===void 0},r.wbg.__wbindgen_in=function(e,n){return v(e)in v(n)},r.wbg.__wbg_jsstreetnetwork_new=function(e){const n=we.__wrap(e);return R(n)},r.wbg.__wbindgen_string_new=function(e,n){const t=O(e,n);return R(t)},r.wbg.__wbindgen_error_new=function(e,n){const t=new Error(O(e,n));return R(t)},r.wbg.__wbindgen_jsval_loose_eq=function(e,n){return v(e)==v(n)},r.wbg.__wbindgen_number_get=function(e,n){const t=v(n),o=typeof t=="number"?t:void 0;jt()[e/8+1]=Oe(o)?0:o,y()[e/4+0]=!Oe(o)},r.wbg.__wbindgen_string_get=function(e,n){const t=v(n),o=typeof t=="string"?t:void 0;var s=Oe(o)?0:ae(o,_.__wbindgen_malloc,_.__wbindgen_realloc),i=ne;y()[e/4+1]=i,y()[e/4+0]=s},r.wbg.__wbindgen_object_clone_ref=function(e){const n=v(e);return R(n)},r.wbg.__wbg_getwithrefkey_5e6d9547403deab8=function(e,n){const t=v(e)[v(n)];return R(t)},r.wbg.__wbg_new_abda76e883ba8a5f=function(){const e=new Error;return R(e)},r.wbg.__wbg_stack_658279fe44541cf6=function(e,n){const t=v(n).stack,o=ae(t,_.__wbindgen_malloc,_.__wbindgen_realloc),s=ne;y()[e/4+1]=s,y()[e/4+0]=o},r.wbg.__wbg_error_f851667af71bcfc6=function(e,n){try{console.error(O(e,n))}finally{_.__wbindgen_free(e,n)}},r.wbg.__wbg_now_c644db5194be8437=function(e){return v(e).now()},r.wbg.__wbg_debug_8db2eed1bf6c1e2a=function(e){console.debug(v(e))},r.wbg.__wbg_error_fe807da27c4a4ced=function(e){console.error(v(e))},r.wbg.__wbg_info_9e6db45ac337c3b5=function(e){console.info(v(e))},r.wbg.__wbg_log_7bb108d119bafbc1=function(e){console.log(v(e))},r.wbg.__wbg_warn_e57696dbb3977030=function(e){console.warn(v(e))},r.wbg.__wbg_newnoargs_2b8b6bd7753c76ba=function(e,n){const t=new Function(O(e,n));return R(t)},r.wbg.__wbg_get_baf4855f9a986186=function(){return se(function(e,n){const t=Reflect.get(v(e),v(n));return R(t)},arguments)},r.wbg.__wbg_call_95d1ea488d03e4e8=function(){return se(function(e,n){const t=v(e).call(v(n));return R(t)},arguments)},r.wbg.__wbg_self_e7c1f827057f6584=function(){return se(function(){const e=self.self;return R(e)},arguments)},r.wbg.__wbg_window_a09ec664e14b1b81=function(){return se(function(){const e=window.window;return R(e)},arguments)},r.wbg.__wbg_globalThis_87cbb8506fecf3a9=function(){return se(function(){const e=globalThis.globalThis;return R(e)},arguments)},r.wbg.__wbg_global_c85a9259e621f3db=function(){return se(function(){const e=global.global;return R(e)},arguments)},r.wbg.__wbg_instanceof_ArrayBuffer_a69f02ee4c4f5065=function(e){let n;try{n=v(e)instanceof ArrayBuffer}catch{n=!1}return n},r.wbg.__wbg_buffer_cf65c07de34b9a08=function(e){const n=v(e).buffer;return R(n)},r.wbg.__wbg_new_537b7341ce90bb31=function(e){const n=new Uint8Array(v(e));return R(n)},r.wbg.__wbg_set_17499e8aa4003ebd=function(e,n,t){v(e).set(v(n),t>>>0)},r.wbg.__wbg_length_27a2afe8ab42b09f=function(e){return v(e).length},r.wbg.__wbg_instanceof_Uint8Array_01cebe79ca606cca=function(e){let n;try{n=v(e)instanceof Uint8Array}catch{n=!1}return n},r.wbg.__wbindgen_debug_string=function(e,n){const t=Re(v(n)),o=ae(t,_.__wbindgen_malloc,_.__wbindgen_realloc),s=ne;y()[e/4+1]=s,y()[e/4+0]=o},r.wbg.__wbindgen_throw=function(e,n){throw new Error(O(e,n))},r.wbg.__wbindgen_memory=function(){const e=_.memory;return R(e)},r}function Mt(r,e){return _=r.exports,Gt.__wbindgen_wasm_module=e,fe=null,de=null,ge=null,_e=null,_}async function Gt(r){typeof r>"u"&&(r="/osm2svelte/assets/osm2streets_js_bg.wasm");const e=Lt();(typeof r=="string"||typeof Request=="function"&&r instanceof Request||typeof URL=="function"&&r instanceof URL)&&(r=fetch(r));const{instance:n,module:t}=await Ft(await r,e);return Mt(n,t)}let me;const Ot=new Uint8Array(16);function Rt(){if(!me&&(me=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!me))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return me(Ot)}const D=[];for(let r=0;r<256;++r)D.push((r+256).toString(16).slice(1));function At(r,e=0){return(D[r[e+0]]+D[r[e+1]]+D[r[e+2]]+D[r[e+3]]+"-"+D[r[e+4]]+D[r[e+5]]+"-"+D[r[e+6]]+D[r[e+7]]+"-"+D[r[e+8]]+D[r[e+9]]+"-"+D[r[e+10]]+D[r[e+11]]+D[r[e+12]]+D[r[e+13]]+D[r[e+14]]+D[r[e+15]]).toLowerCase()}const It=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),He={randomUUID:It};function te(r,e,n){if(He.randomUUID&&!e&&!r)return He.randomUUID();r=r||{};const t=r.random||(r.rng||Rt)();if(t[6]=t[6]&15|64,t[8]=t[8]&63|128,e){n=n||0;for(let o=0;o<16;++o)e[n+o]=t[o];return e}return At(t)}const ue=oe(null),Fe=oe(null),jn=oe(null),Ae=oe(null),Se=oe(null),he=oe(null),Ie=oe(null);Fe.subscribe(r=>{Ae.set(null),Se.set(null),he.set(null),Ie.set(null)});function ut(r,e,n){if(r!==null)for(var t,o,s,i,u,l,a,f=0,d=0,c,b=r.type,p=b==="FeatureCollection",S=b==="Feature",G=p?r.features.length:1,g=0;g<G;g++){a=p?r.features[g].geometry:S?r.geometry:r,c=a?a.type==="GeometryCollection":!1,u=c?a.geometries.length:1;for(var F=0;F<u;F++){var m=0,j=0;if(i=c?a.geometries[F]:a,i!==null){l=i.coordinates;var h=i.type;switch(f=n&&(h==="Polygon"||h==="MultiPolygon")?1:0,h){case null:break;case"Point":if(e(l,d,g,m,j)===!1)return!1;d++,m++;break;case"LineString":case"MultiPoint":for(t=0;t<l.length;t++){if(e(l[t],d,g,m,j)===!1)return!1;d++,h==="MultiPoint"&&m++}h==="LineString"&&m++;break;case"Polygon":case"MultiLineString":for(t=0;t<l.length;t++){for(o=0;o<l[t].length-f;o++){if(e(l[t][o],d,g,m,j)===!1)return!1;d++}h==="MultiLineString"&&m++,h==="Polygon"&&j++}h==="Polygon"&&m++;break;case"MultiPolygon":for(t=0;t<l.length;t++){for(j=0,o=0;o<l[t].length;o++){for(s=0;s<l[t][o].length-f;s++){if(e(l[t][o][s],d,g,m,j)===!1)return!1;d++}j++}m++}break;case"GeometryCollection":for(t=0;t<i.geometries.length;t++)if(ut(i.geometries[t],e,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function De(r){var e=[1/0,1/0,-1/0,-1/0];return ut(r,function(n){e[0]>n[0]&&(e[0]=n[0]),e[1]>n[1]&&(e[1]=n[1]),e[2]<n[0]&&(e[2]=n[0]),e[3]<n[1]&&(e[3]=n[1])}),e}De.default=De;function Le(r,e,n){let t=["case"];for(let[o,s]of Object.entries(e))t.push(["==",["get",r],o]),t.push(s);return t.push(n),t}function ct(r,e,n){return["case",["boolean",["feature-state",r],!1],n,e]}function re(){return{type:"FeatureCollection",features:[]}}function _t(r){return De(r)}function Dt(r){let e=dt(ue),n,t=!1;for(let o=Xe.length-1;o>=0;o--){let s=Xe[o];if(s==r){t=!0;break}e.getLayer(s)&&(n=s)}if(!t)throw new Error(`Layer ID ${r} not defined in layerZorder`);return n}const Xe=["boundary-layer","lane-polygons-layer","intersection-polygons-layer","lane-markings-layer","intersection-markings-layer","movements-layer","connected-roads-layer","road-weights-layer","current-way-layer","building-hitboxes-layer","road_label"];function ft(r,e){var n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8, "+encodeURIComponent(e)),n.setAttribute("download",r),document.body.appendChild(n),n.click(),document.body.removeChild(n)}function Ze(r){let e,n,t;return{c(){e=k("button"),e.textContent="Download",L(e,"type","button")},m(o,s){A(o,e,s),n||(t=q(e,"click",r[1]),n=!0)},p:$,d(o){o&&I(e),n=!1,t()}}}function Et(r){let e,n=r[0]&&Ze(r);return{c(){n&&n.c(),e=Ee()},m(t,o){n&&n.m(t,o),A(t,e,o)},p(t,[o]){t[0]?n?n.p(t,o):(n=Ze(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:$,o:$,d(t){t&&I(e),n&&n.d(t)}}}function Ut(r,e,n){let t;N(r,ue,h=>n(9,t=h));let{source:o}=e,{show:s=!0}=e,{gj:i}=e,{layerStyle:u}=e,{downloadable:l=!1}=e,{interactive:a=!1}=e,{hoveredFeature:f=null}=e,{clickedFeature:d=null}=e,c,b,p=`${o}-layer`;tt(()=>{S(),t.addSource(o,{type:"geojson",data:i}),t.addLayer({id:p,source:o,...u},Dt(p)),s||t.setLayoutProperty(p,"visibility","none"),a&&(t.on("mousemove",p,G),t.on("mouseleave",p,g),t.on("click",F))}),nt(()=>{a&&(t.off("mousemove",G),t.off("mouseleave",g),t.off("click",F),m()),t.getLayer(p)&&t.removeLayer(p),t.removeSource(o)});function S(){if("features"in i)for(let[h,P]of i.features.entries())P.id=h+1}function G(h){h.features.length>0&&c!=h.features[0].id&&(m(),c=h.features[0].id,t.setFeatureState({source:o,id:c},{hover:!0}),"features"in i&&n(2,f=i.features.find(P=>P.id==c)))}function g(){m(),n(2,f=null),c=void 0}function F(h){d!==null&&t.setFeatureState({source:o,id:b},{clicked:!1});let P=t.queryRenderedFeatures(h.point,{layers:[p]});P.length==1?(b=P[0].id,t.setFeatureState({source:o,id:b},{clicked:!0}),"features"in i&&n(3,d=i.features.find(T=>T.id==b))):(n(3,d=null),b=void 0)}function m(){c!==void 0&&t.setFeatureState({source:o,id:c},{hover:!1})}function j(){ft("layer.geojson",JSON.stringify(i))}return r.$$set=h=>{"source"in h&&n(4,o=h.source),"show"in h&&n(5,s=h.show),"gj"in h&&n(6,i=h.gj),"layerStyle"in h&&n(7,u=h.layerStyle),"downloadable"in h&&n(0,l=h.downloadable),"interactive"in h&&n(8,a=h.interactive),"hoveredFeature"in h&&n(2,f=h.hoveredFeature),"clickedFeature"in h&&n(3,d=h.clickedFeature)},r.$$.update=()=>{if(r.$$.dirty&592){let h=t.getSource(o);h&&(console.log(`GeoJSON data for ${o} changed, updating`),h.setData(i))}r.$$.dirty&544&&t.getLayer(p)&&t.setLayoutProperty(p,"visibility",s?"visible":"none")},[l,j,f,d,o,s,i,u,a,t]}class ie extends B{constructor(e){super(),W(this,e,Ut,Et,z,{source:4,show:5,gj:6,layerStyle:7,downloadable:0,interactive:8,hoveredFeature:2,clickedFeature:3})}}function Qe(r){let e,n,t;function o(i){r[5](i)}let s={source:"connected-roads",gj:r[1],layerStyle:r[2]};return r[0]!==void 0&&(s.show=r[0]),e=new ie({props:s}),U.push(()=>J(e,"show",o)),{c(){X(e.$$.fragment)},m(i,u){Z(e,i,u),t=!0},p(i,u){const l={};u&2&&(l.gj=i[1]),!n&&u&1&&(n=!0,l.show=i[0],V(()=>n=!1)),e.$set(l)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){Q(e,i)}}}function Pt(r){let e,n,t=r[1].features.length&&Qe(r);return{c(){t&&t.c(),e=Ee()},m(o,s){t&&t.m(o,s),A(o,e,s),n=!0},p(o,[s]){o[1].features.length?t?(t.p(o,s),s&2&&C(t,1)):(t=Qe(o),t.c(),C(t,1),t.m(e.parentNode,e)):t&&(pe(),M(t,1,1,()=>{t=null}),ye())},i(o){n||(C(t),n=!0)},o(o){M(t),n=!1},d(o){o&&I(e),t&&t.d(o)}}}function Tt(r,e,n){let t,o;N(r,he,a=>n(3,t=a)),N(r,Fe,a=>n(4,o=a));let{show:s}=e,i={type:"fill",paint:{"fill-color":"blue","fill-opacity":.5}},u=re();function l(a){s=a,n(0,s)}return r.$$set=a=>{"show"in a&&n(0,s=a.show)},r.$$.update=()=>{r.$$.dirty&24&&(n(1,u=re()),t&&n(1,u=JSON.parse(o.debugRoadsConnectedToIntersectionGeojson(t.properties.id))))},[s,u,i,t,o,l]}class Nt extends B{constructor(e){super(),W(this,e,Tt,Pt,z,{show:0})}}function Ye(r){let e,n,t;function o(i){r[5](i)}let s={source:"movements",gj:r[1],layerStyle:r[2]};return r[0]!==void 0&&(s.show=r[0]),e=new ie({props:s}),U.push(()=>J(e,"show",o)),{c(){X(e.$$.fragment)},m(i,u){Z(e,i,u),t=!0},p(i,u){const l={};u&2&&(l.gj=i[1]),!n&&u&1&&(n=!0,l.show=i[0],V(()=>n=!1)),e.$set(l)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){Q(e,i)}}}function Jt(r){let e,n,t=r[1].features.length&&Ye(r);return{c(){t&&t.c(),e=Ee()},m(o,s){t&&t.m(o,s),A(o,e,s),n=!0},p(o,[s]){o[1].features.length?t?(t.p(o,s),s&2&&C(t,1)):(t=Ye(o),t.c(),C(t,1),t.m(e.parentNode,e)):t&&(pe(),M(t,1,1,()=>{t=null}),ye())},i(o){n||(C(t),n=!0)},o(o){M(t),n=!1},d(o){o&&I(e),t&&t.d(o)}}}function Bt(r,e,n){let t,o;N(r,Fe,a=>n(3,t=a)),N(r,Se,a=>n(4,o=a));let{show:s}=e,i={type:"fill",paint:{"fill-color":"blue","fill-opacity":.5}},u=re();function l(a){s=a,n(0,s)}return r.$$set=a=>{"show"in a&&n(0,s=a.show)},r.$$.update=()=>{if(r.$$.dirty&24&&(n(1,u=re()),o)){let a=o.properties;n(1,u=JSON.parse(t.debugMovementsFromLaneGeojson(a.road,a.index)))}},[s,u,i,t,o,l]}class Wt extends B{constructor(e){super(),W(this,e,Bt,Jt,z,{show:0})}}function zt(r,e,n){let t,o,s;N(r,ue,l=>n(2,t=l)),N(r,he,l=>n(3,o=l)),N(r,Fe,l=>n(4,s=l));let{show:i}=e,u=[];return r.$$set=l=>{"show"in l&&n(0,i=l.show)},r.$$.update=()=>{if(r.$$.dirty&31){for(let l of u)l.remove();if(n(1,u=[]),i&&o){let l=JSON.parse(s.debugClockwiseOrderingForIntersectionGeojson(o.properties.id));for(let a of l.features)u.push(new ke.Popup({closeButton:!1,closeOnClick:!1,focusAfterOpen:!1}).setLngLat(a.geometry.coordinates).setHTML(a.properties.label).addTo(t))}}},[i,u,t,o,s]}class qt extends B{constructor(e){super(),W(this,e,zt,null,z,{show:0})}}function Vt(r){let e,n,t;function o(i){r[4](i)}let s={source:"boundary",gj:r[1],layerStyle:r[3],downloadable:r[2]};return r[0]!==void 0&&(s.show=r[0]),e=new ie({props:s}),U.push(()=>J(e,"show",o)),{c(){X(e.$$.fragment)},m(i,u){Z(e,i,u),t=!0},p(i,[u]){const l={};u&2&&(l.gj=i[1]),u&4&&(l.downloadable=i[2]),!n&&u&1&&(n=!0,l.show=i[0],V(()=>n=!1)),e.$set(l)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){Q(e,i)}}}function Ht(r,e,n){let t;N(r,ue,a=>n(5,t=a));let{gj:o}=e,{show:s}=e,{downloadable:i}=e,u={type:"line",paint:{"line-color":"blue","line-width":4}};t.fitBounds(_t(o),{animate:!1,padding:10});function l(a){s=a,n(0,s)}return r.$$set=a=>{"gj"in a&&n(1,o=a.gj),"show"in a&&n(0,s=a.show),"downloadable"in a&&n(2,i=a.downloadable)},[s,o,i,u,l]}class Xt extends B{constructor(e){super(),W(this,e,Ht,Vt,z,{gj:1,show:0,downloadable:2})}}function Zt(r){let e,n,t;function o(i){r[4](i)}let s={source:"intersection-markings",gj:r[1],layerStyle:r[3],downloadable:r[2]};return r[0]!==void 0&&(s.show=r[0]),e=new ie({props:s}),U.push(()=>J(e,"show",o)),{c(){X(e.$$.fragment)},m(i,u){Z(e,i,u),t=!0},p(i,[u]){const l={};u&2&&(l.gj=i[1]),u&4&&(l.downloadable=i[2]),!n&&u&1&&(n=!0,l.show=i[0],V(()=>n=!1)),e.$set(l)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){Q(e,i)}}}function Qt(r,e,n){let{gj:t}=e,{show:o}=e,{downloadable:s}=e,i={type:"fill",paint:{"fill-color":Le("type",{"sidewalk corner":"#CCCCCC"},"red"),"fill-opacity":.9}};function u(l){o=l,n(0,o)}return r.$$set=l=>{"gj"in l&&n(1,t=l.gj),"show"in l&&n(0,o=l.show),"downloadable"in l&&n(2,s=l.downloadable)},[o,t,s,i,u]}class Yt extends B{constructor(e){super(),W(this,e,Qt,Zt,z,{gj:1,show:0,downloadable:2})}}function Kt(r){let e,n,t,o,s;function i(f){r[6](f)}function u(f){r[7](f)}function l(f){r[8](f)}let a={source:"intersection-polygons",gj:r[1],layerStyle:r[5],interactive:!0,downloadable:r[2]};return r[3]!==void 0&&(a.hoveredFeature=r[3]),r[4]!==void 0&&(a.clickedFeature=r[4]),r[0]!==void 0&&(a.show=r[0]),e=new ie({props:a}),U.push(()=>J(e,"hoveredFeature",i)),U.push(()=>J(e,"clickedFeature",u)),U.push(()=>J(e,"show",l)),{c(){X(e.$$.fragment)},m(f,d){Z(e,f,d),s=!0},p(f,[d]){const c={};d&2&&(c.gj=f[1]),d&4&&(c.downloadable=f[2]),!n&&d&8&&(n=!0,c.hoveredFeature=f[3],V(()=>n=!1)),!t&&d&16&&(t=!0,c.clickedFeature=f[4],V(()=>t=!1)),!o&&d&1&&(o=!0,c.show=f[0],V(()=>o=!1)),e.$set(c)},i(f){s||(C(e.$$.fragment,f),s=!0)},o(f){M(e.$$.fragment,f),s=!1},d(f){Q(e,f)}}}function xt(r,e,n){let t,o;N(r,he,c=>n(3,t=c)),N(r,Ie,c=>n(4,o=c));let{gj:s}=e,{show:i}=e,{downloadable:u}=e,l={type:"fill",filter:["==",["get","type"],"intersection"],paint:{"fill-color":Le("intersection_kind",{Connection:"#666",Intersection:"#966",Terminus:"#999",MapEdge:"#696"},"#666"),"fill-opacity":ct("hover",.9,.4)}};function a(c){t=c,he.set(t)}function f(c){o=c,Ie.set(o)}function d(c){i=c,n(0,i)}return r.$$set=c=>{"gj"in c&&n(1,s=c.gj),"show"in c&&n(0,i=c.show),"downloadable"in c&&n(2,u=c.downloadable)},[i,s,u,t,o,l,a,f,d]}class $t extends B{constructor(e){super(),W(this,e,xt,Kt,z,{gj:1,show:0,downloadable:2})}}function en(r){let e,n,t;function o(i){r[4](i)}let s={source:"lane-markings",gj:r[1],layerStyle:r[3],downloadable:r[2]};return r[0]!==void 0&&(s.show=r[0]),e=new ie({props:s}),U.push(()=>J(e,"show",o)),{c(){X(e.$$.fragment)},m(i,u){Z(e,i,u),t=!0},p(i,[u]){const l={};u&2&&(l.gj=i[1]),u&4&&(l.downloadable=i[2]),!n&&u&1&&(n=!0,l.show=i[0],V(()=>n=!1)),e.$set(l)},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){Q(e,i)}}}function tn(r,e,n){let{gj:t}=e,{show:o}=e,{downloadable:s}=e,i={type:"fill",paint:{"fill-color":Le("type",{"center line":"yellow","lane separator":"white","lane arrow":"white","buffer edge":"white","buffer stripe":"white","vehicle stop line":"white","bike stop line":"green"},"red"),"fill-opacity":.9}};function u(l){o=l,n(0,o)}return r.$$set=l=>{"gj"in l&&n(1,t=l.gj),"show"in l&&n(0,o=l.show),"downloadable"in l&&n(2,s=l.downloadable)},[o,t,s,i,u]}class nn extends B{constructor(e){super(),W(this,e,tn,en,z,{gj:1,show:0,downloadable:2})}}function rn(r){let e,n,t,o,s;function i(f){r[6](f)}function u(f){r[7](f)}function l(f){r[8](f)}let a={source:"lane-polygons",gj:r[1],layerStyle:r[5],interactive:!0,downloadable:r[2]};return r[3]!==void 0&&(a.clickedFeature=r[3]),r[4]!==void 0&&(a.hoveredFeature=r[4]),r[0]!==void 0&&(a.show=r[0]),e=new ie({props:a}),U.push(()=>J(e,"clickedFeature",i)),U.push(()=>J(e,"hoveredFeature",u)),U.push(()=>J(e,"show",l)),{c(){X(e.$$.fragment)},m(f,d){Z(e,f,d),s=!0},p(f,[d]){const c={};d&2&&(c.gj=f[1]),d&4&&(c.downloadable=f[2]),!n&&d&8&&(n=!0,c.clickedFeature=f[3],V(()=>n=!1)),!t&&d&16&&(t=!0,c.hoveredFeature=f[4],V(()=>t=!1)),!o&&d&1&&(o=!0,c.show=f[0],V(()=>o=!1)),e.$set(c)},i(f){s||(C(e.$$.fragment,f),s=!0)},o(f){M(e.$$.fragment,f),s=!1},d(f){Q(e,f)}}}function on(r,e,n){let t,o;N(r,Ae,c=>n(3,t=c)),N(r,Se,c=>n(4,o=c));let{gj:s}=e,{show:i}=e,{downloadable:u}=e,l={type:"fill",paint:{"fill-color":Le("type",{Driving:"black",Parking:"#333333",Sidewalk:"#CCCCCC",Shoulder:"#CCCCCC",Biking:"#0F7D4B",Bus:"#BE4A4C",SharedLeftTurn:"black",Construction:"#FF6D00",LightRail:"#844204",Footway:"#DDDDE8",SharedUse:"#E5E1BB","Buffer(Planters)":"#555555"},"red"),"fill-opacity":ct("hover",.9,.4)}};function a(c){t=c,Ae.set(t)}function f(c){o=c,Se.set(o)}function d(c){i=c,n(0,i)}return r.$$set=c=>{"gj"in c&&n(1,s=c.gj),"show"in c&&n(0,i=c.show),"downloadable"in c&&n(2,u=c.downloadable)},[i,s,u,t,o,l,a,f,d]}class sn extends B{constructor(e){super(),W(this,e,on,rn,z,{gj:1,show:0,downloadable:2})}}function vn(r,e){return[{uuid:te(),label:"Boundary",show:!0,content:Xt,gj:e},{uuid:te(),label:"Intersection polygons",show:!0,content:$t,gj:JSON.parse(r.toGeojsonPlain())},{uuid:te(),label:"Intersection markings",show:!0,content:Yt,gj:JSON.parse(r.toIntersectionMarkingsGeojson())},{uuid:te(),label:"Lane polygons",show:!0,content:sn,gj:JSON.parse(r.toLanePolygonsGeojson())},{uuid:te(),label:"Lane markings",show:!0,content:nn,gj:JSON.parse(r.toLaneMarkingsGeojson())}]}function Sn(r){return[{uuid:te(),label:"Movement arrows",show:!0,content:Wt,gj:re()},{uuid:te(),label:"Roads connected to intersection",show:!0,content:Nt,gj:re()},{uuid:te(),label:"Clockwise ordering of roads",show:!1,content:qt,gj:re()}]}function ln(r){let e,n,t,o,s,i,u,l,a;return{c(){e=k("div"),n=Y(`App:
  `),t=k("select"),o=k("option"),o.textContent="Street Explorer",s=k("option"),s.textContent="Lane editor",i=k("option"),i.textContent="Route profile tool",u=k("option"),u.textContent="Road width tool",o.__value="index.html",le(o,o.__value),s.__value="lane_editor.html",le(s,s.__value),i.__value="route_profile.html",le(i,i.__value),u.__value="thicken_roads.html",le(u,u.__value),r[0]===void 0&&gt(()=>r[2].call(t))},m(f,d){A(f,e,d),w(e,n),w(e,t),w(t,o),w(t,s),w(t,i),w(t,u),We(t,r[0],!0),l||(a=[q(t,"change",r[2]),q(t,"change",r[1])],l=!0)},p(f,[d]){d&1&&We(t,f[0])},i:$,o:$,d(f){f&&I(e),l=!1,Ue(a)}}}function an(r,e,n){let t=window.location.pathname.split("/").pop()||"index.html",o=t;function s(){o!=t&&(window.location.href=o)}function i(){o=bt(this),n(0,o)}return[o,s,i]}class Cn extends B{constructor(e){super(),W(this,e,an,ln,z,{})}}function Ke(r,e,n){const t=r.slice();return t[6]=e[n],t[7]=e,t[8]=n,t}function xe(r,e){let n,t,o,s=e[6].label+"",i,u,l,a,f,d,c,b,p;function S(){e[4].call(t,e[7],e[8])}function G(m){e[5](m,e[6])}var g=e[6].content;function F(m){let j={gj:m[6].gj,downloadable:!0};return m[6].show!==void 0&&(j.show=m[6].show),{props:j}}return g&&(l=Ve(g,F(e)),U.push(()=>J(l,"show",G))),{key:r,first:null,c(){n=k("label"),t=k("input"),o=E(),i=Y(s),u=E(),l&&X(l.$$.fragment),f=E(),d=k("br"),L(t,"type","checkbox"),this.first=n},m(m,j){A(m,n,j),w(n,t),t.checked=e[6].show,w(n,o),w(n,i),w(n,u),l&&Z(l,n,null),A(m,f,j),A(m,d,j),c=!0,b||(p=q(t,"change",S),b=!0)},p(m,j){e=m,j&1&&(t.checked=e[6].show),(!c||j&1)&&s!==(s=e[6].label+"")&&lt(i,s);const h={};if(j&1&&(h.gj=e[6].gj),!a&&j&1&&(a=!0,h.show=e[6].show,V(()=>a=!1)),j&1&&g!==(g=e[6].content)){if(l){pe();const P=l;M(P.$$.fragment,1,0,()=>{Q(P,1)}),ye()}g?(l=Ve(g,F(e)),U.push(()=>J(l,"show",G)),X(l.$$.fragment),C(l.$$.fragment,1),Z(l,n,null)):l=null}else g&&l.$set(h)},i(m){c||(l&&C(l.$$.fragment,m),c=!0)},o(m){l&&M(l.$$.fragment,m),c=!1},d(m){m&&(I(n),I(f),I(d)),l&&Q(l),b=!1,p()}}}function $e(r){let e;return{c(){e=k("hr")},m(n,t){A(n,e,t)},d(n){n&&I(e)}}}function un(r){let e,n=[],t=new Map,o,s,i,u=ze(r[0]);const l=c=>c[6].uuid;for(let c=0;c<u.length;c+=1){let b=Ke(r,u,c),p=l(b);t.set(p,n[c]=xe(p,b))}let a=r[0].length&&$e();const f=r[3].default,d=rt(f,r,r[2],null);return{c(){e=k("div");for(let c=0;c<n.length;c+=1)n[c].c();o=E(),a&&a.c(),s=E(),d&&d.c(),L(e,"class","svelte-eycl9h"),qe(e,"display",r[1]?"block":"none")},m(c,b){A(c,e,b);for(let p=0;p<n.length;p+=1)n[p]&&n[p].m(e,null);w(e,o),a&&a.m(e,null),w(e,s),d&&d.m(e,null),i=!0},p(c,[b]){b&1&&(u=ze(c[0]),pe(),n=wt(n,b,l,1,c,u,t,e,ht,xe,o,Ke),ye()),c[0].length?a||(a=$e(),a.c(),a.m(e,s)):a&&(a.d(1),a=null),d&&d.p&&(!i||b&4)&&ot(d,f,c,c[2],i?st(f,c[2],b,null):it(c[2]),null),b&2&&qe(e,"display",c[1]?"block":"none")},i(c){if(!i){for(let b=0;b<u.length;b+=1)C(n[b]);C(d,c),i=!0}},o(c){for(let b=0;b<n.length;b+=1)M(n[b]);M(d,c),i=!1},d(c){c&&I(e);for(let b=0;b<n.length;b+=1)n[b].d();a&&a.d(),d&&d.d(c)}}}function cn(r,e,n){let{$$slots:t={},$$scope:o}=e,{layers:s}=e,{showControls:i=!0}=e;function u(a,f){a[f].show=this.checked,n(0,s)}function l(a,f){r.$$.not_equal(f.show,a)&&(f.show=a,n(0,s))}return r.$$set=a=>{"layers"in a&&n(0,s=a.layers),"showControls"in a&&n(1,i=a.showControls),"$$scope"in a&&n(2,o=a.$$scope)},[s,i,o,t,u,l]}class Fn extends B{constructor(e){super(),W(this,e,cn,un,z,{layers:0,showControls:1})}}function et(r){let e;const n=r[3].default,t=rt(n,r,r[2],null);return{c(){t&&t.c()},m(o,s){t&&t.m(o,s),e=!0},p(o,s){t&&t.p&&(!e||s&4)&&ot(t,n,o,o[2],e?st(n,o[2],s,null):it(o[2]),null)},i(o){e||(C(t,o),e=!0)},o(o){M(t,o),e=!1},d(o){t&&t.d(o)}}}function _n(r){let e,n,t=r[1]&&et(r);return{c(){e=k("div"),t&&t.c(),L(e,"class","map svelte-12dpf1u")},m(o,s){A(o,e,s),t&&t.m(e,null),r[4](e),n=!0},p(o,[s]){o[1]?t?(t.p(o,s),s&2&&C(t,1)):(t=et(o),t.c(),C(t,1),t.m(e,null)):t&&(pe(),M(t,1,1,()=>{t=null}),ye())},i(o){n||(C(t),n=!0)},o(o){M(t),n=!1},d(o){o&&I(e),t&&t.d(),r[4](null)}}}function fn(r,e,n){let{$$slots:t={},$$scope:o}=e,s,i,u=!1;tt(()=>{s=new ke.Map({container:i,style:"https://api.maptiler.com/maps/streets/style.json?key=MZEJTanw3WpxRvt7qDfo",hash:!0}),s.addControl(new ke.ScaleControl({})),s.addControl(new ke.NavigationControl({}),"bottom-right"),s.on("load",()=>{n(1,u=!0),ue.set(s)}),new ResizeObserver(()=>{s.resize()}).observe(i)}),nt(()=>{s.remove()});function l(a){U[a?"unshift":"push"](()=>{i=a,n(0,i)})}return r.$$set=a=>{"$$scope"in a&&n(2,o=a.$$scope)},[i,u,o,t,l]}class Ln extends B{constructor(e){super(),W(this,e,fn,_n,z,{})}}function dn(r){let e,n,t,o,s,i,u,l,a,f,d,c,b,p,S,G,g,F,m,j,h,P,T,Te,Ne,ce,H,Je,Me,Ge,Be;return Me=pt(r[6][0]),{c(){e=k("details"),n=k("summary"),n.textContent="Processing Options",t=E(),o=k("label"),s=k("input"),i=Y(`
    Debug each transformation step`),u=E(),l=k("label"),a=k("input"),f=Y(`
    Enable dual carriageway experiment`),d=E(),c=k("label"),b=k("input"),p=Y(`
    Enable sidepath zipping experiment`),S=E(),G=k("label"),g=k("input"),F=Y(`
    Enable osm2lanes experiment`),m=E(),j=k("div"),h=Y(`Sidewalks:
    `),P=k("label"),T=k("input"),Te=Y(`
      use mapped footways`),Ne=E(),ce=k("label"),H=k("input"),Je=Y(`
      infer on roads`),L(n,"class","svelte-fio7ln"),L(s,"type","checkbox"),L(o,"class","svelte-fio7ln"),L(a,"type","checkbox"),L(l,"class","svelte-fio7ln"),L(b,"type","checkbox"),L(c,"class","svelte-fio7ln"),L(g,"type","checkbox"),L(G,"class","svelte-fio7ln"),L(T,"type","radio"),T.__value=!1,le(T,T.__value),L(P,"class","svelte-fio7ln"),L(H,"type","radio"),H.__value=!0,le(H,H.__value),L(ce,"class","svelte-fio7ln"),L(j,"class","svelte-fio7ln"),L(e,"class","svelte-fio7ln"),Me.p(T,H)},m(K,ee){A(K,e,ee),w(e,n),w(e,t),w(e,o),w(o,s),s.checked=r[0].debug_each_step,w(o,i),w(e,u),w(e,l),w(l,a),a.checked=r[0].dual_carriageway_experiment,w(l,f),w(e,d),w(e,c),w(c,b),b.checked=r[0].sidepath_zipping_experiment,w(c,p),w(e,S),w(e,G),w(G,g),g.checked=r[0].osm2lanes,w(G,F),w(e,m),w(e,j),w(j,h),w(j,P),w(P,T),T.checked=T.__value===r[0].inferred_sidewalks,w(P,Te),w(j,Ne),w(j,ce),w(ce,H),H.checked=H.__value===r[0].inferred_sidewalks,w(ce,Je),Ge||(Be=[q(s,"change",r[1]),q(a,"change",r[2]),q(b,"change",r[3]),q(g,"change",r[4]),q(T,"change",r[5]),q(H,"change",r[7])],Ge=!0)},p(K,[ee]){ee&1&&(s.checked=K[0].debug_each_step),ee&1&&(a.checked=K[0].dual_carriageway_experiment),ee&1&&(b.checked=K[0].sidepath_zipping_experiment),ee&1&&(g.checked=K[0].osm2lanes),ee&1&&(T.checked=T.__value===K[0].inferred_sidewalks),ee&1&&(H.checked=H.__value===K[0].inferred_sidewalks)},i:$,o:$,d(K){K&&I(e),Me.r(),Ge=!1,Ue(Be)}}}function gn(r,e,n){let{settings:t={debug_each_step:!1,dual_carriageway_experiment:!1,sidepath_zipping_experiment:!1,inferred_sidewalks:!1,osm2lanes:!1}}=e;const o=[[]];function s(){t.debug_each_step=this.checked,n(0,t)}function i(){t.dual_carriageway_experiment=this.checked,n(0,t)}function u(){t.sidepath_zipping_experiment=this.checked,n(0,t)}function l(){t.osm2lanes=this.checked,n(0,t)}function a(){t.inferred_sidewalks=this.__value,n(0,t)}function f(){t.inferred_sidewalks=this.__value,n(0,t)}return r.$$set=d=>{"settings"in d&&n(0,t=d.settings)},[t,s,i,u,l,a,o,f]}class bn extends B{constructor(e){super(),W(this,e,gn,dn,z,{settings:0})}}function wn(r){let e,n,t,o,s,i,u,l;return{c(){e=k("div"),n=k("button"),n.textContent="Update OSM data",t=E(),o=k("button"),o.textContent="Download osm.xml",s=E(),i=k("button"),i.textContent="Reset view",L(n,"type","button"),L(o,"type","button"),L(i,"type","button")},m(a,f){A(a,e,f),w(e,n),w(e,t),w(e,o),w(e,s),w(e,i),u||(l=[q(n,"click",r[5]),q(o,"click",r[4]),q(i,"click",r[6])],u=!0)},p:$,d(a){a&&I(e),u=!1,Ue(l)}}}function hn(r){let e,n,t=r[0].msg+"",o;return{c(){e=k("p"),n=Y("Error: "),o=Y(t)},m(s,i){A(s,e,i),w(e,n),w(e,o)},p(s,i){i&1&&t!==(t=s[0].msg+"")&&lt(o,t)},d(s){s&&I(e)}}}function pn(r){let e;return{c(){e=k("p"),e.textContent="Use the polygon tool to select an area to import"},m(n,t){A(n,e,t)},p:$,d(n){n&&I(e)}}}function yn(r){let e,n,t,o,s,i,u,l,a,f,d={map:r[3]};e=new yt({props:d}),r[10](e),e.$on("load",r[7]),e.$on("resetToNone",r[8]),e.$on("error",r[9]),s=new mt({}),s.$on("load",r[7]),s.$on("resetToNone",r[8]),s.$on("error",r[9]);function c(g,F){if(g[0].kind==="nothing")return pn;if(g[0].kind==="error")return hn;if(g[0].kind==="done")return wn}let b=c(r),p=b&&b(r);function S(g){r[11](g)}let G={};return r[1]!==void 0&&(G.settings=r[1]),l=new bn({props:G}),U.push(()=>J(l,"settings",S)),{c(){X(e.$$.fragment),n=E(),t=k("fieldset"),o=k("legend"),X(s.$$.fragment),i=E(),p&&p.c(),u=E(),X(l.$$.fragment)},m(g,F){Z(e,g,F),A(g,n,F),A(g,t,F),w(t,o),Z(s,o,null),w(t,i),p&&p.m(t,null),A(g,u,F),Z(l,g,F),f=!0},p(g,[F]){const m={};F&8&&(m.map=g[3]),e.$set(m),b===(b=c(g))&&p?p.p(g,F):(p&&p.d(1),p=b&&b(g),p&&(p.c(),p.m(t,null)));const j={};!a&&F&2&&(a=!0,j.settings=g[1],V(()=>a=!1)),l.$set(j)},i(g){f||(C(e.$$.fragment,g),C(s.$$.fragment,g),C(l.$$.fragment,g),f=!0)},o(g){M(e.$$.fragment,g),M(s.$$.fragment,g),M(l.$$.fragment,g),f=!1},d(g){g&&(I(n),I(t),I(u)),r[10](null),Q(e,g),Q(s),p&&p.d(),Q(l,g)}}}function mn(r,e,n){let t;N(r,ue,S=>n(3,t=S));let{imported:o}=e,s,i;function u(){o.kind==="done"&&ft("osm.xml",o.osmInput)}async function l(){o.kind==="done"&&i.importPolygon(o.boundaryGJ)}function a(){o.kind==="done"&&t.fitBounds(_t(o.boundaryGJ),{animate:!1,padding:10})}function f(S){try{let G=new we(S.detail.osmXML,JSON.stringify(S.detail.boundaryGj),s);n(0,o={kind:"done",boundaryGJ:S.detail.boundaryGj,osmInput:S.detail.osmXML,network:G})}catch(G){n(0,o={kind:"error",msg:G.toString()})}}function d(S){n(0,o={kind:"nothing"})}function c(S){n(0,o={kind:"error",msg:S.detail})}function b(S){U[S?"unshift":"push"](()=>{i=S,n(2,i)})}function p(S){s=S,n(1,s)}return r.$$set=S=>{"imported"in S&&n(0,o=S.imported)},[o,s,i,t,u,l,a,f,d,c,b,p]}class Mn extends B{constructor(e){super(),W(this,e,mn,yn,z,{imported:0})}}export{Cn as A,Mn as I,Fn as L,Ln as M,Ae as a,jn as b,Ie as c,vn as d,Sn as e,ft as f,ie as g,re as h,Gt as i,ct as j,ue as m,Fe as n};
