import{S as K,i as Q,s as U,e as ke,a as h,t as G,g as ge,b as O,c as we,d as g,f as R,h as ie,j as x,k as ee,l as w,m as E,n as S,o as j,p as I,q as ye,r as d,u as ae,v as q,w as A,x as W,y as $e,z as J,A as te,B as be,C as ve,D as Ce,E as Z,F as B,G as Le,H as Se,L as Ie,I as Ee}from"./OverpassSelector-a1b80286.js";import{n as T,m as Ge,c as Me,a as Oe,b as ue,A as je,I as qe,M as Je,i as Pe,L as De,d as Ne,e as ze}from"./ImportControls-fddb5cd0.js";function ce(o,t,n){const e=o.slice();return e[8]=t[n],e[10]=n,e}function pe(o){let t,n,e,l,s,r=o[1]+1+"",i,f,m=o[0].length+"",b,_,p,u,a,v,$,M,V,N,F,ne,k,X,P,Y,le,H=R(o[0]),C=[];for(let c=0;c<H.length;c+=1)C[c]=fe(ce(o,H,c));function oe(c){o[7](c)}var z=o[2].content;function se(c){let y={gj:c[2].gj,downloadable:!0};return c[2].show!==void 0&&(y.show=c[2].show),{props:y}}return z&&(k=ie(z,se(o)),x.push(()=>ee(k,"show",oe))),{c(){t=w("div"),n=w("button"),e=E("Previous"),s=S(),i=E(r),f=E(" / "),b=E(m),_=S(),p=w("button"),u=E("Next"),v=S(),$=w("div"),M=w("select");for(let c=0;c<C.length;c+=1)C[c].c();V=S(),N=w("div"),F=w("input"),ne=S(),k&&j(k.$$.fragment),I(n,"type","button"),n.disabled=l=o[1]==0,I(p,"type","button"),p.disabled=a=o[1]==o[0].length-1,o[1]===void 0&&ye(()=>o[5].call(M)),I(F,"type","checkbox")},m(c,y){h(c,t,y),d(t,n),d(n,e),d(t,s),d(t,i),d(t,f),d(t,b),d(t,_),d(t,p),d(p,u),h(c,v,y),h(c,$,y),d($,M);for(let D=0;D<C.length;D+=1)C[D]&&C[D].m(M,null);ae(M,o[1],!0),h(c,V,y),h(c,N,y),d(N,F),F.checked=o[2].show,d(N,ne),k&&q(k,N,null),P=!0,Y||(le=[A(n,"click",o[3]),A(p,"click",o[4]),A(M,"change",o[5]),A(F,"change",o[6])],Y=!0)},p(c,y){if((!P||y&2&&l!==(l=c[1]==0))&&(n.disabled=l),(!P||y&2)&&r!==(r=c[1]+1+"")&&W(i,r),(!P||y&1)&&m!==(m=c[0].length+"")&&W(b,m),(!P||y&3&&a!==(a=c[1]==c[0].length-1))&&(p.disabled=a),y&1){H=R(c[0]);let L;for(L=0;L<H.length;L+=1){const re=ce(c,H,L);C[L]?C[L].p(re,y):(C[L]=fe(re),C[L].c(),C[L].m(M,null))}for(;L<C.length;L+=1)C[L].d(1);C.length=H.length}y&2&&ae(M,c[1]),y&4&&(F.checked=c[2].show);const D={};if(y&4&&(D.gj=c[2].gj),!X&&y&4&&(X=!0,D.show=c[2].show,$e(()=>X=!1)),y&4&&z!==(z=c[2].content)){if(k){ge();const L=k;O(L.$$.fragment,1,0,()=>{J(L,1)}),we()}z?(k=ie(z,se(c)),x.push(()=>ee(k,"show",oe)),j(k.$$.fragment),G(k.$$.fragment,1),q(k,N,null)):k=null}else z&&k.$set(D)},i(c){P||(k&&G(k.$$.fragment,c),P=!0)},o(c){k&&O(k.$$.fragment,c),P=!1},d(c){c&&(g(t),g(v),g($),g(V),g(N)),te(C,c),k&&J(k),Y=!1,be(le)}}}function fe(o){let t,n=o[8].label+"",e;return{c(){t=w("option"),e=E(n),t.__value=o[10],ve(t,t.__value)},m(l,s){h(l,t,s),d(t,e)},p(l,s){s&1&&n!==(n=l[8].label+"")&&W(e,n)},d(l){l&&g(t)}}}function Ae(o){let t,n,e=o[0].length>0&&pe(o);return{c(){e&&e.c(),t=ke()},m(l,s){e&&e.m(l,s),h(l,t,s),n=!0},p(l,[s]){l[0].length>0?e?(e.p(l,s),s&1&&G(e,1)):(e=pe(l),e.c(),G(e,1),e.m(t.parentNode,t)):e&&(ge(),O(e,1,1,()=>{e=null}),we())},i(l){n||(G(e),n=!0)},o(l){O(e),n=!1},d(l){l&&g(t),e&&e.d(l)}}}function Be(o,t,n){let e,{layers:l}=t,s=0;const r=()=>n(1,s--,s),i=()=>n(1,s++,s);function f(){s=Ce(this),n(1,s)}function m(){e.show=this.checked,n(2,e),n(0,l),n(1,s)}function b(_){o.$$.not_equal(e.show,_)&&(e.show=_,n(2,e),n(0,l),n(1,s))}return o.$$set=_=>{"layers"in _&&n(0,l=_.layers)},o.$$.update=()=>{o.$$.dirty&3&&n(2,e=l[s])},[l,s,e,r,i,f,m,b]}class Te extends K{constructor(t){super(),Q(this,t,Be,Ae,U,{layers:0})}}function _e(o,t,n){const e=o.slice();return e[4]=t[n],e}function de(o){let t,n=o[4]+"",e,l,s;return{c(){t=w("a"),e=E(n),s=E(","),I(t,"href",l="https://www.openstreetmap.org/node/"+o[4]),I(t,"target","_blank")},m(r,i){h(r,t,i),d(t,e),h(r,s,i)},p(r,i){i&1&&n!==(n=r[4]+"")&&W(e,n),i&1&&l!==(l="https://www.openstreetmap.org/node/"+r[4])&&I(t,"href",l)},d(r){r&&(g(t),g(s))}}}function Fe(o){let t,n,e,l,s,r,i,f,m,b=R(o[0].properties.osm_node_ids),_=[];for(let p=0;p<b.length;p+=1)_[p]=de(_e(o,b,p));return{c(){t=w("pre"),t.textContent=`${JSON.stringify(o[1],null,"  ")}`,n=S(),e=w("div"),l=E(`OSM nodes:
  `);for(let p=0;p<_.length;p+=1)_[p].c();s=S(),r=w("div"),i=w("button"),i.textContent="Collapse intersection",I(i,"type","button")},m(p,u){h(p,t,u),h(p,n,u),h(p,e,u),d(e,l);for(let a=0;a<_.length;a+=1)_[a]&&_[a].m(e,null);h(p,s,u),h(p,r,u),d(r,i),f||(m=A(i,"click",o[2]),f=!0)},p(p,[u]){if(u&1){b=R(p[0].properties.osm_node_ids);let a;for(a=0;a<b.length;a+=1){const v=_e(p,b,a);_[a]?_[a].p(v,u):(_[a]=de(v),_[a].c(),_[a].m(e,null))}for(;a<_.length;a+=1)_[a].d(1);_.length=b.length}},i:Z,o:Z,d(p){p&&(g(t),g(n),g(e),g(s),g(r)),te(_,p),f=!1,m()}}}function He(o,t,n){let e;B(o,T,i=>n(3,e=i));let{intersection:l}=t,s=structuredClone(l.properties);delete s.osm_node_ids;function r(){e.collapseIntersection(l.properties.id),T.set(e)}return o.$$set=i=>{"intersection"in i&&n(0,l=i.intersection)},[l,s,r]}class Re extends K{constructor(t){super(),Q(this,t,He,Fe,U,{intersection:0})}}function me(o,t,n){const e=o.slice();return e[5]=t[n],e}function he(o){let t,n=o[5]+"",e,l,s;return{c(){t=w("a"),e=E(n),s=E(","),I(t,"href",l="https://www.openstreetmap.org/way/"+o[5]),I(t,"target","_blank")},m(r,i){h(r,t,i),d(t,e),h(r,s,i)},p(r,i){i&1&&n!==(n=r[5]+"")&&W(e,n),i&1&&l!==(l="https://www.openstreetmap.org/way/"+r[5])&&I(t,"href",l)},d(r){r&&(g(t),g(s))}}}function We(o){let t,n,e,l,s,r,i,f,m,b,_,p=R(o[0].properties.osm_way_ids),u=[];for(let a=0;a<p.length;a+=1)u[a]=he(me(o,p,a));return{c(){t=w("pre"),t.textContent=`${JSON.stringify(o[1],null,"  ")}`,n=S(),e=w("div"),l=E(`OSM ways:
  `);for(let a=0;a<u.length;a+=1)u[a].c();s=S(),r=w("div"),i=w("button"),i.textContent="Collapse short road",f=S(),m=w("button"),m.textContent="Zip side-path",I(i,"type","button"),I(m,"type","button")},m(a,v){h(a,t,v),h(a,n,v),h(a,e,v),d(e,l);for(let $=0;$<u.length;$+=1)u[$]&&u[$].m(e,null);h(a,s,v),h(a,r,v),d(r,i),d(r,f),d(r,m),b||(_=[A(i,"click",o[2]),A(m,"click",o[3])],b=!0)},p(a,[v]){if(v&1){p=R(a[0].properties.osm_way_ids);let $;for($=0;$<p.length;$+=1){const M=me(a,p,$);u[$]?u[$].p(M,v):(u[$]=he(M),u[$].c(),u[$].m(e,null))}for(;$<u.length;$+=1)u[$].d(1);u.length=p.length}},i:Z,o:Z,d(a){a&&(g(t),g(n),g(e),g(s),g(r)),te(u,a),b=!1,be(_)}}}function Ze(o,t,n){let e;B(o,T,f=>n(4,e=f));let{lane:l}=t,s=structuredClone(l.properties);delete s.osm_way_ids;function r(){e.collapseShortRoad(l.properties.rod),T.set(e)}function i(){e.zipSidepath(l.properties.rod),T.set(e)}return o.$$set=f=>{"lane"in f&&n(0,l=f.lane)},[l,s,r,i]}class Ke extends K{constructor(t){super(),Q(this,t,Ze,We,U,{lane:0})}}function Qe(o,t,n){let e,l,s;B(o,Ge,i=>n(0,e=i)),B(o,Me,i=>n(1,l=i)),B(o,Oe,i=>n(2,s=i));let r=new Le.Popup({closeButton:!1,closeOnClick:!1,maxWidth:"none"});return Se(()=>{r.remove()}),o.$$.update=()=>{if(o.$$.dirty&7)if(s){let i=document.createElement("div");new Ke({target:i,props:{lane:s}});let f=s.geometry.coordinates[0][0];r.setLngLat(f).setDOMContent(i).addTo(e)}else if(l){let i=document.createElement("div");new Re({target:i,props:{intersection:l}});let f=l.geometry.coordinates[0][0];r.setLngLat(f).setDOMContent(i).addTo(e)}else r.remove()},[e,l,s]}class Ue extends K{constructor(t){super(),Q(this,t,Qe,null,U,{})}}function Ve(o){let t,n,e,l,s,r,i,f,m,b;l=new je({});function _(u){o[5](u)}let p={};return o[0]!==void 0&&(p.imported=o[0]),f=new qe({props:p}),x.push(()=>ee(f,"imported",_)),{c(){t=w("div"),n=w("h1"),n.textContent="osm2streets Street Explorer",e=S(),j(l.$$.fragment),s=S(),r=w("hr"),i=S(),j(f.$$.fragment),I(t,"slot","left")},m(u,a){h(u,t,a),d(t,n),d(t,e),q(l,t,null),d(t,s),d(t,r),d(t,i),q(f,t,null),b=!0},p(u,a){const v={};!m&&a&1&&(m=!0,v.imported=u[0],$e(()=>m=!1)),f.$set(v)},i(u){b||(G(l.$$.fragment,u),G(f.$$.fragment,u),b=!0)},o(u){O(l.$$.fragment,u),O(f.$$.fragment,u),b=!1},d(u){u&&g(t),J(l),J(f)}}}function Xe(o){let t,n;return t=new Te({props:{layers:o[2]}}),{c(){j(t.$$.fragment)},m(e,l){q(t,e,l),n=!0},p:Z,i(e){n||(G(t.$$.fragment,e),n=!0)},o(e){O(t.$$.fragment,e),n=!1},d(e){J(t,e)}}}function Ye(o){let t,n,e,l;return t=new De({props:{layers:o[1],$$slots:{default:[Xe]},$$scope:{ctx:o}}}),e=new Ue({}),{c(){j(t.$$.fragment),n=S(),j(e.$$.fragment)},m(s,r){q(t,s,r),h(s,n,r),q(e,s,r),l=!0},p(s,r){const i={};r&2&&(i.layers=s[1]),r&64&&(i.$$scope={dirty:r,ctx:s}),t.$set(i)},i(s){l||(G(t.$$.fragment,s),G(e.$$.fragment,s),l=!0)},o(s){O(t.$$.fragment,s),O(e.$$.fragment,s),l=!1},d(s){s&&g(n),J(t,s),J(e,s)}}}function xe(o){let t,n,e;return n=new Je({props:{$$slots:{default:[Ye]},$$scope:{ctx:o}}}),{c(){t=w("div"),j(n.$$.fragment),I(t,"slot","main")},m(l,s){h(l,t,s),q(n,t,null),e=!0},p(l,s){const r={};s&66&&(r.$$scope={dirty:s,ctx:l}),n.$set(r)},i(l){e||(G(n.$$.fragment,l),e=!0)},o(l){O(n.$$.fragment,l),e=!1},d(l){l&&g(t),J(n)}}}function et(o){let t,n;return t=new Ie({props:{$$slots:{main:[xe],left:[Ve]},$$scope:{ctx:o}}}),{c(){j(t.$$.fragment)},m(e,l){q(t,e,l),n=!0},p(e,[l]){const s={};l&67&&(s.$$scope={dirty:l,ctx:e}),t.$set(s)},i(e){n||(G(t.$$.fragment,e),n=!0)},o(e){O(t.$$.fragment,e),n=!1},d(e){J(t,e)}}}function tt(o,t,n){let e,l;B(o,T,m=>n(3,e=m)),B(o,ue,m=>n(4,l=m));let s={kind:"nothing"},r=[],i=[];Ee(async()=>{await Pe()});function f(m){s=m,n(0,s)}return o.$$.update=()=>{o.$$.dirty&1&&s.kind=="done"&&(T.set(s.network),ue.set(s.boundaryGJ)),o.$$.dirty&24&&e&&l&&n(1,r=Ne(e,l).concat(ze()))},[s,r,i,e,l,f]}class nt extends K{constructor(t){super(),Q(this,t,tt,et,U,{})}}new nt({target:document.getElementById("app")});
