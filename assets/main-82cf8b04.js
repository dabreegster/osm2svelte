import{S as U,i as V,s as X,e as ke,a as h,t as I,g as $e,b as M,c as we,d as $,f as H,h as ae,j as Y,k as x,l as y,m as J,n as L,o as j,p as P,q as ye,r as g,u as ue,v as q,w as T,x as K,y as ne,z as N,A as se,B as be,C as ve,D as Ce,E as Q,F as R,G as W,H as Le,I as Se,J as Oe,K as Ie,L as Ee,M as Ge,N as Me,O as pe,P as Pe,Q as Je,R as je,T as qe,U as Ne,V as Be,W as De,X as ze,Y as Ae,Z as Te}from"./SelectImportArea-74e9ea6f.js";import{O as Re}from"./Osm2streetsSettings-133426d8.js";function fe(s,t,n){const e=s.slice();return e[8]=t[n],e[10]=n,e}function ce(s){let t,n,e,l,o,i=s[1]+1+"",r,f,m=s[0].length+"",k,c,a,_,u,C,w,E,d,G,B,Z,b,ee,D,te,le,F=H(s[0]),S=[];for(let p=0;p<F.length;p+=1)S[p]=_e(fe(s,F,p));function oe(p){s[7](p)}var A=s[2].content;function re(p){let v={gj:p[2].gj,downloadable:!0};return p[2].show!==void 0&&(v.show=p[2].show),{props:v}}return A&&(b=ae(A,re(s)),Y.push(()=>x(b,"show",oe))),{c(){t=y("div"),n=y("button"),e=J("Previous"),o=L(),r=J(i),f=J(" / "),k=J(m),c=L(),a=y("button"),_=J("Next"),C=L(),w=y("div"),E=y("select");for(let p=0;p<S.length;p+=1)S[p].c();d=L(),G=y("div"),B=y("input"),Z=L(),b&&j(b.$$.fragment),P(n,"type","button"),n.disabled=l=s[1]==0,P(a,"type","button"),a.disabled=u=s[1]==s[0].length-1,s[1]===void 0&&ye(()=>s[5].call(E)),P(B,"type","checkbox")},m(p,v){h(p,t,v),g(t,n),g(n,e),g(t,o),g(t,r),g(t,f),g(t,k),g(t,c),g(t,a),g(a,_),h(p,C,v),h(p,w,v),g(w,E);for(let z=0;z<S.length;z+=1)S[z]&&S[z].m(E,null);ue(E,s[1],!0),h(p,d,v),h(p,G,v),g(G,B),B.checked=s[2].show,g(G,Z),b&&q(b,G,null),D=!0,te||(le=[T(n,"click",s[3]),T(a,"click",s[4]),T(E,"change",s[5]),T(B,"change",s[6])],te=!0)},p(p,v){if((!D||v&2&&l!==(l=p[1]==0))&&(n.disabled=l),(!D||v&2)&&i!==(i=p[1]+1+"")&&K(r,i),(!D||v&1)&&m!==(m=p[0].length+"")&&K(k,m),(!D||v&3&&u!==(u=p[1]==p[0].length-1))&&(a.disabled=u),v&1){F=H(p[0]);let O;for(O=0;O<F.length;O+=1){const ie=fe(p,F,O);S[O]?S[O].p(ie,v):(S[O]=_e(ie),S[O].c(),S[O].m(E,null))}for(;O<S.length;O+=1)S[O].d(1);S.length=F.length}v&2&&ue(E,p[1]),v&4&&(B.checked=p[2].show);const z={};if(v&4&&(z.gj=p[2].gj),!ee&&v&4&&(ee=!0,z.show=p[2].show,ne(()=>ee=!1)),v&4&&A!==(A=p[2].content)){if(b){$e();const O=b;M(O.$$.fragment,1,0,()=>{N(O,1)}),we()}A?(b=ae(A,re(p)),Y.push(()=>x(b,"show",oe)),j(b.$$.fragment),I(b.$$.fragment,1),q(b,G,null)):b=null}else A&&b.$set(z)},i(p){D||(b&&I(b.$$.fragment,p),D=!0)},o(p){b&&M(b.$$.fragment,p),D=!1},d(p){p&&($(t),$(C),$(w),$(d),$(G)),se(S,p),b&&N(b),te=!1,be(le)}}}function _e(s){let t,n=s[8].label+"",e;return{c(){t=y("option"),e=J(n),t.__value=s[10],ve(t,t.__value)},m(l,o){h(l,t,o),g(t,e)},p(l,o){o&1&&n!==(n=l[8].label+"")&&K(e,n)},d(l){l&&$(t)}}}function We(s){let t,n,e=s[0].length>0&&ce(s);return{c(){e&&e.c(),t=ke()},m(l,o){e&&e.m(l,o),h(l,t,o),n=!0},p(l,[o]){l[0].length>0?e?(e.p(l,o),o&1&&I(e,1)):(e=ce(l),e.c(),I(e,1),e.m(t.parentNode,t)):e&&($e(),M(e,1,1,()=>{e=null}),we())},i(l){n||(I(e),n=!0)},o(l){M(e),n=!1},d(l){l&&$(t),e&&e.d(l)}}}function Ze(s,t,n){let e,{layers:l}=t,o=0;const i=()=>n(1,o--,o),r=()=>n(1,o++,o);function f(){o=Ce(this),n(1,o)}function m(){e.show=this.checked,n(2,e),n(0,l),n(1,o)}function k(c){s.$$.not_equal(e.show,c)&&(e.show=c,n(2,e),n(0,l),n(1,o))}return s.$$set=c=>{"layers"in c&&n(0,l=c.layers)},s.$$.update=()=>{s.$$.dirty&3&&n(2,e=l[o])},[l,o,e,i,r,f,m,k]}class Fe extends U{constructor(t){super(),V(this,t,Ze,We,X,{layers:0})}}function me(s,t,n){const e=s.slice();return e[4]=t[n],e}function de(s){let t,n=s[4]+"",e,l,o;return{c(){t=y("a"),e=J(n),o=J(","),P(t,"href",l="https://www.openstreetmap.org/node/"+s[4]),P(t,"target","_blank")},m(i,r){h(i,t,r),g(t,e),h(i,o,r)},p(i,r){r&1&&n!==(n=i[4]+"")&&K(e,n),r&1&&l!==(l="https://www.openstreetmap.org/node/"+i[4])&&P(t,"href",l)},d(i){i&&($(t),$(o))}}}function He(s){let t,n,e,l,o,i,r,f,m,k=H(s[0].properties.osm_node_ids),c=[];for(let a=0;a<k.length;a+=1)c[a]=de(me(s,k,a));return{c(){t=y("pre"),t.textContent=`${JSON.stringify(s[1],null,"  ")}`,n=L(),e=y("div"),l=J(`OSM nodes:
  `);for(let a=0;a<c.length;a+=1)c[a].c();o=L(),i=y("div"),r=y("button"),r.textContent="Collapse intersection",P(r,"type","button")},m(a,_){h(a,t,_),h(a,n,_),h(a,e,_),g(e,l);for(let u=0;u<c.length;u+=1)c[u]&&c[u].m(e,null);h(a,o,_),h(a,i,_),g(i,r),f||(m=T(r,"click",s[2]),f=!0)},p(a,[_]){if(_&1){k=H(a[0].properties.osm_node_ids);let u;for(u=0;u<k.length;u+=1){const C=me(a,k,u);c[u]?c[u].p(C,_):(c[u]=de(C),c[u].c(),c[u].m(e,null))}for(;u<c.length;u+=1)c[u].d(1);c.length=k.length}},i:Q,o:Q,d(a){a&&($(t),$(n),$(e),$(o),$(i)),se(c,a),f=!1,m()}}}function Ke(s,t,n){let e;R(s,W,r=>n(3,e=r));let{intersection:l}=t,o=structuredClone(l.properties);delete o.osm_node_ids;function i(){e.collapseIntersection(l.properties.id),W.set(e)}return s.$$set=r=>{"intersection"in r&&n(0,l=r.intersection)},[l,o,i]}class Qe extends U{constructor(t){super(),V(this,t,Ke,He,X,{intersection:0})}}function ge(s,t,n){const e=s.slice();return e[5]=t[n],e}function he(s){let t,n=s[5]+"",e,l,o;return{c(){t=y("a"),e=J(n),o=J(","),P(t,"href",l="https://www.openstreetmap.org/way/"+s[5]),P(t,"target","_blank")},m(i,r){h(i,t,r),g(t,e),h(i,o,r)},p(i,r){r&1&&n!==(n=i[5]+"")&&K(e,n),r&1&&l!==(l="https://www.openstreetmap.org/way/"+i[5])&&P(t,"href",l)},d(i){i&&($(t),$(o))}}}function Ue(s){let t,n,e,l,o,i,r,f,m,k,c,a=H(s[0].properties.osm_way_ids),_=[];for(let u=0;u<a.length;u+=1)_[u]=he(ge(s,a,u));return{c(){t=y("pre"),t.textContent=`${JSON.stringify(s[1],null,"  ")}`,n=L(),e=y("div"),l=J(`OSM ways:
  `);for(let u=0;u<_.length;u+=1)_[u].c();o=L(),i=y("div"),r=y("button"),r.textContent="Collapse short road",f=L(),m=y("button"),m.textContent="Zip side-path",P(r,"type","button"),P(m,"type","button")},m(u,C){h(u,t,C),h(u,n,C),h(u,e,C),g(e,l);for(let w=0;w<_.length;w+=1)_[w]&&_[w].m(e,null);h(u,o,C),h(u,i,C),g(i,r),g(i,f),g(i,m),k||(c=[T(r,"click",s[2]),T(m,"click",s[3])],k=!0)},p(u,[C]){if(C&1){a=H(u[0].properties.osm_way_ids);let w;for(w=0;w<a.length;w+=1){const E=ge(u,a,w);_[w]?_[w].p(E,C):(_[w]=he(E),_[w].c(),_[w].m(e,null))}for(;w<_.length;w+=1)_[w].d(1);_.length=a.length}},i:Q,o:Q,d(u){u&&($(t),$(n),$(e),$(o),$(i)),se(_,u),k=!1,be(c)}}}function Ve(s,t,n){let e;R(s,W,f=>n(4,e=f));let{lane:l}=t,o=structuredClone(l.properties);delete o.osm_way_ids;function i(){e.collapseShortRoad(l.properties.rod),W.set(e)}function r(){e.zipSidepath(l.properties.rod),W.set(e)}return s.$$set=f=>{"lane"in f&&n(0,l=f.lane)},[l,o,i,r]}class Xe extends U{constructor(t){super(),V(this,t,Ve,Ue,X,{lane:0})}}function Ye(s,t,n){let e,l,o;R(s,Le,r=>n(0,e=r)),R(s,Se,r=>n(1,l=r)),R(s,Oe,r=>n(2,o=r));let i=new Ie.Popup({closeButton:!1,closeOnClick:!1,maxWidth:"none"});return Ee(()=>{i.remove()}),s.$$.update=()=>{if(s.$$.dirty&7)if(o){let r=document.createElement("div");new Xe({target:r,props:{lane:o}});let f=o.geometry.coordinates[0][0];i.setLngLat(f).setDOMContent(r).addTo(e)}else if(l){let r=document.createElement("div");new Qe({target:r,props:{intersection:l}});let f=l.geometry.coordinates[0][0];i.setLngLat(f).setDOMContent(r).addTo(e)}else i.remove()},[e,l,o]}class xe extends U{constructor(t){super(),V(this,t,Ye,null,X,{})}}function et(s){let t,n,e,l,o,i,r,f,m,k,c,a,_;l=new Pe({});function u(d){s[7](d)}let C={};s[1]!==void 0&&(C.settings=s[1]),i=new Re({props:C}),Y.push(()=>x(i,"settings",u));function w(d){s[8](d)}let E={settings:s[1]};return s[0]!==void 0&&(E.imported=s[0]),m=new Je({props:E}),Y.push(()=>x(m,"imported",w)),a=new je({props:{imported:s[0]}}),{c(){t=y("div"),n=y("h1"),n.textContent="osm2streets Street Explorer",e=L(),j(l.$$.fragment),o=L(),j(i.$$.fragment),f=L(),j(m.$$.fragment),c=L(),j(a.$$.fragment),P(t,"slot","left")},m(d,G){h(d,t,G),g(t,n),g(t,e),q(l,t,null),g(t,o),q(i,t,null),g(t,f),q(m,t,null),g(t,c),q(a,t,null),_=!0},p(d,G){const B={};!r&&G&2&&(r=!0,B.settings=d[1],ne(()=>r=!1)),i.$set(B);const Z={};G&2&&(Z.settings=d[1]),!k&&G&1&&(k=!0,Z.imported=d[0],ne(()=>k=!1)),m.$set(Z);const b={};G&1&&(b.imported=d[0]),a.$set(b)},i(d){_||(I(l.$$.fragment,d),I(i.$$.fragment,d),I(m.$$.fragment,d),I(a.$$.fragment,d),_=!0)},o(d){M(l.$$.fragment,d),M(i.$$.fragment,d),M(m.$$.fragment,d),M(a.$$.fragment,d),_=!1},d(d){d&&$(t),N(l),N(i),N(m),N(a)}}}function tt(s){let t,n;return t=new Fe({props:{layers:s[3]}}),{c(){j(t.$$.fragment)},m(e,l){q(t,e,l),n=!0},p:Q,i(e){n||(I(t.$$.fragment,e),n=!0)},o(e){M(t.$$.fragment,e),n=!1},d(e){N(t,e)}}}function nt(s){let t,n,e,l,o,i;return t=new De({}),t.$on("polygon",s[6]),e=new ze({props:{layers:s[2],$$slots:{default:[tt]},$$scope:{ctx:s}}}),o=new xe({}),{c(){j(t.$$.fragment),n=L(),j(e.$$.fragment),l=L(),j(o.$$.fragment)},m(r,f){q(t,r,f),h(r,n,f),q(e,r,f),h(r,l,f),q(o,r,f),i=!0},p(r,f){const m={};f&4&&(m.layers=r[2]),f&512&&(m.$$scope={dirty:f,ctx:r}),e.$set(m)},i(r){i||(I(t.$$.fragment,r),I(e.$$.fragment,r),I(o.$$.fragment,r),i=!0)},o(r){M(t.$$.fragment,r),M(e.$$.fragment,r),M(o.$$.fragment,r),i=!1},d(r){r&&($(n),$(l)),N(t,r),N(e,r),N(o,r)}}}function st(s){let t,n,e;return n=new qe({props:{$$slots:{default:[nt]},$$scope:{ctx:s}}}),{c(){t=y("div"),j(n.$$.fragment),P(t,"slot","main")},m(l,o){h(l,t,o),q(n,t,null),e=!0},p(l,o){const i={};o&519&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){e||(I(n.$$.fragment,l),e=!0)},o(l){M(n.$$.fragment,l),e=!1},d(l){l&&$(t),N(n)}}}function lt(s){let t,n;return t=new Ge({props:{$$slots:{main:[st],left:[et]},$$scope:{ctx:s}}}),{c(){j(t.$$.fragment)},m(e,l){q(t,e,l),n=!0},p(e,[l]){const o={};l&519&&(o.$$scope={dirty:l,ctx:e}),t.$set(o)},i(e){n||(I(t.$$.fragment,e),n=!0)},o(e){M(t.$$.fragment,e),n=!1},d(e){N(t,e)}}}function ot(s,t,n){let e,l;R(s,W,a=>n(4,e=a)),R(s,pe,a=>n(5,l=a));let o={kind:"nothing"},i,r=[],f=[];Me(async()=>{await Ne()});const m=a=>Be(a,o,i);function k(a){i=a,n(1,i)}function c(a){o=a,n(0,o)}return s.$$.update=()=>{s.$$.dirty&1&&o.kind=="done"&&(W.set(o.network),pe.set(o.boundaryGJ)),s.$$.dirty&48&&e&&l&&n(2,r=Ae(e,l).concat(Te()))},[o,i,r,f,e,l,m,k,c]}class rt extends U{constructor(t){super(),V(this,t,ot,lt,X,{})}}new rt({target:document.getElementById("app")});
