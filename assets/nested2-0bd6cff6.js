import{S as T,i as q,s as A,e as U,a as b,C as B,d as y,D as P,V as D,E as Y,W as Z,X as N,k as h,l as R,q as $,w as x,m as L,o as j,v as V,A as ee,L as te,n as k,u as w,t as d,b as g,y as v,F as ne,G as se,H as re,I as ie,K as oe,h as W,j as H,M as ae,N as le,x as K,g as ue,c as fe,O as pe,P as ce,Q as me,R as de,T as $e}from"./SelectImportArea-9a5cc28f.js";import{O as ge}from"./Osm2streetsSettings-3441ce03.js";function _e(i){let e;return{c(){e=h("p"),e.textContent="Click a road"},m(r,t){b(r,e,t)},p:B,d(r){r&&y(e)}}}function be(i){let e,r=i[0].features.length+"",t,n;return{c(){e=h("p"),t=R(r),n=R(" buildings onscreen")},m(s,o){b(s,e,o),$(e,t),$(e,n)},p(s,o){o&1&&r!==(r=s[0].features.length+"")&&x(t,r)},d(s){s&&y(e)}}}function ye(i){let e;function r(s,o){return s[1]?be:_e}let t=r(i),n=t(i);return{c(){n.c(),e=U()},m(s,o){n.m(s,o),b(s,e,o)},p(s,[o]){t===(t=r(s))&&n?n.p(s,o):(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},i:B,o:B,d(s){n.d(s),s&&y(e)}}}let G="building-hitboxes";function he(i,e,r){let t,n;P(i,D,a=>r(2,t=a)),P(i,Y,a=>r(1,n=a));let s=`${G}-layer`,o=N();return t.addSource(G,{type:"geojson",data:o}),t.addLayer({id:s,source:G,type:"fill",paint:{"fill-color":"blue"}}),Z(()=>{t&&(t.getLayer(s)&&t.removeLayer(s),t.removeSource(G))}),i.$$.update=()=>{if(i.$$.dirty&7){if(r(0,o=N()),n)for(let a of t.queryRenderedFeatures())a.layer.id=="building-3d"&&o.features.push(a);t.getSource(G).setData(o)}},[o,n,t]}class ke extends T{constructor(e){super(),q(this,e,he,ye,A,{})}}function we(i){let e,r,t,n,s,o,a,f,c,m,C;return{c(){e=h("label"),r=h("input"),t=R(`
  Basemap roads`),n=L(),s=h("br"),o=L(),a=h("label"),f=h("input"),c=R(`
  Basemap buildings`),j(r,"type","checkbox"),j(f,"type","checkbox")},m(u,_){b(u,e,_),$(e,r),r.checked=i[0],$(e,t),b(u,n,_),b(u,s,_),b(u,o,_),b(u,a,_),$(a,f),f.checked=i[1],$(a,c),m||(C=[V(r,"change",i[3]),V(f,"change",i[4])],m=!0)},p(u,[_]){_&1&&(r.checked=u[0]),_&2&&(f.checked=u[1])},i:B,o:B,d(u){u&&y(e),u&&y(n),u&&y(s),u&&y(o),u&&y(a),m=!1,ee(C)}}}function ve(i,e,r){let t;P(i,D,f=>r(2,t=f));let n=!0,s=!0;function o(){n=this.checked,r(0,n)}function a(){s=this.checked,r(1,s)}return i.$$.update=()=>{if(i.$$.dirty&5&&t){let f=n?"visible":"none";for(let c of t.getStyle().layers)c.id.startsWith("road_")&&t.setLayoutProperty(c.id,"visibility",f)}if(i.$$.dirty&6&&t){let f=s?"visible":"none";t.setLayoutProperty("building","visibility",f),t.setLayoutProperty("building-3d","visibility",f)}},[n,s,t,o,a]}class Le extends T{constructor(e){super(),q(this,e,ve,we,A,{})}}function Q(i){let e,r;return e=new ke({}),{c(){k(e.$$.fragment)},m(t,n){w(e,t,n),r=!0},i(t){r||(d(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Se(i){let e,r,t,n,s,o,a,f,c,m,C,u,_,I;n=new oe({});function X(l){i[5](l)}let J={};i[1]!==void 0&&(J.settings=i[1]),o=new ge({props:J}),W.push(()=>H(o,"settings",X));function z(l){i[6](l)}let O={settings:i[1]};i[0]!==void 0&&(O.imported=i[0]),c=new ae({props:O}),W.push(()=>H(c,"imported",z)),u=new le({props:{imported:i[0]}});let p=i[3]&&Q();return{c(){e=h("div"),r=h("h1"),r.textContent="osm2streets road width tool",t=L(),k(n.$$.fragment),s=L(),k(o.$$.fragment),f=L(),k(c.$$.fragment),C=L(),k(u.$$.fragment),_=L(),p&&p.c(),j(e,"slot","left")},m(l,S){b(l,e,S),$(e,r),$(e,t),w(n,e,null),$(e,s),w(o,e,null),$(e,f),w(c,e,null),$(e,C),w(u,e,null),$(e,_),p&&p.m(e,null),I=!0},p(l,S){const E={};!a&&S&2&&(a=!0,E.settings=l[1],K(()=>a=!1)),o.$set(E);const M={};S&2&&(M.settings=l[1]),!m&&S&1&&(m=!0,M.imported=l[0],K(()=>m=!1)),c.$set(M);const F={};S&1&&(F.imported=l[0]),u.$set(F),l[3]?p?S&8&&d(p,1):(p=Q(),p.c(),d(p,1),p.m(e,null)):p&&(ue(),g(p,1,1,()=>{p=null}),fe())},i(l){I||(d(n.$$.fragment,l),d(o.$$.fragment,l),d(c.$$.fragment,l),d(u.$$.fragment,l),d(p),I=!0)},o(l){g(n.$$.fragment,l),g(o.$$.fragment,l),g(c.$$.fragment,l),g(u.$$.fragment,l),g(p),I=!1},d(l){l&&y(e),v(n),v(o),v(c),v(u),p&&p.d()}}}function Ce(i){let e,r;return e=new Le({}),{c(){k(e.$$.fragment)},m(t,n){w(e,t,n),r=!0},i(t){r||(d(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Ge(i){let e,r,t,n;return e=new de({}),e.$on("polygon",i[4]),t=new $e({props:{layers:i[2],$$slots:{default:[Ce]},$$scope:{ctx:i}}}),{c(){k(e.$$.fragment),r=L(),k(t.$$.fragment)},m(s,o){w(e,s,o),b(s,r,o),w(t,s,o),n=!0},p(s,o){const a={};o&4&&(a.layers=s[2]),o&128&&(a.$$scope={dirty:o,ctx:s}),t.$set(a)},i(s){n||(d(e.$$.fragment,s),d(t.$$.fragment,s),n=!0)},o(s){g(e.$$.fragment,s),g(t.$$.fragment,s),n=!1},d(s){v(e,s),s&&y(r),v(t,s)}}}function Be(i){let e,r,t;return r=new pe({props:{$$slots:{default:[Ge]},$$scope:{ctx:i}}}),{c(){e=h("div"),k(r.$$.fragment),j(e,"slot","main")},m(n,s){b(n,e,s),w(r,e,null),t=!0},p(n,s){const o={};s&135&&(o.$$scope={dirty:s,ctx:n}),r.$set(o)},i(n){t||(d(r.$$.fragment,n),t=!0)},o(n){g(r.$$.fragment,n),t=!1},d(n){n&&y(e),v(r)}}}function Ie(i){let e,r;return e=new te({props:{$$slots:{main:[Be],left:[Se]},$$scope:{ctx:i}}}),{c(){k(e.$$.fragment)},m(t,n){w(e,t,n),r=!0},p(t,[n]){const s={};n&143&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){r||(d(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Pe(i,e,r){let t;P(i,D,m=>r(3,t=m));let n={kind:"nothing"},s,o=[];ne(async()=>{await ce()});const a=m=>me(m,n,s);function f(m){s=m,r(1,s)}function c(m){n=m,r(0,n)}return i.$$.update=()=>{i.$$.dirty&1&&n.kind=="done"&&(se.set(n.network),re.set(n.boundaryGJ),r(2,o=ie(n.network,n.boundaryGJ)))},[n,s,o,t,a,f,c]}class Re extends T{constructor(e){super(),q(this,e,Pe,Ie,A,{})}}new Re({target:document.getElementById("app")});
