import{X as Lt,R as k,Y as $,Z as St,S as q,i as N,s as j,n as A,B as G,_ as T,o as X,q as F,$ as st,a0 as ft,e as B,a1 as Bt,t as g,g as nt,f as _,h as it,k as Z,E as Zt,J as zt,c as O,K as kt,M as Ot,N as At,d as C,m as w,l as L,a2 as at,L as qt,W as Nt,r as tt,b as jt,a as Mt,I as et,j as Pt,V as Tt}from"./OverpassSelector-1d8b6871.js";const _t=Symbol.for("svelte-maplibre");function J(){return St(_t)}function Et(){return Lt(_t,{map:k(null),source:$(null),layer:$(null),popupTarget:$(null),cluster:k(),loadedImages:k(new Set),minzoom:k(0),maxzoom:k(24),layerEvent:k(null)})}function Ut(i,t,n){let o;const{map:a}=J();A(i,a,u=>n(4,o=u));let{position:e="top-left"}=t,{container:r=void 0}=t,l=null;return G(()=>{o!=null&&o.loaded()&&l&&o.removeControl(l)}),i.$$set=u=>{"position"in u&&n(1,e=u.position),"container"in u&&n(2,r=u.container)},i.$$.update=()=>{if(i.$$.dirty&30&&o&&!l){let u;typeof r=="string"?u=document.querySelector(r)??void 0:u=r,n(3,l=new T.FullscreenControl({container:u})),o.addControl(l,e)}},[a,e,r,l,o]}class Wt extends q{constructor(t){super(),N(this,t,Ut,null,j,{position:1,container:2})}}function Dt(i,t,n){let o;const{map:a}=J();A(i,a,m=>n(8,o=m));let{position:e="top-left"}=t,{positionOptions:r=void 0}=t,{fitBoundsOptions:l=void 0}=t,{trackUserLocation:u=!1}=t,{showAccuracyCircle:f=!0}=t,{showUserLocation:c=!0}=t,y=null;return G(()=>{o!=null&&o.loaded()&&y&&o.removeControl(y)}),i.$$set=m=>{"position"in m&&n(1,e=m.position),"positionOptions"in m&&n(2,r=m.positionOptions),"fitBoundsOptions"in m&&n(3,l=m.fitBoundsOptions),"trackUserLocation"in m&&n(4,u=m.trackUserLocation),"showAccuracyCircle"in m&&n(5,f=m.showAccuracyCircle),"showUserLocation"in m&&n(6,c=m.showUserLocation)},i.$$.update=()=>{i.$$.dirty&510&&o&&!y&&(n(7,y=new T.GeolocateControl({positionOptions:r,fitBoundsOptions:l,trackUserLocation:u,showAccuracyCircle:f,showUserLocation:c})),o.addControl(y,e))},[a,e,r,l,u,f,c,y,o]}class Rt extends q{constructor(t){super(),N(this,t,Dt,null,j,{position:1,positionOptions:2,fitBoundsOptions:3,trackUserLocation:4,showAccuracyCircle:5,showUserLocation:6})}}var ot=rt;function rt(i,t){return i===t||i!==i&&t!==t?!0:typeof i!=typeof t||{}.toString.call(i)!={}.toString.call(t)||i!==Object(i)||!i?!1:Array.isArray(i)?ut(i,t):{}.toString.call(i)=="[object Set]"?ut(Array.from(i),Array.from(t)):{}.toString.call(i)=="[object Object]"?Ft(i,t):Xt(i,t)}function Xt(i,t){return i.toString()===t.toString()}function ut(i,t){var n=i.length;if(n!=t.length)return!1;for(var o=0;o<n;o++)if(!rt(i[o],t[o]))return!1;return!0}function Ft(i,t){var n=Object.keys(i),o=n.length;if(o!=Object.keys(t).length)return!1;for(var a=0;a<o;a++){var e=n[a];if(!(t.hasOwnProperty(e)&&rt(i[e],t[e])))return!1}return!0}function Gt(i,t,n){let o;const{map:a}=J();A(i,a,c=>n(6,o=c));let{position:e="top-left"}=t,{showCompass:r=!0}=t,{showZoom:l=!0}=t,{visualizePitch:u=!1}=t,f=null;return G(()=>{o!=null&&o.loaded()&&f&&o.removeControl(f)}),i.$$set=c=>{"position"in c&&n(1,e=c.position),"showCompass"in c&&n(2,r=c.showCompass),"showZoom"in c&&n(3,l=c.showZoom),"visualizePitch"in c&&n(4,u=c.visualizePitch)},i.$$.update=()=>{i.$$.dirty&126&&o&&!f&&(n(5,f=new T.NavigationControl({showCompass:r,showZoom:l,visualizePitch:u})),o.addControl(f,e))},[a,e,r,l,u,f,o]}class Jt extends q{constructor(t){super(),N(this,t,Gt,null,j,{position:1,showCompass:2,showZoom:3,visualizePitch:4})}}function Kt(i,t,n){let o;const{map:a}=J();A(i,a,f=>n(5,o=f));let{position:e="bottom-left"}=t,{maxWidth:r=void 0}=t,{unit:l="metric"}=t,u=null;return G(()=>{o!=null&&o.loaded()&&u&&o.removeControl(u)}),i.$$set=f=>{"position"in f&&n(1,e=f.position),"maxWidth"in f&&n(2,r=f.maxWidth),"unit"in f&&n(3,l=f.unit)},i.$$.update=()=>{i.$$.dirty&62&&o&&!u&&(n(4,u=new T.ScaleControl({maxWidth:r,unit:l})),o.addControl(u,e))},[a,e,r,l,u,o]}class Yt extends q{constructor(t){super(),N(this,t,Kt,null,j,{position:1,maxWidth:2,unit:3})}}const Vt=i=>({map:i&8,loadedImages:i&16,allImagesLoaded:i&32}),ct=i=>({map:i[3],loadedImages:i[4],allImagesLoaded:i[5]});function mt(i){let t,n,o=i[2]&&dt(i);const a=i[27].default,e=zt(a,i,i[26],ct);return{c(){o&&o.c(),t=O(),e&&e.c()},m(r,l){o&&o.m(r,l),B(r,t,l),e&&e.m(r,l),n=!0},p(r,l){r[2]?o?(o.p(r,l),l&4&&g(o,1)):(o=dt(r),o.c(),g(o,1),o.m(t.parentNode,t)):o&&(nt(),_(o,1,1,()=>{o=null}),it()),e&&e.p&&(!n||l&67108920)&&kt(e,a,r,r[26],n?At(a,r[26],l,Vt):Ot(r[26]),ct)},i(r){n||(g(o),g(e,r),n=!0)},o(r){_(o),_(e,r),n=!1},d(r){r&&Z(t),o&&o.d(r),e&&e.d(r)}}}function dt(i){let t,n,o,a,e,r,l,u;return t=new Jt({props:{position:i[6]}}),o=new Rt({props:{position:i[6],fitBoundsOptions:{maxZoom:12}}}),e=new Wt({props:{position:i[6]}}),l=new Yt({props:{position:i[6]}}),{c(){C(t.$$.fragment),n=O(),C(o.$$.fragment),a=O(),C(e.$$.fragment),r=O(),C(l.$$.fragment)},m(f,c){w(t,f,c),B(f,n,c),w(o,f,c),B(f,a,c),w(e,f,c),B(f,r,c),w(l,f,c),u=!0},p(f,c){const y={};c&64&&(y.position=f[6]),t.$set(y);const m={};c&64&&(m.position=f[6]),o.$set(m);const b={};c&64&&(b.position=f[6]),e.$set(b);const z={};c&64&&(z.position=f[6]),l.$set(z)},i(f){u||(g(t.$$.fragment,f),g(o.$$.fragment,f),g(e.$$.fragment,f),g(l.$$.fragment,f),u=!0)},o(f){_(t.$$.fragment,f),_(o.$$.fragment,f),_(e.$$.fragment,f),_(l.$$.fragment,f),u=!1},d(f){f&&(Z(n),Z(a),Z(r)),L(t,f),L(o,f),L(e,f),L(l,f)}}}function Ht(i){let t,n,o,a,e,r=i[3]&&i[0]&&mt(i);return{c(){t=X("div"),r&&r.c(),F(t,"class",n=st(i[1])+" svelte-p00lfq"),ft(t,"expand-map",!i[1])},m(l,u){B(l,t,u),r&&r.m(t,null),o=!0,a||(e=Bt(i[9].call(null,t)),a=!0)},p(l,[u]){l[3]&&l[0]?r?(r.p(l,u),u&9&&g(r,1)):(r=mt(l),r.c(),g(r,1),r.m(t,null)):r&&(nt(),_(r,1,1,()=>{r=null}),it()),(!o||u&2&&n!==(n=st(l[1])+" svelte-p00lfq"))&&F(t,"class",n),(!o||u&2)&&ft(t,"expand-map",!l[1])},i(l){o||(g(r),o=!0)},o(l){_(r),o=!1},d(l){l&&Z(t),r&&r.d(),a=!1,e()}}}function Qt(i,t,n){let o,a,e,r,{$$slots:l={},$$scope:u}=t,{map:f=null}=t,{class:c=void 0}=t,{style:y}=t,{center:m=[0,0]}=t,{zoom:b=1}=t,{pitch:z=0}=t,{bearing:K=0}=t,{bounds:S=void 0}=t,{loaded:M=!1}=t,{minZoom:Y=0}=t,{maxZoom:V=22}=t,{interactive:H=!0}=t,{attributionControl:Q=!0}=t,{preserveDrawingBuffer:I=!1}=t,{maxBounds:x=void 0}=t,{images:E=[]}=t,{standardControls:U=!1}=t,{filterLayers:W=void 0}=t,{transformRequest:v=void 0}=t;const h=Zt(),{map:D,loadedImages:R}=Et();A(i,D,s=>n(3,e=s)),A(i,R,s=>n(4,r=s));let p=new Set;function Ct(s){e!=null&&e.loaded()&&("url"in s?(p.add(s.id),e.loadImage(s.url,(d,P)=>{p.delete(s.id),d?h("error",d):P&&(e==null||e.addImage(s.id,P,s.options),r.add(s.id),R.set(r))})):(e.addImage(s.id,s.data,s.options),r.add(s.id),R.set(r)))}function wt(s){return at(D,e=new T.Map({container:s,style:y,center:m,zoom:b,pitch:z,bearing:K,minZoom:Y,maxZoom:V,interactive:H,preserveDrawingBuffer:I,maxBounds:x,bounds:S,attributionControl:Q,transformRequest:v}),e),e.on("load",d=>{n(0,M=!0),h("load",e)}),e.on("error",d=>h("error",{...d,map:e})),e.on("movestart",d=>h("movestart",{...d,map:e})),e.on("moveend",d=>{n(10,m=d.target.getCenter()),n(11,b=d.target.getZoom()),n(12,S=d.target.getBounds()),h("moveend",{...d,map:e})}),e.on("zoomstart",d=>h("zoomstart",{...d,map:e})),e.on("zoom",d=>{n(11,b=d.target.getZoom()),h("zoom",{...d,map:e})}),e.on("zoomend",d=>{n(11,b=d.target.getZoom()),h("zoomend",{...d,map:e})}),e.on("styledata",d=>{if(e&&W){const P=e.getStyle().layers;if(P)for(let lt of P)W(lt)||e.setLayoutProperty(lt.id,"visibility","none")}h("styledata",{...d,map:e})}),{destroy(){n(0,M=!1),e==null||e.remove(),at(D,e=null,e)}}}return i.$$set=s=>{"map"in s&&n(13,f=s.map),"class"in s&&n(1,c=s.class),"style"in s&&n(14,y=s.style),"center"in s&&n(10,m=s.center),"zoom"in s&&n(11,b=s.zoom),"pitch"in s&&n(15,z=s.pitch),"bearing"in s&&n(16,K=s.bearing),"bounds"in s&&n(12,S=s.bounds),"loaded"in s&&n(0,M=s.loaded),"minZoom"in s&&n(17,Y=s.minZoom),"maxZoom"in s&&n(18,V=s.maxZoom),"interactive"in s&&n(19,H=s.interactive),"attributionControl"in s&&n(20,Q=s.attributionControl),"preserveDrawingBuffer"in s&&n(21,I=s.preserveDrawingBuffer),"maxBounds"in s&&n(22,x=s.maxBounds),"images"in s&&n(23,E=s.images),"standardControls"in s&&n(2,U=s.standardControls),"filterLayers"in s&&n(24,W=s.filterLayers),"transformRequest"in s&&n(25,v=s.transformRequest),"$$scope"in s&&n(26,u=s.$$scope)},i.$$.update=()=>{if(i.$$.dirty&4&&n(6,o=typeof U=="boolean"?void 0:U),i.$$.dirty&8&&n(13,f=e),i.$$.dirty&8388617&&M&&e!=null&&e.loaded())for(let s of E)!p.has(s.id)&&!e.hasImage(s.id)&&Ct(s);i.$$.dirty&8388624&&n(5,a=E.every(s=>r.has(s.id))),i.$$.dirty&1032&&m&&!ot(m,e==null?void 0:e.getCenter())&&(e==null||e.panTo(m)),i.$$.dirty&2056&&b&&!ot(b,e==null?void 0:e.getZoom())&&(e==null||e.zoomTo(b)),i.$$.dirty&4104&&S&&!ot(S,e==null?void 0:e.getBounds())&&(e==null||e.fitBounds(S))},[M,c,U,e,r,a,o,D,R,wt,m,b,S,f,y,z,K,Y,V,H,Q,I,x,E,W,v,u,l]}class It extends q{constructor(t){super(),N(this,t,Qt,Ht,j,{map:13,class:1,style:14,center:10,zoom:11,pitch:15,bearing:16,bounds:12,loaded:0,minZoom:17,maxZoom:18,interactive:19,attributionControl:20,preserveDrawingBuffer:21,maxBounds:22,images:23,standardControls:2,filterLayers:24,transformRequest:25})}}function gt(i){let t,n;return t=new Tt({props:{map:i[0]}}),t.$on("load",yt),t.$on("resetToNone",bt),t.$on("error",ht),{c(){C(t.$$.fragment)},m(o,a){w(t,o,a),n=!0},p(o,a){const e={};a&1&&(e.map=o[0]),t.$set(e)},i(o){n||(g(t.$$.fragment,o),n=!0)},o(o){_(t.$$.fragment,o),n=!1},d(o){L(t,o)}}}function xt(i){let t,n,o,a,e,r;a=new Nt({}),a.$on("load",yt),a.$on("resetToNone",bt),a.$on("error",ht);let l=i[0]&&gt(i);return{c(){t=X("div"),n=X("h1"),n.textContent="Maps for Cats",o=O(),C(a.$$.fragment),e=O(),l&&l.c(),F(t,"slot","left")},m(u,f){B(u,t,f),tt(t,n),tt(t,o),w(a,t,null),tt(t,e),l&&l.m(t,null),r=!0},p(u,f){u[0]?l?(l.p(u,f),f&1&&g(l,1)):(l=gt(u),l.c(),g(l,1),l.m(t,null)):l&&(nt(),_(l,1,1,()=>{l=null}),it())},i(u){r||(g(a.$$.fragment,u),g(l),r=!0)},o(u){_(a.$$.fragment,u),_(l),r=!1},d(u){u&&Z(t),L(a),l&&l.d()}}}function vt(i){let t,n,o,a;function e(l){i[2](l)}let r={style:"https://api.maptiler.com/maps/streets/style.json?key=MZEJTanw3WpxRvt7qDfo",center:[-.1095,51.5076],zoom:13};return i[0]!==void 0&&(r.map=i[0]),n=new It({props:r}),jt.push(()=>Mt(n,"map",e)),n.$on("load",i[1]),{c(){t=X("div"),C(n.$$.fragment),F(t,"slot","main"),et(t,"position","relative"),et(t,"width","100%"),et(t,"height","100vh")},m(l,u){B(l,t,u),w(n,t,null),a=!0},p(l,u){const f={};!o&&u&1&&(o=!0,f.map=l[0],Pt(()=>o=!1)),n.$set(f)},i(l){a||(g(n.$$.fragment,l),a=!0)},o(l){_(n.$$.fragment,l),a=!1},d(l){l&&Z(t),L(n)}}}function pt(i){let t,n;return t=new qt({props:{$$slots:{main:[vt],left:[xt]},$$scope:{ctx:i}}}),{c(){C(t.$$.fragment)},m(o,a){w(t,o,a),n=!0},p(o,[a]){const e={};a&9&&(e.$$scope={dirty:a,ctx:o}),t.$set(e)},i(o){n||(g(t.$$.fragment,o),n=!0)},o(o){_(t.$$.fragment,o),n=!1},d(o){L(t,o)}}}function yt(i){console.log(`got osm ${i.detail.osmXml.length}`)}function bt(i){console.log("reset to nil")}function ht(i){window.alert(`Something broke: ${i.detail}`)}function $t(i,t,n){let o;function a(){for(let r of o.getStyle().layers)(r.id.startsWith("road_")||r.id.startsWith("bridge_"))&&o.setLayoutProperty(r.id,"visibility","none")}function e(r){o=r,n(0,o)}return[o,a,e]}class te extends q{constructor(t){super(),N(this,t,$t,pt,j,{})}}new te({target:document.getElementById("app")});
