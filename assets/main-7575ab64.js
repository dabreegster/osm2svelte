import{S as x,i as ee,s as te,e as V,a as g,n as Z,d as b,c as ke,b as ye,f as N,t as F,g as v,h as E,L as ve,j as H,k as D,l as M,m as C,o as P,p as U,q as L,r as J,u as q,v as we,w as Se,x as Le,y as R,z as ne,A as le,B as re,C as Ne,D as ae,E as Y,F as se,G as Oe,H as Je,I as ue,J as Te,K as Fe,M as je,N as Ge,O as Ie,P as Ce,Q as Me,R as Pe,T as qe,U as Be,V as Re,W as We}from"./SelectImportArea-6fc1d495.js";import{O as Ee}from"./Osm2streetsSettings-3e30ba2e.js";function ze(r){let e;return{c(){e=N("p"),e.textContent="Click something"},m(l,t){g(l,e,t)},p:Z,d(l){l&&b(e)}}}function Ae(r){let e,l=JSON.stringify(r[0].properties)+"",t;return{c(){e=N("pre"),t=F(l)},m(n,s){g(n,e,s),v(e,t)},p(n,s){s&1&&l!==(l=JSON.stringify(n[0].properties)+"")&&E(t,l)},d(n){n&&b(e)}}}function He(r){let e;function l(s,f){return s[0]?Ae:ze}let t=l(r),n=t(r);return{c(){n.c(),e=V()},m(s,f){n.m(s,f),g(s,e,f)},p(s,[f]){t===(t=l(s))&&n?n.p(s,f):(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},i:Z,o:Z,d(s){n.d(s),s&&b(e)}}}function De(r,e,l){let t;return ke(r,ye,n=>l(0,t=n)),[t]}class Ke extends x{constructor(e){super(),ee(this,e,De,He,te,{})}}function Qe(r){const e=r.slice(),l=e[0]||e[1];return e[8]=l,e}function Ue(r){let e;return{c(){e=N("p"),e.textContent="Hover on a road to see its details"},m(l,t){g(l,e,t)},p:Z,d(l){l&&b(e)}}}function ce(r){let e,l,t,n,s=r[8].properties.osm_id+"",f,i,k,a,_,o=r[8].properties.weight+"",u,S,c,w,y,T=JSON.stringify(JSON.parse(r[8].properties.osm_tags),null,"  ")+"",W,B,j,d=JSON.stringify(JSON.parse(r[8].properties.lane_specs_ltr),null,"  ")+"",h;return{c(){e=N("br"),l=C(),t=N("a"),n=F("Open OSM way "),f=F(s),k=C(),a=N("br"),_=F(`
  Weight: `),u=F(o),S=C(),c=N("br"),w=F(`
  Tags:
  `),y=N("pre"),W=F(T),B=F(`
  Lanes:
  `),j=N("pre"),h=F(d),R(t,"href",i=`http://openstreetmap.org/way/${r[8].properties.osm_id}`),R(t,"target","_blank"),R(t,"rel","noreferrer"),R(y,"class","svelte-y0uczf"),R(j,"class","svelte-y0uczf")},m(m,$){g(m,e,$),g(m,l,$),g(m,t,$),v(t,n),v(t,f),g(m,k,$),g(m,a,$),g(m,_,$),g(m,u,$),g(m,S,$),g(m,c,$),g(m,w,$),g(m,y,$),v(y,W),g(m,B,$),g(m,j,$),v(j,h)},p(m,$){$&3&&s!==(s=m[8].properties.osm_id+"")&&E(f,s),$&3&&i!==(i=`http://openstreetmap.org/way/${m[8].properties.osm_id}`)&&R(t,"href",i),$&3&&o!==(o=m[8].properties.weight+"")&&E(u,o),$&3&&T!==(T=JSON.stringify(JSON.parse(m[8].properties.osm_tags),null,"  ")+"")&&E(W,T),$&3&&d!==(d=JSON.stringify(JSON.parse(m[8].properties.lane_specs_ltr),null,"  ")+"")&&E(h,d)},d(m){m&&b(e),m&&b(l),m&&b(t),m&&b(k),m&&b(a),m&&b(_),m&&b(u),m&&b(S),m&&b(c),m&&b(w),m&&b(y),m&&b(B),m&&b(j)}}}function Ve(r){let e,l,t,n,s,f;function i(c){r[4](c)}function k(c){r[5](c)}let a={source:"road-weights",gj:r[2],layerStyle:r[3],interactive:!0};r[0]!==void 0&&(a.clickedFeature=r[0]),r[1]!==void 0&&(a.hoveredFeature=r[1]),e=new ve({props:a}),H.push(()=>D(e,"clickedFeature",i)),H.push(()=>D(e,"hoveredFeature",k));function _(c,w){return c[0]||c[1]?ce:Ue}function o(c,w){return w===ce?Qe(c):c}let u=_(r),S=u(o(r,u));return{c(){M(e.$$.fragment),n=C(),S.c(),s=V()},m(c,w){P(e,c,w),g(c,n,w),S.m(c,w),g(c,s,w),f=!0},p(c,[w]){const y={};!l&&w&1&&(l=!0,y.clickedFeature=c[0],U(()=>l=!1)),!t&&w&2&&(t=!0,y.hoveredFeature=c[1],U(()=>t=!1)),e.$set(y),u===(u=_(c))&&S?S.p(o(c,u),w):(S.d(1),S=u(o(c,u)),S&&(S.c(),S.m(s.parentNode,s)))},i(c){f||(L(e.$$.fragment,c),f=!0)},o(c){J(e.$$.fragment,c),f=!1},d(c){q(e,c),c&&b(n),S.d(c),c&&b(s)}}}function Xe(r){return r.highway_type=="primary"?.8:.3}function Ye(r,e,l){let t;ke(r,we,o=>l(6,t=o));let n,s,f=k(),i={type:"fill",paint:{"fill-color":["interpolate",["linear"],["get","weight"],0,"blue",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],"fill-opacity":Se("hover",.8,.4)}};function k(){let o=Le();if(!t)return o;let u=JSON.parse(t.toGeojsonPlain()),S=JSON.parse(t.toJson());for(let[c,w]of S.roads){let y={highway_type:w.highway_type,lane_specs_ltr:w.lane_specs_ltr,osm_id:void 0,osm_tags:{},weight:0};w.osm_ids.length==1&&(y.osm_id=w.osm_ids[0],y.osm_tags=JSON.parse(t.getOsmTagsForWay(BigInt(y.osm_id)))),y.weight=Xe(y),o.features.push({type:"Feature",properties:y,geometry:u.features.find(T=>c==T.properties.id).geometry})}return o}function a(o){n=o,l(0,n)}function _(o){s=o,l(1,s)}return[n,s,f,i,a,_]}class Ze extends x{constructor(e){super(),ee(this,e,Ye,Ve,te,{})}}function pe(r,e,l){const t=r.slice();return t[8]=e[l],t[10]=l,t}function _e(r){let e,l,t,n,s,f=r[1]+1+"",i,k,a=r[0].length+"",_,o,u,S,c,w,y,T,W,B,j,d,h,m,$,K,X,Q=r[0],G=[];for(let p=0;p<Q.length;p+=1)G[p]=me(pe(r,Q,p));function ie(p){r[7](p)}var A=r[2].content;function oe(p){let O={gj:p[2].gj,downloadable:!0};return p[2].show!==void 0&&(O.show=p[2].show),{props:O}}return A&&(h=re(A,oe(r)),H.push(()=>D(h,"show",ie))),{c(){e=N("div"),l=N("button"),t=F("Previous"),s=C(),i=F(f),k=F(" / "),_=F(a),o=C(),u=N("button"),S=F("Next"),w=C(),y=N("div"),T=N("select");for(let p=0;p<G.length;p+=1)G[p].c();W=C(),B=N("div"),j=N("input"),d=C(),h&&M(h.$$.fragment),R(l,"type","button"),l.disabled=n=r[1]==0,R(u,"type","button"),u.disabled=c=r[1]==r[0].length-1,r[1]===void 0&&Ne(()=>r[5].call(T)),R(j,"type","checkbox")},m(p,O){g(p,e,O),v(e,l),v(l,t),v(e,s),v(e,i),v(e,k),v(e,_),v(e,o),v(e,u),v(u,S),g(p,w,O),g(p,y,O),v(y,T);for(let z=0;z<G.length;z+=1)G[z]&&G[z].m(T,null);ae(T,r[1],!0),g(p,W,O),g(p,B,O),v(B,j),j.checked=r[2].show,v(B,d),h&&P(h,B,null),$=!0,K||(X=[Y(l,"click",r[3]),Y(u,"click",r[4]),Y(T,"change",r[5]),Y(j,"change",r[6])],K=!0)},p(p,O){if((!$||O&2&&n!==(n=p[1]==0))&&(l.disabled=n),(!$||O&2)&&f!==(f=p[1]+1+"")&&E(i,f),(!$||O&1)&&a!==(a=p[0].length+"")&&E(_,a),(!$||O&3&&c!==(c=p[1]==p[0].length-1))&&(u.disabled=c),O&1){Q=p[0];let I;for(I=0;I<Q.length;I+=1){const fe=pe(p,Q,I);G[I]?G[I].p(fe,O):(G[I]=me(fe),G[I].c(),G[I].m(T,null))}for(;I<G.length;I+=1)G[I].d(1);G.length=Q.length}O&2&&ae(T,p[1]),O&4&&(j.checked=p[2].show);const z={};if(O&4&&(z.gj=p[2].gj),!m&&O&4&&(m=!0,z.show=p[2].show,U(()=>m=!1)),O&4&&A!==(A=p[2].content)){if(h){ne();const I=h;J(I.$$.fragment,1,0,()=>{q(I,1)}),le()}A?(h=re(A,oe(p)),H.push(()=>D(h,"show",ie)),M(h.$$.fragment),L(h.$$.fragment,1),P(h,B,null)):h=null}else A&&h.$set(z)},i(p){$||(h&&L(h.$$.fragment,p),$=!0)},o(p){h&&J(h.$$.fragment,p),$=!1},d(p){p&&b(e),p&&b(w),p&&b(y),se(G,p),p&&b(W),p&&b(B),h&&q(h),K=!1,Oe(X)}}}function me(r){let e,l=r[8].label+"",t;return{c(){e=N("option"),t=F(l),e.__value=r[10],e.value=e.__value},m(n,s){g(n,e,s),v(e,t)},p(n,s){s&1&&l!==(l=n[8].label+"")&&E(t,l)},d(n){n&&b(e)}}}function xe(r){let e,l,t=r[0].length>0&&_e(r);return{c(){t&&t.c(),e=V()},m(n,s){t&&t.m(n,s),g(n,e,s),l=!0},p(n,[s]){n[0].length>0?t?(t.p(n,s),s&1&&L(t,1)):(t=_e(n),t.c(),L(t,1),t.m(e.parentNode,e)):t&&(ne(),J(t,1,1,()=>{t=null}),le())},i(n){l||(L(t),l=!0)},o(n){J(t),l=!1},d(n){t&&t.d(n),n&&b(e)}}}function et(r,e,l){let t,{layers:n}=e,s=0;const f=()=>l(1,s--,s),i=()=>l(1,s++,s);function k(){s=Je(this),l(1,s)}function a(){t.show=this.checked,l(2,t),l(0,n),l(1,s)}function _(o){r.$$.not_equal(t.show,o)&&(t.show=o,l(2,t),l(0,n),l(1,s))}return r.$$set=o=>{"layers"in o&&l(0,n=o.layers)},r.$$.update=()=>{r.$$.dirty&3&&l(2,t=n[s])},[n,s,t,f,i,k,a,_]}class tt extends x{constructor(e){super(),ee(this,e,et,xe,te,{layers:0})}}function ge(r,e,l){const t=r.slice();return t[4]=e[l],t[6]=l,t}function be(r,e,l){const t=r.slice();return t[4]=e[l],t[6]=l,t}function de(r){let e,l=r[4].label+"",t,n,s;function f(){return r[3](r[6])}return{c(){e=N("button"),t=F(l),R(e,"class","tab svelte-lnr7kd"),ue(e,"active",r[6]==r[1])},m(i,k){g(i,e,k),v(e,t),n||(s=Y(e,"click",f),n=!0)},p(i,k){r=i,k&1&&l!==(l=r[4].label+"")&&E(t,l),k&2&&ue(e,"active",r[6]==r[1])},d(i){i&&b(e),n=!1,s()}}}function he(r){let e,l,t;var n=r[4].content;function s(f){return{}}return n&&(e=re(n,s())),{c(){e&&M(e.$$.fragment),l=V()},m(f,i){e&&P(e,f,i),g(f,l,i),t=!0},p(f,i){if(i&1&&n!==(n=f[4].content)){if(e){ne();const k=e;J(k.$$.fragment,1,0,()=>{q(k,1)}),le()}n?(e=re(n,s()),M(e.$$.fragment),L(e.$$.fragment,1),P(e,l.parentNode,l)):e=null}},i(f){t||(e&&L(e.$$.fragment,f),t=!0)},o(f){e&&J(e.$$.fragment,f),t=!1},d(f){f&&b(l),e&&q(e,f)}}}function $e(r){let e,l,t=r[6]==r[1]&&he(r);return{c(){t&&t.c(),e=V()},m(n,s){t&&t.m(n,s),g(n,e,s),l=!0},p(n,s){n[6]==n[1]?t?(t.p(n,s),s&2&&L(t,1)):(t=he(n),t.c(),L(t,1),t.m(e.parentNode,e)):t&&(ne(),J(t,1,1,()=>{t=null}),le())},i(n){l||(L(t),l=!0)},o(n){J(t),l=!1},d(n){t&&t.d(n),n&&b(e)}}}function nt(r){let e,l,t,n=r[0],s=[];for(let a=0;a<n.length;a+=1)s[a]=de(be(r,n,a));let f=r[0],i=[];for(let a=0;a<f.length;a+=1)i[a]=$e(ge(r,f,a));const k=a=>J(i[a],1,1,()=>{i[a]=null});return{c(){for(let a=0;a<s.length;a+=1)s[a].c();e=C();for(let a=0;a<i.length;a+=1)i[a].c();l=V()},m(a,_){for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(a,_);g(a,e,_);for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(a,_);g(a,l,_),t=!0},p(a,[_]){if(_&3){n=a[0];let o;for(o=0;o<n.length;o+=1){const u=be(a,n,o);s[o]?s[o].p(u,_):(s[o]=de(u),s[o].c(),s[o].m(e.parentNode,e))}for(;o<s.length;o+=1)s[o].d(1);s.length=n.length}if(_&3){f=a[0];let o;for(o=0;o<f.length;o+=1){const u=ge(a,f,o);i[o]?(i[o].p(u,_),L(i[o],1)):(i[o]=$e(u),i[o].c(),L(i[o],1),i[o].m(l.parentNode,l))}for(ne(),o=f.length;o<i.length;o+=1)k(o);le()}},i(a){if(!t){for(let _=0;_<f.length;_+=1)L(i[_]);t=!0}},o(a){i=i.filter(Boolean);for(let _=0;_<i.length;_+=1)J(i[_]);t=!1},d(a){se(s,a),a&&b(e),se(i,a),a&&b(l)}}}function lt(r,e,l){let{tabs:t}=e,{currentTabLabel:n}=e,s=0;const f=i=>l(1,s=i);return r.$$set=i=>{"tabs"in i&&l(0,t=i.tabs),"currentTabLabel"in i&&l(2,n=i.currentTabLabel)},r.$$.update=()=>{r.$$.dirty&3&&l(2,n=t[s].label)},[t,s,n,f]}class rt extends x{constructor(e){super(),ee(this,e,lt,nt,te,{tabs:0,currentTabLabel:2})}}function st(r){let e,l,t,n,s,f,i,k,a,_,o,u,S,c;function w(d){r[6](d)}let y={};r[1]!==void 0&&(y.settings=r[1]),n=new Ee({props:y}),H.push(()=>D(n,"settings",w));function T(d){r[7](d)}let W={settings:r[1]};r[0]!==void 0&&(W.imported=r[0]),i=new Ce({props:W}),H.push(()=>D(i,"imported",T)),_=new Me({props:{imported:r[0]}});function B(d){r[8](d)}let j={tabs:[{label:"Info",content:Ke},{label:"Route profiles",content:Ze}]};return r[3]!==void 0&&(j.currentTabLabel=r[3]),u=new rt({props:j}),H.push(()=>D(u,"currentTabLabel",B)),{c(){e=N("div"),l=N("h1"),l.textContent="osm2streets Street Explorer",t=C(),M(n.$$.fragment),f=C(),M(i.$$.fragment),a=C(),M(_.$$.fragment),o=C(),M(u.$$.fragment),R(e,"slot","left")},m(d,h){g(d,e,h),v(e,l),v(e,t),P(n,e,null),v(e,f),P(i,e,null),v(e,a),P(_,e,null),v(e,o),P(u,e,null),c=!0},p(d,h){const m={};!s&&h&2&&(s=!0,m.settings=d[1],U(()=>s=!1)),n.$set(m);const $={};h&2&&($.settings=d[1]),!k&&h&1&&(k=!0,$.imported=d[0],U(()=>k=!1)),i.$set($);const K={};h&1&&(K.imported=d[0]),_.$set(K);const X={};!S&&h&8&&(S=!0,X.currentTabLabel=d[3],U(()=>S=!1)),u.$set(X)},i(d){c||(L(n.$$.fragment,d),L(i.$$.fragment,d),L(_.$$.fragment,d),L(u.$$.fragment,d),c=!0)},o(d){J(n.$$.fragment,d),J(i.$$.fragment,d),J(_.$$.fragment,d),J(u.$$.fragment,d),c=!1},d(d){d&&b(e),q(n),q(i),q(_),q(u)}}}function it(r){let e,l;return e=new tt({props:{layers:r[4]}}),{c(){M(e.$$.fragment)},m(t,n){P(e,t,n),l=!0},p:Z,i(t){l||(L(e.$$.fragment,t),l=!0)},o(t){J(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function ot(r){let e,l,t,n;return e=new Re({}),e.$on("polygon",r[5]),t=new We({props:{layers:r[2],$$slots:{default:[it]},$$scope:{ctx:r}}}),{c(){M(e.$$.fragment),l=C(),M(t.$$.fragment)},m(s,f){P(e,s,f),g(s,l,f),P(t,s,f),n=!0},p(s,f){const i={};f&4&&(i.layers=s[2]),f&512&&(i.$$scope={dirty:f,ctx:s}),t.$set(i)},i(s){n||(L(e.$$.fragment,s),L(t.$$.fragment,s),n=!0)},o(s){J(e.$$.fragment,s),J(t.$$.fragment,s),n=!1},d(s){q(e,s),s&&b(l),q(t,s)}}}function ft(r){let e,l,t;return l=new Pe({props:{$$slots:{default:[ot]},$$scope:{ctx:r}}}),{c(){e=N("div"),M(l.$$.fragment),R(e,"slot","main")},m(n,s){g(n,e,s),P(l,e,null),t=!0},p(n,s){const f={};s&519&&(f.$$scope={dirty:s,ctx:n}),l.$set(f)},i(n){t||(L(l.$$.fragment,n),t=!0)},o(n){J(l.$$.fragment,n),t=!1},d(n){n&&b(e),q(l)}}}function at(r){let e,l;return e=new Te({props:{$$slots:{main:[ft],left:[st]},$$scope:{ctx:r}}}),{c(){M(e.$$.fragment)},m(t,n){P(e,t,n),l=!0},p(t,[n]){const s={};n&527&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(L(e.$$.fragment,t),l=!0)},o(t){J(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function ut(r,e,l){let t={kind:"nothing"},n,s=[],f=[],i;Fe(async()=>{await qe()});const k=u=>Be(u,t,n);function a(u){n=u,l(1,n)}function _(u){t=u,l(0,t)}function o(u){i=u,l(3,i)}return r.$$.update=()=>{r.$$.dirty&1&&t.kind=="done"&&(we.set(t.network),je.set(t.boundaryGJ),l(2,s=Ge(t.network,t.boundaryGJ).concat(Ie(t.network))))},[t,n,s,i,f,k,a,_,o]}class ct extends x{constructor(e){super(),ee(this,e,ut,at,te,{})}}new ct({target:document.getElementById("app")});
