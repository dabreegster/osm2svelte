import{S as T,i as W,s as D,e as v,a as w,g as A,b as f,c as F,t as m,d as b,D as O,G as N,E as H,l as M,C as I,U as P,k,m as y,n as d,o as L,q as _,u as $,w as z,y as g,L as K,F as Q,H as R,I as U,K as V,M as X,h as Y,j as Z,N as x,x as ee,O as te,P as re,Q as ne,R as se,T as oe}from"./SelectImportArea-8c969054.js";function ae(i){let e;return{c(){e=M("Click a road to edit")},m(r,n){w(r,e,n)},p:I,i:I,o:I,d(r){r&&b(e)}}}function ie(i){let e,r,n,t,s,o,p;return o=new P({props:{source:"current-way",gj:i[1],layerStyle:i[2]}}),{c(){e=k("a"),r=M("Way "),n=M(i[0]),s=y(),d(o.$$.fragment),L(e,"href",t="http://openstreetmap.org/way/"+i[0]),L(e,"target","_blank")},m(a,l){w(a,e,l),_(e,r),_(e,n),w(a,s,l),$(o,a,l),p=!0},p(a,l){(!p||l&1)&&z(n,a[0]),(!p||l&1&&t!==(t="http://openstreetmap.org/way/"+a[0]))&&L(e,"href",t);const c={};l&2&&(c.gj=a[1]),o.$set(c)},i(a){p||(m(o.$$.fragment,a),p=!0)},o(a){f(o.$$.fragment,a),p=!1},d(a){a&&b(e),a&&b(s),g(o,a)}}}function le(i){let e,r,n,t;const s=[ie,ae],o=[];function p(a,l){return a[0]?0:1}return e=p(i),r=o[e]=s[e](i),{c(){r.c(),n=v()},m(a,l){o[e].m(a,l),w(a,n,l),t=!0},p(a,[l]){let c=e;e=p(a),e===c?o[e].p(a,l):(A(),f(o[c],1,1,()=>{o[c]=null}),F(),r=o[e],r?r.p(a,l):(r=o[e]=s[e](a),r.c()),m(r,1),r.m(n.parentNode,n))},i(a){t||(m(r),t=!0)},o(a){f(r),t=!1},d(a){o[e].d(a),a&&b(n)}}}function pe(i,e,r){let n,t;O(i,N,a=>r(3,n=a)),O(i,H,a=>r(4,t=a));let s,o,p={type:"fill",paint:{"fill-color":"red","fill-opacity":.3}};return i.$$.update=()=>{i.$$.dirty&25&&(r(0,s=null),r(1,o=null),t?t.properties.osm_way_ids.length!=1?window.alert("This road doesn't match up with one OSM way; you can't edit it"):(r(0,s=BigInt(t.properties.osm_way_ids[0])),r(1,o=JSON.parse(n.getGeometryForWay(s)))):(r(0,s=null),r(1,o=null)))},[s,o,p,n,t]}class ue extends T{constructor(e){super(),W(this,e,pe,le,D,{})}}function fe(i){let e,r,n,t,s,o,p,a,l,c,h,j,G,S;t=new V({});function q(u){i[4](u)}let B={settings:i[2]};return i[0]!==void 0&&(B.imported=i[0]),o=new X({props:B}),Y.push(()=>Z(o,"imported",q)),l=new x({props:{imported:i[0]}}),h=new ue({}),{c(){e=k("div"),r=k("h1"),r.textContent="osm2streets lane editor",n=y(),d(t.$$.fragment),s=y(),d(o.$$.fragment),a=y(),d(l.$$.fragment),c=y(),d(h.$$.fragment),j=y(),G=k("div"),G.innerHTML=`<strong>Warnings:</strong> 
      <ul><li><strong>This tool is an early experiment</strong></li> 
        <li>Don&#39;t use this tool without understanding OSM tagging</li> 
        <li>Be careful around sidepaths, footways, and dual carriageways</li> 
        <li>Don&#39;t edit a way that&#39;s partly clipped</li></ul>`,L(e,"slot","left")},m(u,C){w(u,e,C),_(e,r),_(e,n),$(t,e,null),_(e,s),$(o,e,null),_(e,a),$(l,e,null),_(e,c),$(h,e,null),_(e,j),_(e,G),S=!0},p(u,C){const E={};!p&&C&1&&(p=!0,E.imported=u[0],ee(()=>p=!1)),o.$set(E);const J={};C&1&&(J.imported=u[0]),l.$set(J)},i(u){S||(m(t.$$.fragment,u),m(o.$$.fragment,u),m(l.$$.fragment,u),m(h.$$.fragment,u),S=!0)},o(u){f(t.$$.fragment,u),f(o.$$.fragment,u),f(l.$$.fragment,u),f(h.$$.fragment,u),S=!1},d(u){u&&b(e),g(t),g(o),g(l),g(h)}}}function me(i){let e,r,n,t;return e=new se({}),e.$on("polygon",i[3]),n=new oe({props:{layers:i[1],showControls:!1}}),{c(){d(e.$$.fragment),r=y(),d(n.$$.fragment)},m(s,o){$(e,s,o),w(s,r,o),$(n,s,o),t=!0},p(s,o){const p={};o&2&&(p.layers=s[1]),n.$set(p)},i(s){t||(m(e.$$.fragment,s),m(n.$$.fragment,s),t=!0)},o(s){f(e.$$.fragment,s),f(n.$$.fragment,s),t=!1},d(s){g(e,s),s&&b(r),g(n,s)}}}function ce(i){let e,r,n;return r=new te({props:{$$slots:{default:[me]},$$scope:{ctx:i}}}),{c(){e=k("div"),d(r.$$.fragment),L(e,"slot","main")},m(t,s){w(t,e,s),$(r,e,null),n=!0},p(t,s){const o={};s&35&&(o.$$scope={dirty:s,ctx:t}),r.$set(o)},i(t){n||(m(r.$$.fragment,t),n=!0)},o(t){f(r.$$.fragment,t),n=!1},d(t){t&&b(e),g(r)}}}function _e(i){let e,r;return e=new K({props:{$$slots:{main:[ce],left:[fe]},$$scope:{ctx:i}}}),{c(){d(e.$$.fragment)},m(n,t){$(e,n,t),r=!0},p(n,[t]){const s={};t&35&&(s.$$scope={dirty:t,ctx:n}),e.$set(s)},i(n){r||(m(e.$$.fragment,n),r=!0)},o(n){f(e.$$.fragment,n),r=!1},d(n){g(e,n)}}}function de(i,e,r){let n={debug_each_step:!1,dual_carriageway_experiment:!1,sidepath_zipping_experiment:!1,inferred_sidewalks:!1,osm2lanes:!1},t={kind:"nothing"},s=[];Q(async()=>{await re()});const o=a=>ne(a,t,n);function p(a){t=a,r(0,t)}return i.$$.update=()=>{i.$$.dirty&1&&t.kind=="done"&&(N.set(t.network),R.set(t.boundaryGJ),r(1,s=U(t.network,t.boundaryGJ)))},[t,s,n,o,p]}class $e extends T{constructor(e){super(),W(this,e,de,_e,D,{})}}new $e({target:document.getElementById("app")});
