import{S as P,i as R,s as q,c as y,d as k,e as d,m as w,t as b,f as h,k as $,l as L,n as S,o as _,v as M,p as T,r as c,z as N,q as B,u as J,A as V,L as W,C as D,b as H,a as K,j as O,g as Q,h as U}from"./OverpassSelector-c7abaf02.js";import{a as X,m as A,d as Y,j as z,n as Z,e as x,A as ee,I as te,M as ne,i as re,f as se}from"./MainLayers-49047439.js";import{T as ie}from"./TopLeftPanel-bdeee378.js";function oe(o){let e;return{c(){e=_("p"),e.textContent="Click a road"},m(n,t){d(n,e,t)},p:M,d(n){n&&$(e)}}}function le(o){let e,n=o[0].features.length+"",t,r;return{c(){e=_("p"),t=T(n),r=T(" buildings onscreen")},m(i,l){d(i,e,l),c(e,t),c(e,r)},p(i,l){l&1&&n!==(n=i[0].features.length+"")&&N(t,n)},d(i){i&&$(e)}}}function ae(o){let e,n,t;function r(s,a){return s[1]?le:oe}let i=r(o),l=i(o);return n=new X({props:{source:"building-hitboxes",gj:o[0],layerStyle:o[2]}}),{c(){l.c(),e=y(),k(n.$$.fragment)},m(s,a){l.m(s,a),d(s,e,a),w(n,s,a),t=!0},p(s,[a]){i===(i=r(s))&&l?l.p(s,a):(l.d(1),l=i(s),l&&(l.c(),l.m(e.parentNode,e)));const g={};a&1&&(g.gj=s[0]),n.$set(g)},i(s){t||(b(n.$$.fragment,s),t=!0)},o(s){h(n.$$.fragment,s),t=!1},d(s){s&&$(e),l.d(s),L(n,s)}}}function ue(o,e,n){let t,r;S(o,A,s=>n(3,t=s)),S(o,Y,s=>n(1,r=s));let i=z(),l={type:"fill",paint:{"fill-color":"blue"}};return o.$$.update=()=>{if(o.$$.dirty&11){if(n(0,i=z()),r)for(let s of t.queryRenderedFeatures())s.layer.id=="building-3d"&&i.features.push(s);n(0,i),n(1,r),n(3,t)}},[i,r,l,t]}class fe extends P{constructor(e){super(),R(this,e,ue,ae,q,{})}}function ce(o){let e,n,t,r,i,l,s,a,g,v,C;return{c(){e=_("label"),n=_("input"),t=T(`
  Basemap roads`),r=y(),i=_("br"),l=y(),s=_("label"),a=_("input"),g=T(`
  Basemap buildings`),B(n,"type","checkbox"),B(a,"type","checkbox")},m(p,m){d(p,e,m),c(e,n),n.checked=o[0],c(e,t),d(p,r,m),d(p,i,m),d(p,l,m),d(p,s,m),c(s,a),a.checked=o[1],c(s,g),v||(C=[J(n,"change",o[3]),J(a,"change",o[4])],v=!0)},p(p,[m]){m&1&&(n.checked=p[0]),m&2&&(a.checked=p[1])},i:M,o:M,d(p){p&&($(e),$(r),$(i),$(l),$(s)),v=!1,V(C)}}}function pe(o,e,n){let t;S(o,A,a=>n(2,t=a));let r=!0,i=!0;function l(){r=this.checked,n(0,r)}function s(){i=this.checked,n(1,i)}return o.$$.update=()=>{if(o.$$.dirty&5&&t){let a=r?"visible":"none";for(let g of t.getStyle().layers)g.id.startsWith("road_")&&t.setLayoutProperty(g.id,"visibility",a)}if(o.$$.dirty&6&&t){let a=i?"visible":"none";t.setLayoutProperty("building","visibility",a),t.setLayoutProperty("building-3d","visibility",a)}},[r,i,t,l,s]}class me extends P{constructor(e){super(),R(this,e,pe,ce,q,{})}}function E(o){let e,n;return e=new fe({}),{c(){k(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function de(o){let e,n,t,r,i,l,s,a,g,v,C,p,m;r=new ee({});function F(f){o[2](f)}let G={};o[0]!==void 0&&(G.imported=o[0]),a=new te({props:G}),H.push(()=>K(a,"imported",F));let u=o[1]&&E();return{c(){e=_("div"),n=_("h1"),n.textContent="osm2streets road width tool",t=y(),k(r.$$.fragment),i=y(),l=_("hr"),s=y(),k(a.$$.fragment),v=y(),C=_("hr"),p=y(),u&&u.c(),B(e,"slot","left")},m(f,j){d(f,e,j),c(e,n),c(e,t),w(r,e,null),c(e,i),c(e,l),c(e,s),w(a,e,null),c(e,v),c(e,C),c(e,p),u&&u.m(e,null),m=!0},p(f,j){const I={};!g&&j&1&&(g=!0,I.imported=f[0],O(()=>g=!1)),a.$set(I),f[1]?u?j&2&&b(u,1):(u=E(),u.c(),b(u,1),u.m(e,null)):u&&(Q(),h(u,1,1,()=>{u=null}),U())},i(f){m||(b(r.$$.fragment,f),b(a.$$.fragment,f),b(u),m=!0)},o(f){h(r.$$.fragment,f),h(a.$$.fragment,f),h(u),m=!1},d(f){f&&$(e),L(r),L(a),u&&u.d()}}}function $e(o){let e,n,t,r,i,l;return e=new se({}),i=new me({}),{c(){k(e.$$.fragment),n=y(),t=_("hr"),r=y(),k(i.$$.fragment)},m(s,a){w(e,s,a),d(s,n,a),d(s,t,a),d(s,r,a),w(i,s,a),l=!0},p:M,i(s){l||(b(e.$$.fragment,s),b(i.$$.fragment,s),l=!0)},o(s){h(e.$$.fragment,s),h(i.$$.fragment,s),l=!1},d(s){s&&($(n),$(t),$(r)),L(e,s),L(i,s)}}}function _e(o){let e,n;return e=new ie({props:{$$slots:{default:[$e]},$$scope:{ctx:o}}}),{c(){k(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,r){const i={};r&8&&(i.$$scope={dirty:r,ctx:t}),e.$set(i)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function ge(o){let e,n,t;return n=new ne({props:{$$slots:{default:[_e]},$$scope:{ctx:o}}}),{c(){e=_("div"),k(n.$$.fragment),B(e,"slot","main")},m(r,i){d(r,e,i),w(n,e,null),t=!0},p(r,i){const l={};i&8&&(l.$$scope={dirty:i,ctx:r}),n.$set(l)},i(r){t||(b(n.$$.fragment,r),t=!0)},o(r){h(n.$$.fragment,r),t=!1},d(r){r&&$(e),L(n)}}}function be(o){let e,n;return e=new W({props:{$$slots:{main:[ge],left:[de]},$$scope:{ctx:o}}}),{c(){k(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,[r]){const i={};r&11&&(i.$$scope={dirty:r,ctx:t}),e.$set(i)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function he(o,e,n){let t;S(o,A,l=>n(1,t=l));let r={kind:"nothing"};D(async()=>{await re()});function i(l){r=l,n(0,r)}return o.$$.update=()=>{o.$$.dirty&1&&r.kind=="done"&&(Z.set(r.network),x.set(r.boundaryGJ))},[r,t,i]}class ye extends P{constructor(e){super(),R(this,e,he,be,q,{})}}new ye({target:document.getElementById("app")});
