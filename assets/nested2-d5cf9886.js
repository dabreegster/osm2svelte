import{S as M,i as R,s as J,n as h,o as k,a as g,v as w,t as _,b as y,d as b,z as L,F as j,l as $,E as I,m as B,r as f,x as N,p as G,w as A,B as V,L as W,I as D,j as H,k as K,y as O,g as Q,c as U}from"./OverpassSelector-a1b80286.js";import{g as X,m as P,a as Y,h as E,n as Z,b as x,d as ee,A as te,I as ne,M as re,i as se,L as oe}from"./ImportControls-fddb5cd0.js";function ie(s){let e;return{c(){e=$("p"),e.textContent="Click a road"},m(n,t){g(n,e,t)},p:I,d(n){n&&b(e)}}}function le(s){let e,n=s[0].features.length+"",t,r;return{c(){e=$("p"),t=B(n),r=B(" buildings onscreen")},m(o,l){g(o,e,l),f(e,t),f(e,r)},p(o,l){l&1&&n!==(n=o[0].features.length+"")&&N(t,n)},d(o){o&&b(e)}}}function ae(s){let e,n,t;function r(i,a){return i[1]?le:ie}let o=r(s),l=o(s);return n=new X({props:{source:"building-hitboxes",gj:s[0],layerStyle:s[2]}}),{c(){l.c(),e=h(),k(n.$$.fragment)},m(i,a){l.m(i,a),g(i,e,a),w(n,i,a),t=!0},p(i,[a]){o===(o=r(i))&&l?l.p(i,a):(l.d(1),l=o(i),l&&(l.c(),l.m(e.parentNode,e)));const d={};a&1&&(d.gj=i[0]),n.$set(d)},i(i){t||(_(n.$$.fragment,i),t=!0)},o(i){y(n.$$.fragment,i),t=!1},d(i){i&&b(e),l.d(i),L(n,i)}}}function ue(s,e,n){let t,r;j(s,P,i=>n(3,t=i)),j(s,Y,i=>n(1,r=i));let o=E(),l={type:"fill",paint:{"fill-color":"blue"}};return s.$$.update=()=>{if(s.$$.dirty&11){if(n(0,o=E()),r)for(let i of t.queryRenderedFeatures())i.layer.id=="building-3d"&&o.features.push(i);n(0,o),n(1,r),n(3,t)}},[o,r,l,t]}class ce extends M{constructor(e){super(),R(this,e,ue,ae,J,{})}}function fe(s){let e,n,t,r,o,l,i,a,d,v,C;return{c(){e=$("label"),n=$("input"),t=B(`
  Basemap roads`),r=h(),o=$("br"),l=h(),i=$("label"),a=$("input"),d=B(`
  Basemap buildings`),G(n,"type","checkbox"),G(a,"type","checkbox")},m(p,m){g(p,e,m),f(e,n),n.checked=s[0],f(e,t),g(p,r,m),g(p,o,m),g(p,l,m),g(p,i,m),f(i,a),a.checked=s[1],f(i,d),v||(C=[A(n,"change",s[3]),A(a,"change",s[4])],v=!0)},p(p,[m]){m&1&&(n.checked=p[0]),m&2&&(a.checked=p[1])},i:I,o:I,d(p){p&&(b(e),b(r),b(o),b(l),b(i)),v=!1,V(C)}}}function pe(s,e,n){let t;j(s,P,a=>n(2,t=a));let r=!0,o=!0;function l(){r=this.checked,n(0,r)}function i(){o=this.checked,n(1,o)}return s.$$.update=()=>{if(s.$$.dirty&5&&t){let a=r?"visible":"none";for(let d of t.getStyle().layers)d.id.startsWith("road_")&&t.setLayoutProperty(d.id,"visibility",a)}if(s.$$.dirty&6&&t){let a=o?"visible":"none";t.setLayoutProperty("building","visibility",a),t.setLayoutProperty("building-3d","visibility",a)}},[r,o,t,l,i]}class me extends M{constructor(e){super(),R(this,e,pe,fe,J,{})}}function F(s){let e,n;return e=new ce({}),{c(){k(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function de(s){let e,n,t,r,o,l,i,a,d,v,C,p,m;r=new te({});function z(c){s[3](c)}let T={};s[0]!==void 0&&(T.imported=s[0]),a=new ne({props:T}),H.push(()=>K(a,"imported",z));let u=s[2]&&F();return{c(){e=$("div"),n=$("h1"),n.textContent="osm2streets road width tool",t=h(),k(r.$$.fragment),o=h(),l=$("hr"),i=h(),k(a.$$.fragment),v=h(),C=$("hr"),p=h(),u&&u.c(),G(e,"slot","left")},m(c,S){g(c,e,S),f(e,n),f(e,t),w(r,e,null),f(e,o),f(e,l),f(e,i),w(a,e,null),f(e,v),f(e,C),f(e,p),u&&u.m(e,null),m=!0},p(c,S){const q={};!d&&S&1&&(d=!0,q.imported=c[0],O(()=>d=!1)),a.$set(q),c[2]?u?S&4&&_(u,1):(u=F(),u.c(),_(u,1),u.m(e,null)):u&&(Q(),y(u,1,1,()=>{u=null}),U())},i(c){m||(_(r.$$.fragment,c),_(a.$$.fragment,c),_(u),m=!0)},o(c){y(r.$$.fragment,c),y(a.$$.fragment,c),y(u),m=!1},d(c){c&&b(e),L(r),L(a),u&&u.d()}}}function $e(s){let e,n;return e=new me({}),{c(){k(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function _e(s){let e,n;return e=new oe({props:{layers:s[1],$$slots:{default:[$e]},$$scope:{ctx:s}}}),{c(){k(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,r){const o={};r&2&&(o.layers=t[1]),r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function ge(s){let e,n,t;return n=new re({props:{$$slots:{default:[_e]},$$scope:{ctx:s}}}),{c(){e=$("div"),k(n.$$.fragment),G(e,"slot","main")},m(r,o){g(r,e,o),w(n,e,null),t=!0},p(r,o){const l={};o&18&&(l.$$scope={dirty:o,ctx:r}),n.$set(l)},i(r){t||(_(n.$$.fragment,r),t=!0)},o(r){y(n.$$.fragment,r),t=!1},d(r){r&&b(e),L(n)}}}function be(s){let e,n;return e=new W({props:{$$slots:{main:[ge],left:[de]},$$scope:{ctx:s}}}),{c(){k(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,[r]){const o={};r&23&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function ye(s,e,n){let t;j(s,P,i=>n(2,t=i));let r={kind:"nothing"},o=[];D(async()=>{await se()});function l(i){r=i,n(0,r)}return s.$$.update=()=>{s.$$.dirty&1&&r.kind=="done"&&(Z.set(r.network),x.set(r.boundaryGJ),n(1,o=ee(r.network,r.boundaryGJ)))},[r,o,t,l]}class he extends M{constructor(e){super(),R(this,e,ye,be,J,{})}}new he({target:document.getElementById("app")});
