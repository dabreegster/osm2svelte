import{S as J,i as M,s as T,e as U,a as d,C as G,d as $,D as P,X as q,E as X,Y,H as N,k as h,l as R,q as g,w as z,m as S,o as j,v as O,A as Z,J as x,n as k,u as w,t as m,b as _,y as v,K as ee,F as te,M as ne,N as se,h as V,j as W,P as re,Q as ie,x as H,g as oe,c as ae,R as le,T as ue,U as fe,V as pe,W as ce}from"./SelectImportArea-6d8e5e31.js";import{O as me}from"./Osm2streetsSettings-75b4d14e.js";function de(i){let e;return{c(){e=h("p"),e.textContent="Click a road"},m(r,t){d(r,e,t)},p:G,d(r){r&&$(e)}}}function $e(i){let e,r=i[0].features.length+"",t,n;return{c(){e=h("p"),t=R(r),n=R(" buildings onscreen")},m(s,o){d(s,e,o),g(e,t),g(e,n)},p(s,o){o&1&&r!==(r=s[0].features.length+"")&&z(t,r)},d(s){s&&$(e)}}}function ge(i){let e;function r(s,o){return s[1]?$e:de}let t=r(i),n=t(i);return{c(){n.c(),e=U()},m(s,o){n.m(s,o),d(s,e,o)},p(s,[o]){t===(t=r(s))&&n?n.p(s,o):(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},i:G,o:G,d(s){n.d(s),s&&$(e)}}}let B="building-hitboxes";function _e(i,e,r){let t,n;P(i,q,a=>r(2,t=a)),P(i,X,a=>r(1,n=a));let s=`${B}-layer`,o=N();return t.addSource(B,{type:"geojson",data:o}),t.addLayer({id:s,source:B,type:"fill",paint:{"fill-color":"blue"}}),Y(()=>{t&&(t.getLayer(s)&&t.removeLayer(s),t.removeSource(B))}),i.$$.update=()=>{if(i.$$.dirty&7){if(r(0,o=N()),n)for(let a of t.queryRenderedFeatures())a.layer.id=="building-3d"&&o.features.push(a);t.getSource(B).setData(o)}},[o,n,t]}class be extends J{constructor(e){super(),M(this,e,_e,ge,T,{})}}function ye(i){let e,r,t,n,s,o,a,u,b,f,C;return{c(){e=h("label"),r=h("input"),t=R(`
  Basemap roads`),n=S(),s=h("br"),o=S(),a=h("label"),u=h("input"),b=R(`
  Basemap buildings`),j(r,"type","checkbox"),j(u,"type","checkbox")},m(p,y){d(p,e,y),g(e,r),r.checked=i[0],g(e,t),d(p,n,y),d(p,s,y),d(p,o,y),d(p,a,y),g(a,u),u.checked=i[1],g(a,b),f||(C=[O(r,"change",i[3]),O(u,"change",i[4])],f=!0)},p(p,[y]){y&1&&(r.checked=p[0]),y&2&&(u.checked=p[1])},i:G,o:G,d(p){p&&$(e),p&&$(n),p&&$(s),p&&$(o),p&&$(a),f=!1,Z(C)}}}function he(i,e,r){let t;P(i,q,u=>r(2,t=u));let n=!0,s=!0;function o(){n=this.checked,r(0,n)}function a(){s=this.checked,r(1,s)}return i.$$.update=()=>{if(i.$$.dirty&5&&t){let u=n?"visible":"none";for(let b of t.getStyle().layers)b.id.startsWith("road_")&&t.setLayoutProperty(b.id,"visibility",u)}if(i.$$.dirty&6&&t){let u=s?"visible":"none";t.setLayoutProperty("building","visibility",u),t.setLayoutProperty("building-3d","visibility",u)}},[n,s,t,o,a]}class ke extends J{constructor(e){super(),M(this,e,he,ye,T,{})}}function K(i){let e,r;return e=new be({}),{c(){k(e.$$.fragment)},m(t,n){w(e,t,n),r=!0},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){_(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function we(i){let e,r,t,n,s,o,a,u,b,f,C,p;function y(l){i[5](l)}let D={};i[1]!==void 0&&(D.settings=i[1]),n=new me({props:D}),V.push(()=>W(n,"settings",y));function Q(l){i[6](l)}let A={settings:i[1]};i[0]!==void 0&&(A.imported=i[0]),a=new re({props:A}),V.push(()=>W(a,"imported",Q)),f=new ie({props:{imported:i[0]}});let c=i[3]&&K();return{c(){e=h("div"),r=h("h1"),r.textContent="osm2streets road width tool",t=S(),k(n.$$.fragment),o=S(),k(a.$$.fragment),b=S(),k(f.$$.fragment),C=S(),c&&c.c(),j(e,"slot","left")},m(l,L){d(l,e,L),g(e,r),g(e,t),w(n,e,null),g(e,o),w(a,e,null),g(e,b),w(f,e,null),g(e,C),c&&c.m(e,null),p=!0},p(l,L){const E={};!s&&L&2&&(s=!0,E.settings=l[1],H(()=>s=!1)),n.$set(E);const I={};L&2&&(I.settings=l[1]),!u&&L&1&&(u=!0,I.imported=l[0],H(()=>u=!1)),a.$set(I);const F={};L&1&&(F.imported=l[0]),f.$set(F),l[3]?c?L&8&&m(c,1):(c=K(),c.c(),m(c,1),c.m(e,null)):c&&(oe(),_(c,1,1,()=>{c=null}),ae())},i(l){p||(m(n.$$.fragment,l),m(a.$$.fragment,l),m(f.$$.fragment,l),m(c),p=!0)},o(l){_(n.$$.fragment,l),_(a.$$.fragment,l),_(f.$$.fragment,l),_(c),p=!1},d(l){l&&$(e),v(n),v(a),v(f),c&&c.d()}}}function ve(i){let e,r;return e=new ke({}),{c(){k(e.$$.fragment)},m(t,n){w(e,t,n),r=!0},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){_(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Le(i){let e,r,t,n;return e=new pe({}),e.$on("polygon",i[4]),t=new ce({props:{layers:i[2],$$slots:{default:[ve]},$$scope:{ctx:i}}}),{c(){k(e.$$.fragment),r=S(),k(t.$$.fragment)},m(s,o){w(e,s,o),d(s,r,o),w(t,s,o),n=!0},p(s,o){const a={};o&4&&(a.layers=s[2]),o&128&&(a.$$scope={dirty:o,ctx:s}),t.$set(a)},i(s){n||(m(e.$$.fragment,s),m(t.$$.fragment,s),n=!0)},o(s){_(e.$$.fragment,s),_(t.$$.fragment,s),n=!1},d(s){v(e,s),s&&$(r),v(t,s)}}}function Se(i){let e,r,t;return r=new le({props:{$$slots:{default:[Le]},$$scope:{ctx:i}}}),{c(){e=h("div"),k(r.$$.fragment),j(e,"slot","main")},m(n,s){d(n,e,s),w(r,e,null),t=!0},p(n,s){const o={};s&135&&(o.$$scope={dirty:s,ctx:n}),r.$set(o)},i(n){t||(m(r.$$.fragment,n),t=!0)},o(n){_(r.$$.fragment,n),t=!1},d(n){n&&$(e),v(r)}}}function Ce(i){let e,r;return e=new x({props:{$$slots:{main:[Se],left:[we]},$$scope:{ctx:i}}}),{c(){k(e.$$.fragment)},m(t,n){w(e,t,n),r=!0},p(t,[n]){const s={};n&143&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){_(e.$$.fragment,t),r=!1},d(t){v(e,t)}}}function Be(i,e,r){let t;P(i,q,f=>r(3,t=f));let n={kind:"nothing"},s,o=[];ee(async()=>{await ue()});const a=f=>fe(f,n,s);function u(f){s=f,r(1,s)}function b(f){n=f,r(0,n)}return i.$$.update=()=>{i.$$.dirty&1&&n.kind=="done"&&(te.set(n.network),ne.set(n.boundaryGJ),r(2,o=se(n.network,n.boundaryGJ)))},[n,s,o,t,a,u,b]}class Ge extends J{constructor(e){super(),M(this,e,Be,Ce,T,{})}}new Ge({target:document.getElementById("app")});
