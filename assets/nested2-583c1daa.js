import{S as M,i as P,s as q,d as b,c as h,e as p,m as k,t as d,g as y,h as m,j as w,k as C,l as $,r as S,n as j,p as c,x as R,o as A,q as I,y as E,L as F,A as H,G as N,H as V}from"./maplibre-gl-d4a09b64.js";import{L as W,m as x,d as z,g as T,A as D,I as J,M as K,i as O,e as Q}from"./Map-e6c05128.js";import{T as U}from"./TopLeftPanel-d896d767.js";function X(i){let e;return{c(){e=$("p"),e.textContent="Click a road"},m(n,t){p(n,e,t)},p:S,d(n){n&&m(e)}}}function Y(i){let e,n=i[0].features.length+"",t,r;return{c(){e=$("p"),t=j(n),r=j(" buildings onscreen")},m(s,a){p(s,e,a),c(e,t),c(e,r)},p(s,a){a&1&&n!==(n=s[0].features.length+"")&&R(t,n)},d(s){s&&m(e)}}}function Z(i){let e,n,t;function r(l,o){return l[1]?Y:X}let s=r(i),a=s(i);return n=new W({props:{source:"building-hitboxes",gj:i[0],layerStyle:i[2]}}),{c(){a.c(),e=b(),h(n.$$.fragment)},m(l,o){a.m(l,o),p(l,e,o),k(n,l,o),t=!0},p(l,[o]){s===(s=r(l))&&a?a.p(l,o):(a.d(1),a=s(l),a&&(a.c(),a.m(e.parentNode,e)));const _={};o&1&&(_.gj=l[0]),n.$set(_)},i(l){t||(d(n.$$.fragment,l),t=!0)},o(l){y(n.$$.fragment,l),t=!1},d(l){l&&m(e),a.d(l),w(n,l)}}}function ee(i,e,n){let t,r;C(i,x,l=>n(3,t=l)),C(i,z,l=>n(1,r=l));let s=T(),a={type:"fill",paint:{"fill-color":"blue"}};return i.$$.update=()=>{if(i.$$.dirty&11){if(n(0,s=T()),r)for(let l of t.queryRenderedFeatures())l.layer.id=="building-3d"&&s.features.push(l);n(0,s),n(1,r),n(3,t)}},[s,r,a,t]}class te extends M{constructor(e){super(),P(this,e,ee,Z,q,{})}}function ne(i){let e,n,t,r,s,a,l,o,_,L,v;return{c(){e=$("label"),n=$("input"),t=j(`
  Basemap roads`),r=b(),s=$("br"),a=b(),l=$("label"),o=$("input"),_=j(`
  Basemap buildings`),A(n,"type","checkbox"),A(o,"type","checkbox")},m(f,u){p(f,e,u),c(e,n),n.checked=i[0],c(e,t),p(f,r,u),p(f,s,u),p(f,a,u),p(f,l,u),c(l,o),o.checked=i[1],c(l,_),L||(v=[I(n,"change",i[3]),I(o,"change",i[4])],L=!0)},p(f,[u]){u&1&&(n.checked=f[0]),u&2&&(o.checked=f[1])},i:S,o:S,d(f){f&&(m(e),m(r),m(s),m(a),m(l)),L=!1,E(v)}}}function re(i,e,n){let t;C(i,x,o=>n(2,t=o));let r=!0,s=!0;function a(){r=this.checked,n(0,r)}function l(){s=this.checked,n(1,s)}return i.$$.update=()=>{if(i.$$.dirty&5&&t){let o=r?"visible":"none";for(let _ of t.getStyle().layers)_.id.startsWith("road_")&&t.setLayoutProperty(_.id,"visibility",o)}if(i.$$.dirty&6&&t){let o=s?"visible":"none";t.setLayoutProperty("building","visibility",o),t.setLayoutProperty("building-3d","visibility",o)}},[r,s,t,a,l]}class le extends M{constructor(e){super(),P(this,e,re,ne,q,{})}}function G(i){let e,n;return e=new te({}),{c(){h(e.$$.fragment)},m(t,r){k(e,t,r),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function se(i){let e,n,t,r,s,a,l,o,_,L,v,f;r=new D({}),o=new J({});let u=i[0]&&G();return{c(){e=$("div"),n=$("h1"),n.textContent="osm2streets road width tool",t=b(),h(r.$$.fragment),s=b(),a=$("hr"),l=b(),h(o.$$.fragment),_=b(),L=$("hr"),v=b(),u&&u.c(),A(e,"slot","left")},m(g,B){p(g,e,B),c(e,n),c(e,t),k(r,e,null),c(e,s),c(e,a),c(e,l),k(o,e,null),c(e,_),c(e,L),c(e,v),u&&u.m(e,null),f=!0},p(g,B){g[0]?u?B&1&&d(u,1):(u=G(),u.c(),d(u,1),u.m(e,null)):u&&(N(),y(u,1,1,()=>{u=null}),V())},i(g){f||(d(r.$$.fragment,g),d(o.$$.fragment,g),d(u),f=!0)},o(g){y(r.$$.fragment,g),y(o.$$.fragment,g),y(u),f=!1},d(g){g&&m(e),w(r),w(o),u&&u.d()}}}function ie(i){let e,n,t,r,s,a;return e=new Q({}),s=new le({}),{c(){h(e.$$.fragment),n=b(),t=$("hr"),r=b(),h(s.$$.fragment)},m(l,o){k(e,l,o),p(l,n,o),p(l,t,o),p(l,r,o),k(s,l,o),a=!0},p:S,i(l){a||(d(e.$$.fragment,l),d(s.$$.fragment,l),a=!0)},o(l){y(e.$$.fragment,l),y(s.$$.fragment,l),a=!1},d(l){l&&(m(n),m(t),m(r)),w(e,l),w(s,l)}}}function oe(i){let e,n;return e=new U({props:{$$slots:{default:[ie]},$$scope:{ctx:i}}}),{c(){h(e.$$.fragment)},m(t,r){k(e,t,r),n=!0},p(t,r){const s={};r&2&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ae(i){let e,n,t;return n=new K({props:{$$slots:{default:[oe]},$$scope:{ctx:i}}}),{c(){e=$("div"),h(n.$$.fragment),A(e,"slot","main")},m(r,s){p(r,e,s),k(n,e,null),t=!0},p(r,s){const a={};s&2&&(a.$$scope={dirty:s,ctx:r}),n.$set(a)},i(r){t||(d(n.$$.fragment,r),t=!0)},o(r){y(n.$$.fragment,r),t=!1},d(r){r&&m(e),w(n)}}}function ue(i){let e,n;return e=new F({props:{$$slots:{main:[ae],left:[se]},$$scope:{ctx:i}}}),{c(){h(e.$$.fragment)},m(t,r){k(e,t,r),n=!0},p(t,[r]){const s={};r&3&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function fe(i,e,n){let t;return C(i,x,r=>n(0,t=r)),H(async()=>{await O()}),[t]}class ce extends M{constructor(e){super(),P(this,e,fe,ue,q,{})}}new ce({target:document.getElementById("app")});
