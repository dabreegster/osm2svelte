import{S as K,i as Q,s as U,e as ke,a as m,t as G,g as ge,b as O,c as we,d as h,f as R,h as ie,j as x,k as ee,l as $,m as E,n as I,o as j,p as S,q as ye,r as d,u as ae,v as q,w as A,x as W,y as $e,z as J,A as te,B as be,C as ve,D as Ce,E as Z,F as B,G as Le,H as Se,L as Ie,I as Ee}from"./OverpassSelector-31dd464d.js";import{n as T,m as Ge,c as Me,a as Oe,b as ue,A as je,I as qe,M as Je,i as Pe,L as De,d as Ne,e as ze}from"./ImportControls-0c244f27.js";function ce(o,t,n){const e=o.slice();return e[8]=t[n],e[10]=n,e}function pe(o){let t,n,e,l,s,r=o[1]+1+"",i,_,g=o[0].length+"",y,u,p,f,a,v,w,M,V,N,F,ne,b,X,P,Y,le,H=R(o[0]),C=[];for(let c=0;c<H.length;c+=1)C[c]=fe(ce(o,H,c));function oe(c){o[7](c)}var z=o[2].content;function se(c){let k={gj:c[2].gj,downloadable:!0};return c[2].show!==void 0&&(k.show=c[2].show),{props:k}}return z&&(b=ie(z,se(o)),x.push(()=>ee(b,"show",oe))),{c(){t=$("div"),n=$("button"),e=E("Previous"),s=I(),i=E(r),_=E(" / "),y=E(g),u=I(),p=$("button"),f=E("Next"),v=I(),w=$("div"),M=$("select");for(let c=0;c<C.length;c+=1)C[c].c();V=I(),N=$("div"),F=$("input"),ne=I(),b&&j(b.$$.fragment),S(n,"type","button"),n.disabled=l=o[1]==0,S(p,"type","button"),p.disabled=a=o[1]==o[0].length-1,o[1]===void 0&&ye(()=>o[5].call(M)),S(F,"type","checkbox")},m(c,k){m(c,t,k),d(t,n),d(n,e),d(t,s),d(t,i),d(t,_),d(t,y),d(t,u),d(t,p),d(p,f),m(c,v,k),m(c,w,k),d(w,M);for(let D=0;D<C.length;D+=1)C[D]&&C[D].m(M,null);ae(M,o[1],!0),m(c,V,k),m(c,N,k),d(N,F),F.checked=o[2].show,d(N,ne),b&&q(b,N,null),P=!0,Y||(le=[A(n,"click",o[3]),A(p,"click",o[4]),A(M,"change",o[5]),A(F,"change",o[6])],Y=!0)},p(c,k){if((!P||k&2&&l!==(l=c[1]==0))&&(n.disabled=l),(!P||k&2)&&r!==(r=c[1]+1+"")&&W(i,r),(!P||k&1)&&g!==(g=c[0].length+"")&&W(y,g),(!P||k&3&&a!==(a=c[1]==c[0].length-1))&&(p.disabled=a),k&1){H=R(c[0]);let L;for(L=0;L<H.length;L+=1){const re=ce(c,H,L);C[L]?C[L].p(re,k):(C[L]=fe(re),C[L].c(),C[L].m(M,null))}for(;L<C.length;L+=1)C[L].d(1);C.length=H.length}k&2&&ae(M,c[1]),k&4&&(F.checked=c[2].show);const D={};if(k&4&&(D.gj=c[2].gj),!X&&k&4&&(X=!0,D.show=c[2].show,$e(()=>X=!1)),k&4&&z!==(z=c[2].content)){if(b){ge();const L=b;O(L.$$.fragment,1,0,()=>{J(L,1)}),we()}z?(b=ie(z,se(c)),x.push(()=>ee(b,"show",oe)),j(b.$$.fragment),G(b.$$.fragment,1),q(b,N,null)):b=null}else z&&b.$set(D)},i(c){P||(b&&G(b.$$.fragment,c),P=!0)},o(c){b&&O(b.$$.fragment,c),P=!1},d(c){c&&(h(t),h(v),h(w),h(V),h(N)),te(C,c),b&&J(b),Y=!1,be(le)}}}function fe(o){let t,n=o[8].label+"",e;return{c(){t=$("option"),e=E(n),t.__value=o[10],ve(t,t.__value)},m(l,s){m(l,t,s),d(t,e)},p(l,s){s&1&&n!==(n=l[8].label+"")&&W(e,n)},d(l){l&&h(t)}}}function Ae(o){let t,n,e=o[0].length>0&&pe(o);return{c(){e&&e.c(),t=ke()},m(l,s){e&&e.m(l,s),m(l,t,s),n=!0},p(l,[s]){l[0].length>0?e?(e.p(l,s),s&1&&G(e,1)):(e=pe(l),e.c(),G(e,1),e.m(t.parentNode,t)):e&&(ge(),O(e,1,1,()=>{e=null}),we())},i(l){n||(G(e),n=!0)},o(l){O(e),n=!1},d(l){l&&h(t),e&&e.d(l)}}}function Be(o,t,n){let e,{layers:l}=t,s=0;const r=()=>n(1,s--,s),i=()=>n(1,s++,s);function _(){s=Ce(this),n(1,s)}function g(){e.show=this.checked,n(2,e),n(0,l),n(1,s)}function y(u){o.$$.not_equal(e.show,u)&&(e.show=u,n(2,e),n(0,l),n(1,s))}return o.$$set=u=>{"layers"in u&&n(0,l=u.layers)},o.$$.update=()=>{o.$$.dirty&3&&n(2,e=l[s])},[l,s,e,r,i,_,g,y]}class Te extends K{constructor(t){super(),Q(this,t,Be,Ae,U,{layers:0})}}function _e(o,t,n){const e=o.slice();return e[4]=t[n],e}function de(o){let t,n=o[4]+"",e,l,s;return{c(){t=$("a"),e=E(n),s=E(","),S(t,"href",l="https://www.openstreetmap.org/node/"+o[4]),S(t,"target","_blank")},m(r,i){m(r,t,i),d(t,e),m(r,s,i)},p(r,i){i&1&&n!==(n=r[4]+"")&&W(e,n),i&1&&l!==(l="https://www.openstreetmap.org/node/"+r[4])&&S(t,"href",l)},d(r){r&&(h(t),h(s))}}}function Fe(o){let t,n,e,l,s,r,i,_,g,y=R(o[0].properties.osm_node_ids),u=[];for(let p=0;p<y.length;p+=1)u[p]=de(_e(o,y,p));return{c(){t=$("pre"),t.textContent=`${JSON.stringify(o[1],null,"  ")}`,n=I(),e=$("div"),l=E(`OSM nodes:
  `);for(let p=0;p<u.length;p+=1)u[p].c();s=I(),r=$("div"),i=$("button"),i.textContent="Collapse intersection",S(i,"type","button")},m(p,f){m(p,t,f),m(p,n,f),m(p,e,f),d(e,l);for(let a=0;a<u.length;a+=1)u[a]&&u[a].m(e,null);m(p,s,f),m(p,r,f),d(r,i),_||(g=A(i,"click",o[2]),_=!0)},p(p,[f]){if(f&1){y=R(p[0].properties.osm_node_ids);let a;for(a=0;a<y.length;a+=1){const v=_e(p,y,a);u[a]?u[a].p(v,f):(u[a]=de(v),u[a].c(),u[a].m(e,null))}for(;a<u.length;a+=1)u[a].d(1);u.length=y.length}},i:Z,o:Z,d(p){p&&(h(t),h(n),h(e),h(s),h(r)),te(u,p),_=!1,g()}}}function He(o,t,n){let e;B(o,T,i=>n(3,e=i));let{intersection:l}=t,s=structuredClone(l.properties);delete s.osm_node_ids;function r(){e.collapseIntersection(l.properties.id),T.set(e)}return o.$$set=i=>{"intersection"in i&&n(0,l=i.intersection)},[l,s,r]}class Re extends K{constructor(t){super(),Q(this,t,He,Fe,U,{intersection:0})}}function me(o,t,n){const e=o.slice();return e[5]=t[n],e}function he(o){let t,n=o[5]+"",e,l,s;return{c(){t=$("a"),e=E(n),s=E(","),S(t,"href",l="https://www.openstreetmap.org/way/"+o[5]),S(t,"target","_blank")},m(r,i){m(r,t,i),d(t,e),m(r,s,i)},p(r,i){i&1&&n!==(n=r[5]+"")&&W(e,n),i&1&&l!==(l="https://www.openstreetmap.org/way/"+r[5])&&S(t,"href",l)},d(r){r&&(h(t),h(s))}}}function We(o){let t,n,e,l,s,r,i,_,g,y,u,p=R(o[0].properties.osm_way_ids),f=[];for(let a=0;a<p.length;a+=1)f[a]=he(me(o,p,a));return{c(){t=$("pre"),t.textContent=`${JSON.stringify(o[1],null,"  ")}`,n=I(),e=$("div"),l=E(`OSM ways:
  `);for(let a=0;a<f.length;a+=1)f[a].c();s=I(),r=$("div"),i=$("button"),i.textContent="Collapse short road",_=I(),g=$("button"),g.textContent="Zip side-path",S(i,"type","button"),S(g,"type","button")},m(a,v){m(a,t,v),m(a,n,v),m(a,e,v),d(e,l);for(let w=0;w<f.length;w+=1)f[w]&&f[w].m(e,null);m(a,s,v),m(a,r,v),d(r,i),d(r,_),d(r,g),y||(u=[A(i,"click",o[2]),A(g,"click",o[3])],y=!0)},p(a,[v]){if(v&1){p=R(a[0].properties.osm_way_ids);let w;for(w=0;w<p.length;w+=1){const M=me(a,p,w);f[w]?f[w].p(M,v):(f[w]=he(M),f[w].c(),f[w].m(e,null))}for(;w<f.length;w+=1)f[w].d(1);f.length=p.length}},i:Z,o:Z,d(a){a&&(h(t),h(n),h(e),h(s),h(r)),te(f,a),y=!1,be(u)}}}function Ze(o,t,n){let e;B(o,T,_=>n(4,e=_));let{lane:l}=t,s=structuredClone(l.properties);delete s.osm_way_ids;function r(){e.collapseShortRoad(l.properties.rod),T.set(e)}function i(){e.zipSidepath(l.properties.rod),T.set(e)}return o.$$set=_=>{"lane"in _&&n(0,l=_.lane)},[l,s,r,i]}class Ke extends K{constructor(t){super(),Q(this,t,Ze,We,U,{lane:0})}}function Qe(o,t,n){let e,l,s;B(o,Ge,i=>n(0,e=i)),B(o,Me,i=>n(1,l=i)),B(o,Oe,i=>n(2,s=i));let r=new Le.Popup({closeButton:!1,closeOnClick:!1,maxWidth:"none"});return Se(()=>{r.remove()}),o.$$.update=()=>{if(o.$$.dirty&7)if(s){let i=document.createElement("div");new Ke({target:i,props:{lane:s}});let _=s.geometry.coordinates[0][0];r.setLngLat(_).setDOMContent(i).addTo(e)}else if(l){let i=document.createElement("div");new Re({target:i,props:{intersection:l}});let _=l.geometry.coordinates[0][0];r.setLngLat(_).setDOMContent(i).addTo(e)}else r.remove()},[e,l,s]}class Ue extends K{constructor(t){super(),Q(this,t,Qe,null,U,{})}}function Ve(o){let t,n,e,l,s,r,i,_;l=new je({});function g(u){o[5](u)}let y={};return o[0]!==void 0&&(y.imported=o[0]),r=new qe({props:y}),x.push(()=>ee(r,"imported",g)),{c(){t=$("div"),n=$("h1"),n.textContent="osm2streets Street Explorer",e=I(),j(l.$$.fragment),s=I(),j(r.$$.fragment),S(t,"slot","left")},m(u,p){m(u,t,p),d(t,n),d(t,e),q(l,t,null),d(t,s),q(r,t,null),_=!0},p(u,p){const f={};!i&&p&1&&(i=!0,f.imported=u[0],$e(()=>i=!1)),r.$set(f)},i(u){_||(G(l.$$.fragment,u),G(r.$$.fragment,u),_=!0)},o(u){O(l.$$.fragment,u),O(r.$$.fragment,u),_=!1},d(u){u&&h(t),J(l),J(r)}}}function Xe(o){let t,n;return t=new Te({props:{layers:o[2]}}),{c(){j(t.$$.fragment)},m(e,l){q(t,e,l),n=!0},p:Z,i(e){n||(G(t.$$.fragment,e),n=!0)},o(e){O(t.$$.fragment,e),n=!1},d(e){J(t,e)}}}function Ye(o){let t,n,e,l;return t=new De({props:{layers:o[1],$$slots:{default:[Xe]},$$scope:{ctx:o}}}),e=new Ue({}),{c(){j(t.$$.fragment),n=I(),j(e.$$.fragment)},m(s,r){q(t,s,r),m(s,n,r),q(e,s,r),l=!0},p(s,r){const i={};r&2&&(i.layers=s[1]),r&64&&(i.$$scope={dirty:r,ctx:s}),t.$set(i)},i(s){l||(G(t.$$.fragment,s),G(e.$$.fragment,s),l=!0)},o(s){O(t.$$.fragment,s),O(e.$$.fragment,s),l=!1},d(s){s&&h(n),J(t,s),J(e,s)}}}function xe(o){let t,n,e;return n=new Je({props:{$$slots:{default:[Ye]},$$scope:{ctx:o}}}),{c(){t=$("div"),j(n.$$.fragment),S(t,"slot","main")},m(l,s){m(l,t,s),q(n,t,null),e=!0},p(l,s){const r={};s&66&&(r.$$scope={dirty:s,ctx:l}),n.$set(r)},i(l){e||(G(n.$$.fragment,l),e=!0)},o(l){O(n.$$.fragment,l),e=!1},d(l){l&&h(t),J(n)}}}function et(o){let t,n;return t=new Ie({props:{$$slots:{main:[xe],left:[Ve]},$$scope:{ctx:o}}}),{c(){j(t.$$.fragment)},m(e,l){q(t,e,l),n=!0},p(e,[l]){const s={};l&67&&(s.$$scope={dirty:l,ctx:e}),t.$set(s)},i(e){n||(G(t.$$.fragment,e),n=!0)},o(e){O(t.$$.fragment,e),n=!1},d(e){J(t,e)}}}function tt(o,t,n){let e,l;B(o,T,g=>n(3,e=g)),B(o,ue,g=>n(4,l=g));let s={kind:"nothing"},r=[],i=[];Ee(async()=>{await Pe()});function _(g){s=g,n(0,s)}return o.$$.update=()=>{o.$$.dirty&1&&s.kind=="done"&&(T.set(s.network),ue.set(s.boundaryGJ)),o.$$.dirty&24&&e&&l&&n(1,r=Ne(e,l).concat(ze()))},[s,r,i,e,l,_]}class nt extends K{constructor(t){super(),Q(this,t,tt,et,U,{})}}new nt({target:document.getElementById("app")});
