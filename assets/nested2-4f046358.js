import{S as M,i as T,s as q,a1 as X,m as S,n as h,a as b,u as k,t as $,b as d,d as y,y as w,D as B,F as A,H as z,a2 as O,k as L,C as I,l as G,q as g,w as Y,o as P,v as V,A as Z,L as x,K as ee,E as te,M as ne,N as se,P as re,h as W,j as D,Q as ie,R as oe,x as H,g as le,c as ae,T as ue,U as fe,V as pe,W as me,X as ce}from"./SelectImportArea-202112ca.js";import{O as $e}from"./Osm2streetsSettings-136b15a0.js";function de(i){let e;return{c(){e=L("p"),e.textContent="Click a road"},m(n,t){b(n,e,t)},p:I,d(n){n&&y(e)}}}function ge(i){let e,n=i[0].features.length+"",t,s;return{c(){e=L("p"),t=G(n),s=G(" buildings onscreen")},m(r,o){b(r,e,o),g(e,t),g(e,s)},p(r,o){o&1&&n!==(n=r[0].features.length+"")&&Y(t,n)},d(r){r&&y(e)}}}function _e(i){let e,n,t;function s(l,a){return l[1]?ge:de}let r=s(i),o=r(i);return n=new X({props:{source:"building-hitboxes",gj:i[0],layerStyle:i[2]}}),{c(){o.c(),e=S(),h(n.$$.fragment)},m(l,a){o.m(l,a),b(l,e,a),k(n,l,a),t=!0},p(l,[a]){r===(r=s(l))&&o?o.p(l,a):(o.d(1),o=r(l),o&&(o.c(),o.m(e.parentNode,e)));const p={};a&1&&(p.gj=l[0]),n.$set(p)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){o.d(l),l&&y(e),w(n,l)}}}function be(i,e,n){let t,s;B(i,A,l=>n(3,t=l)),B(i,z,l=>n(1,s=l));let r=O(),o={type:"fill",paint:{"fill-color":"blue"}};return i.$$.update=()=>{if(i.$$.dirty&11){if(n(0,r=O()),s)for(let l of t.queryRenderedFeatures())l.layer.id=="building-3d"&&r.features.push(l);n(0,r),n(1,s),n(3,t)}},[r,s,o,t]}class ye extends M{constructor(e){super(),T(this,e,be,_e,q,{})}}function he(i){let e,n,t,s,r,o,l,a,p,c,C;return{c(){e=L("label"),n=L("input"),t=G(`
  Basemap roads`),s=S(),r=L("br"),o=S(),l=L("label"),a=L("input"),p=G(`
  Basemap buildings`),P(n,"type","checkbox"),P(a,"type","checkbox")},m(f,_){b(f,e,_),g(e,n),n.checked=i[0],g(e,t),b(f,s,_),b(f,r,_),b(f,o,_),b(f,l,_),g(l,a),a.checked=i[1],g(l,p),c||(C=[V(n,"change",i[3]),V(a,"change",i[4])],c=!0)},p(f,[_]){_&1&&(n.checked=f[0]),_&2&&(a.checked=f[1])},i:I,o:I,d(f){f&&y(e),f&&y(s),f&&y(r),f&&y(o),f&&y(l),c=!1,Z(C)}}}function ke(i,e,n){let t;B(i,A,a=>n(2,t=a));let s=!0,r=!0;function o(){s=this.checked,n(0,s)}function l(){r=this.checked,n(1,r)}return i.$$.update=()=>{if(i.$$.dirty&5&&t){let a=s?"visible":"none";for(let p of t.getStyle().layers)p.id.startsWith("road_")&&t.setLayoutProperty(p.id,"visibility",a)}if(i.$$.dirty&6&&t){let a=r?"visible":"none";t.setLayoutProperty("building","visibility",a),t.setLayoutProperty("building-3d","visibility",a)}},[s,r,t,o,l]}class we extends M{constructor(e){super(),T(this,e,ke,he,q,{})}}function K(i){let e,n;return e=new ye({}),{c(){h(e.$$.fragment)},m(t,s){k(e,t,s),n=!0},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Le(i){let e,n,t,s,r,o,l,a,p,c,C,f,_,j;s=new re({});function Q(u){i[5](u)}let J={};i[1]!==void 0&&(J.settings=i[1]),o=new $e({props:J}),W.push(()=>D(o,"settings",Q));function U(u){i[6](u)}let E={settings:i[1]};i[0]!==void 0&&(E.imported=i[0]),p=new ie({props:E}),W.push(()=>D(p,"imported",U)),f=new oe({props:{imported:i[0]}});let m=i[3]&&K();return{c(){e=L("div"),n=L("h1"),n.textContent="osm2streets road width tool",t=S(),h(s.$$.fragment),r=S(),h(o.$$.fragment),a=S(),h(p.$$.fragment),C=S(),h(f.$$.fragment),_=S(),m&&m.c(),P(e,"slot","left")},m(u,v){b(u,e,v),g(e,n),g(e,t),k(s,e,null),g(e,r),k(o,e,null),g(e,a),k(p,e,null),g(e,C),k(f,e,null),g(e,_),m&&m.m(e,null),j=!0},p(u,v){const F={};!l&&v&2&&(l=!0,F.settings=u[1],H(()=>l=!1)),o.$set(F);const R={};v&2&&(R.settings=u[1]),!c&&v&1&&(c=!0,R.imported=u[0],H(()=>c=!1)),p.$set(R);const N={};v&1&&(N.imported=u[0]),f.$set(N),u[3]?m?v&8&&$(m,1):(m=K(),m.c(),$(m,1),m.m(e,null)):m&&(le(),d(m,1,1,()=>{m=null}),ae())},i(u){j||($(s.$$.fragment,u),$(o.$$.fragment,u),$(p.$$.fragment,u),$(f.$$.fragment,u),$(m),j=!0)},o(u){d(s.$$.fragment,u),d(o.$$.fragment,u),d(p.$$.fragment,u),d(f.$$.fragment,u),d(m),j=!1},d(u){u&&y(e),w(s),w(o),w(p),w(f),m&&m.d()}}}function Se(i){let e,n;return e=new we({}),{c(){h(e.$$.fragment)},m(t,s){k(e,t,s),n=!0},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ve(i){let e,n,t,s;return e=new me({}),e.$on("polygon",i[4]),t=new ce({props:{layers:i[2],$$slots:{default:[Se]},$$scope:{ctx:i}}}),{c(){h(e.$$.fragment),n=S(),h(t.$$.fragment)},m(r,o){k(e,r,o),b(r,n,o),k(t,r,o),s=!0},p(r,o){const l={};o&4&&(l.layers=r[2]),o&128&&(l.$$scope={dirty:o,ctx:r}),t.$set(l)},i(r){s||($(e.$$.fragment,r),$(t.$$.fragment,r),s=!0)},o(r){d(e.$$.fragment,r),d(t.$$.fragment,r),s=!1},d(r){w(e,r),r&&y(n),w(t,r)}}}function Ce(i){let e,n,t;return n=new ue({props:{$$slots:{default:[ve]},$$scope:{ctx:i}}}),{c(){e=L("div"),h(n.$$.fragment),P(e,"slot","main")},m(s,r){b(s,e,r),k(n,e,null),t=!0},p(s,r){const o={};r&135&&(o.$$scope={dirty:r,ctx:s}),n.$set(o)},i(s){t||($(n.$$.fragment,s),t=!0)},o(s){d(n.$$.fragment,s),t=!1},d(s){s&&y(e),w(n)}}}function je(i){let e,n;return e=new x({props:{$$slots:{main:[Ce],left:[Le]},$$scope:{ctx:i}}}),{c(){h(e.$$.fragment)},m(t,s){k(e,t,s),n=!0},p(t,[s]){const r={};s&143&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Be(i,e,n){let t;B(i,A,c=>n(3,t=c));let s={kind:"nothing"},r,o=[];ee(async()=>{await fe()});const l=c=>pe(c,s,r);function a(c){r=c,n(1,r)}function p(c){s=c,n(0,s)}return i.$$.update=()=>{i.$$.dirty&1&&s.kind=="done"&&(te.set(s.network),ne.set(s.boundaryGJ),n(2,o=se(s.network,s.boundaryGJ)))},[s,r,o,t,l,a,p]}class Ge extends M{constructor(e){super(),T(this,e,Be,je,q,{})}}new Ge({target:document.getElementById("app")});
