import{S as Q,i as U,s as V,e as we,a as $,t as I,g as ge,b as P,c as he,d as w,f as ie,h as X,j as Z,k as v,l as j,m as L,n as q,o as J,p as be,q as h,r as ue,u as E,v as T,w as H,x as ee,y as N,z as te,A as $e,B as ke,C as K,D as F,E as ne,F as ve,G as ye,H as Ce,I as Le,J as Se,L as Oe,K as Ie,M as Ge,N as Me,O as Pe,P as Je,Q as je,R as qe,T as Ee,U as Ne,V as Be,W as De,X as ze}from"./SelectImportArea-202112ca.js";import{O as Ae}from"./Osm2streetsSettings-136b15a0.js";function ae(l,t,n){const e=l.slice();return e[8]=t[n],e[10]=n,e}function fe(l){let t,n,e,s,r,i=l[1]+1+"",o,c,_=l[0].length+"",d,m,a,p,u,C,b,G,g,M,B,R,k,Y,D,x,se,W=l[0],S=[];for(let f=0;f<W.length;f+=1)S[f]=pe(ae(l,W,f));function le(f){l[7](f)}var A=l[2].content;function oe(f){let y={gj:f[2].gj,downloadable:!0};return f[2].show!==void 0&&(y.show=f[2].show),{props:y}}return A&&(k=ie(A,oe(l)),X.push(()=>Z(k,"show",le))),{c(){t=v("div"),n=v("button"),e=j("Previous"),r=L(),o=j(i),c=j(" / "),d=j(_),m=L(),a=v("button"),p=j("Next"),C=L(),b=v("div"),G=v("select");for(let f=0;f<S.length;f+=1)S[f].c();g=L(),M=v("div"),B=v("input"),R=L(),k&&q(k.$$.fragment),J(n,"type","button"),n.disabled=s=l[1]==0,J(a,"type","button"),a.disabled=u=l[1]==l[0].length-1,l[1]===void 0&&be(()=>l[5].call(G)),J(B,"type","checkbox")},m(f,y){$(f,t,y),h(t,n),h(n,e),h(t,r),h(t,o),h(t,c),h(t,d),h(t,m),h(t,a),h(a,p),$(f,C,y),$(f,b,y),h(b,G);for(let z=0;z<S.length;z+=1)S[z]&&S[z].m(G,null);ue(G,l[1],!0),$(f,g,y),$(f,M,y),h(M,B),B.checked=l[2].show,h(M,R),k&&E(k,M,null),D=!0,x||(se=[T(n,"click",l[3]),T(a,"click",l[4]),T(G,"change",l[5]),T(B,"change",l[6])],x=!0)},p(f,y){if((!D||y&2&&s!==(s=f[1]==0))&&(n.disabled=s),(!D||y&2)&&i!==(i=f[1]+1+"")&&H(o,i),(!D||y&1)&&_!==(_=f[0].length+"")&&H(d,_),(!D||y&3&&u!==(u=f[1]==f[0].length-1))&&(a.disabled=u),y&1){W=f[0];let O;for(O=0;O<W.length;O+=1){const re=ae(f,W,O);S[O]?S[O].p(re,y):(S[O]=pe(re),S[O].c(),S[O].m(G,null))}for(;O<S.length;O+=1)S[O].d(1);S.length=W.length}y&2&&ue(G,f[1]),y&4&&(B.checked=f[2].show);const z={};if(y&4&&(z.gj=f[2].gj),!Y&&y&4&&(Y=!0,z.show=f[2].show,ee(()=>Y=!1)),y&4&&A!==(A=f[2].content)){if(k){ge();const O=k;P(O.$$.fragment,1,0,()=>{N(O,1)}),he()}A?(k=ie(A,oe(f)),X.push(()=>Z(k,"show",le)),q(k.$$.fragment),I(k.$$.fragment,1),E(k,M,null)):k=null}else A&&k.$set(z)},i(f){D||(k&&I(k.$$.fragment,f),D=!0)},o(f){k&&P(k.$$.fragment,f),D=!1},d(f){f&&w(t),f&&w(C),f&&w(b),te(S,f),f&&w(g),f&&w(M),k&&N(k),x=!1,$e(se)}}}function pe(l){let t,n=l[8].label+"",e;return{c(){t=v("option"),e=j(n),t.__value=l[10],t.value=t.__value},m(s,r){$(s,t,r),h(t,e)},p(s,r){r&1&&n!==(n=s[8].label+"")&&H(e,n)},d(s){s&&w(t)}}}function Te(l){let t,n,e=l[0].length>0&&fe(l);return{c(){e&&e.c(),t=we()},m(s,r){e&&e.m(s,r),$(s,t,r),n=!0},p(s,[r]){s[0].length>0?e?(e.p(s,r),r&1&&I(e,1)):(e=fe(s),e.c(),I(e,1),e.m(t.parentNode,t)):e&&(ge(),P(e,1,1,()=>{e=null}),he())},i(s){n||(I(e),n=!0)},o(s){P(e),n=!1},d(s){e&&e.d(s),s&&w(t)}}}function Re(l,t,n){let e,{layers:s}=t,r=0;const i=()=>n(1,r--,r),o=()=>n(1,r++,r);function c(){r=ke(this),n(1,r)}function _(){e.show=this.checked,n(2,e),n(0,s),n(1,r)}function d(m){l.$$.not_equal(e.show,m)&&(e.show=m,n(2,e),n(0,s),n(1,r))}return l.$$set=m=>{"layers"in m&&n(0,s=m.layers)},l.$$.update=()=>{l.$$.dirty&3&&n(2,e=s[r])},[s,r,e,i,o,c,_,d]}class We extends Q{constructor(t){super(),U(this,t,Re,Te,V,{layers:0})}}function ce(l,t,n){const e=l.slice();return e[4]=t[n],e}function _e(l){let t,n=l[4]+"",e,s,r;return{c(){t=v("a"),e=j(n),r=j(","),J(t,"href",s="https://www.openstreetmap.org/node/"+l[4]),J(t,"target","_blank")},m(i,o){$(i,t,o),h(t,e),$(i,r,o)},p(i,o){o&1&&n!==(n=i[4]+"")&&H(e,n),o&1&&s!==(s="https://www.openstreetmap.org/node/"+i[4])&&J(t,"href",s)},d(i){i&&w(t),i&&w(r)}}}function Fe(l){let t,n,e,s,r,i,o,c,_,d=l[0].properties.osm_node_ids,m=[];for(let a=0;a<d.length;a+=1)m[a]=_e(ce(l,d,a));return{c(){t=v("pre"),t.textContent=`${JSON.stringify(l[1],null,"  ")}`,n=L(),e=v("div"),s=j(`OSM nodes:
  `);for(let a=0;a<m.length;a+=1)m[a].c();r=L(),i=v("div"),o=v("button"),o.textContent="Collapse intersection",J(o,"type","button")},m(a,p){$(a,t,p),$(a,n,p),$(a,e,p),h(e,s);for(let u=0;u<m.length;u+=1)m[u]&&m[u].m(e,null);$(a,r,p),$(a,i,p),h(i,o),c||(_=T(o,"click",l[2]),c=!0)},p(a,[p]){if(p&1){d=a[0].properties.osm_node_ids;let u;for(u=0;u<d.length;u+=1){const C=ce(a,d,u);m[u]?m[u].p(C,p):(m[u]=_e(C),m[u].c(),m[u].m(e,null))}for(;u<m.length;u+=1)m[u].d(1);m.length=d.length}},i:K,o:K,d(a){a&&w(t),a&&w(n),a&&w(e),te(m,a),a&&w(r),a&&w(i),c=!1,_()}}}function He(l,t,n){let e;F(l,ne,o=>n(3,e=o));let{intersection:s}=t,r=structuredClone(s.properties);delete r.osm_node_ids;function i(){e.collapseIntersection(s.properties.id)}return l.$$set=o=>{"intersection"in o&&n(0,s=o.intersection)},[s,r,i]}class Ke extends Q{constructor(t){super(),U(this,t,He,Fe,V,{intersection:0})}}function me(l,t,n){const e=l.slice();return e[5]=t[n],e}function de(l){let t,n=l[5]+"",e,s,r;return{c(){t=v("a"),e=j(n),r=j(","),J(t,"href",s="https://www.openstreetmap.org/way/"+l[5]),J(t,"target","_blank")},m(i,o){$(i,t,o),h(t,e),$(i,r,o)},p(i,o){o&1&&n!==(n=i[5]+"")&&H(e,n),o&1&&s!==(s="https://www.openstreetmap.org/way/"+i[5])&&J(t,"href",s)},d(i){i&&w(t),i&&w(r)}}}function Qe(l){let t,n,e,s,r,i,o,c,_,d,m,a=l[0].properties.osm_way_ids,p=[];for(let u=0;u<a.length;u+=1)p[u]=de(me(l,a,u));return{c(){t=v("pre"),t.textContent=`${JSON.stringify(l[1],null,"  ")}`,n=L(),e=v("div"),s=j(`OSM ways:
  `);for(let u=0;u<p.length;u+=1)p[u].c();r=L(),i=v("div"),o=v("button"),o.textContent="Collapse short road",c=L(),_=v("button"),_.textContent="Zip side-path",J(o,"type","button"),J(_,"type","button")},m(u,C){$(u,t,C),$(u,n,C),$(u,e,C),h(e,s);for(let b=0;b<p.length;b+=1)p[b]&&p[b].m(e,null);$(u,r,C),$(u,i,C),h(i,o),h(i,c),h(i,_),d||(m=[T(o,"click",l[2]),T(_,"click",l[3])],d=!0)},p(u,[C]){if(C&1){a=u[0].properties.osm_way_ids;let b;for(b=0;b<a.length;b+=1){const G=me(u,a,b);p[b]?p[b].p(G,C):(p[b]=de(G),p[b].c(),p[b].m(e,null))}for(;b<p.length;b+=1)p[b].d(1);p.length=a.length}},i:K,o:K,d(u){u&&w(t),u&&w(n),u&&w(e),te(p,u),u&&w(r),u&&w(i),d=!1,$e(m)}}}function Ue(l,t,n){let e;F(l,ne,c=>n(4,e=c));let{lane:s}=t,r=structuredClone(s.properties);delete r.osm_way_ids;function i(){e.collapseShortRoad(s.properties.rod)}function o(){e.zipSidepath(s.properties.rod)}return l.$$set=c=>{"lane"in c&&n(0,s=c.lane)},[s,r,i,o]}class Ve extends Q{constructor(t){super(),U(this,t,Ue,Qe,V,{lane:0})}}function Xe(l,t,n){let e,s,r;F(l,ve,o=>n(0,e=o)),F(l,ye,o=>n(1,s=o)),F(l,Ce,o=>n(2,r=o));let i=new Le.Popup({closeButton:!1,closeOnClick:!1,maxWidth:"none"});return Se(()=>{i.remove()}),l.$$.update=()=>{if(l.$$.dirty&7)if(r){let o=r.geometry.coordinates[0][0];i.setLngLat(o).setDOMContent(new Ve({lane:r})).addTo(e)}else if(s){let o=s.geometry.coordinates[0][0];i.setLngLat(o).setDOMContent(new Ke({intersection:s})).addTo(e)}else i.remove()},[e,s,r]}class Ze extends Q{constructor(t){super(),U(this,t,Xe,null,V,{})}}function Ye(l){let t,n,e,s,r,i,o,c,_,d,m,a,p;s=new Je({});function u(g){l[5](g)}let C={};l[1]!==void 0&&(C.settings=l[1]),i=new Ae({props:C}),X.push(()=>Z(i,"settings",u));function b(g){l[6](g)}let G={settings:l[1]};return l[0]!==void 0&&(G.imported=l[0]),_=new je({props:G}),X.push(()=>Z(_,"imported",b)),a=new qe({props:{imported:l[0]}}),{c(){t=v("div"),n=v("h1"),n.textContent="osm2streets Street Explorer",e=L(),q(s.$$.fragment),r=L(),q(i.$$.fragment),c=L(),q(_.$$.fragment),m=L(),q(a.$$.fragment),J(t,"slot","left")},m(g,M){$(g,t,M),h(t,n),h(t,e),E(s,t,null),h(t,r),E(i,t,null),h(t,c),E(_,t,null),h(t,m),E(a,t,null),p=!0},p(g,M){const B={};!o&&M&2&&(o=!0,B.settings=g[1],ee(()=>o=!1)),i.$set(B);const R={};M&2&&(R.settings=g[1]),!d&&M&1&&(d=!0,R.imported=g[0],ee(()=>d=!1)),_.$set(R);const k={};M&1&&(k.imported=g[0]),a.$set(k)},i(g){p||(I(s.$$.fragment,g),I(i.$$.fragment,g),I(_.$$.fragment,g),I(a.$$.fragment,g),p=!0)},o(g){P(s.$$.fragment,g),P(i.$$.fragment,g),P(_.$$.fragment,g),P(a.$$.fragment,g),p=!1},d(g){g&&w(t),N(s),N(i),N(_),N(a)}}}function xe(l){let t,n;return t=new We({props:{layers:l[3]}}),{c(){q(t.$$.fragment)},m(e,s){E(t,e,s),n=!0},p:K,i(e){n||(I(t.$$.fragment,e),n=!0)},o(e){P(t.$$.fragment,e),n=!1},d(e){N(t,e)}}}function et(l){let t,n,e,s,r,i;return t=new De({}),t.$on("polygon",l[4]),e=new ze({props:{layers:l[2],$$slots:{default:[xe]},$$scope:{ctx:l}}}),r=new Ze({}),{c(){q(t.$$.fragment),n=L(),q(e.$$.fragment),s=L(),q(r.$$.fragment)},m(o,c){E(t,o,c),$(o,n,c),E(e,o,c),$(o,s,c),E(r,o,c),i=!0},p(o,c){const _={};c&4&&(_.layers=o[2]),c&128&&(_.$$scope={dirty:c,ctx:o}),e.$set(_)},i(o){i||(I(t.$$.fragment,o),I(e.$$.fragment,o),I(r.$$.fragment,o),i=!0)},o(o){P(t.$$.fragment,o),P(e.$$.fragment,o),P(r.$$.fragment,o),i=!1},d(o){N(t,o),o&&w(n),N(e,o),o&&w(s),N(r,o)}}}function tt(l){let t,n,e;return n=new Ee({props:{$$slots:{default:[et]},$$scope:{ctx:l}}}),{c(){t=v("div"),q(n.$$.fragment),J(t,"slot","main")},m(s,r){$(s,t,r),E(n,t,null),e=!0},p(s,r){const i={};r&135&&(i.$$scope={dirty:r,ctx:s}),n.$set(i)},i(s){e||(I(n.$$.fragment,s),e=!0)},o(s){P(n.$$.fragment,s),e=!1},d(s){s&&w(t),N(n)}}}function nt(l){let t,n;return t=new Oe({props:{$$slots:{main:[tt],left:[Ye]},$$scope:{ctx:l}}}),{c(){q(t.$$.fragment)},m(e,s){E(t,e,s),n=!0},p(e,[s]){const r={};s&135&&(r.$$scope={dirty:s,ctx:e}),t.$set(r)},i(e){n||(I(t.$$.fragment,e),n=!0)},o(e){P(t.$$.fragment,e),n=!1},d(e){N(t,e)}}}function st(l,t,n){let e={kind:"nothing"},s,r=[],i=[];Ie(async()=>{await Ne()});const o=d=>Be(d,e,s);function c(d){s=d,n(1,s)}function _(d){e=d,n(0,e)}return l.$$.update=()=>{l.$$.dirty&1&&e.kind=="done"&&(ne.set(e.network),Ge.set(e.boundaryGJ),n(2,r=Me(e.network,e.boundaryGJ).concat(Pe(e.network))))},[e,s,r,i,o,c,_]}class lt extends Q{constructor(t){super(),U(this,t,st,nt,V,{})}}new lt({target:document.getElementById("app")});
