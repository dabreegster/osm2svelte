import{S as J,i as M,s as T,a2 as Y,n as S,o as h,a as b,v as k,t as $,b as d,d as y,z as w,F as G,H as O,J as D,a3 as N,l as L,E as I,m as j,r as g,x as K,p as P,w as V,B as Z,M as x,N as ee,G as te,O as ne,Y as se,P as re,j as W,k as z,Q as ie,R as oe,y as H,g as le,c as ae,T as ue,U as fe,V as pe,W as ce,X as me}from"./SelectImportArea-74e9ea6f.js";import{O as $e}from"./Osm2streetsSettings-133426d8.js";function de(i){let e;return{c(){e=L("p"),e.textContent="Click a road"},m(n,t){b(n,e,t)},p:I,d(n){n&&y(e)}}}function ge(i){let e,n=i[0].features.length+"",t,s;return{c(){e=L("p"),t=j(n),s=j(" buildings onscreen")},m(r,o){b(r,e,o),g(e,t),g(e,s)},p(r,o){o&1&&n!==(n=r[0].features.length+"")&&K(t,n)},d(r){r&&y(e)}}}function _e(i){let e,n,t;function s(l,a){return l[1]?ge:de}let r=s(i),o=r(i);return n=new Y({props:{source:"building-hitboxes",gj:i[0],layerStyle:i[2]}}),{c(){o.c(),e=S(),h(n.$$.fragment)},m(l,a){o.m(l,a),b(l,e,a),k(n,l,a),t=!0},p(l,[a]){r===(r=s(l))&&o?o.p(l,a):(o.d(1),o=r(l),o&&(o.c(),o.m(e.parentNode,e)));const f={};a&1&&(f.gj=l[0]),n.$set(f)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&y(e),o.d(l),w(n,l)}}}function be(i,e,n){let t,s;G(i,O,l=>n(3,t=l)),G(i,D,l=>n(1,s=l));let r=N(),o={type:"fill",paint:{"fill-color":"blue"}};return i.$$.update=()=>{if(i.$$.dirty&11){if(n(0,r=N()),s)for(let l of t.queryRenderedFeatures())l.layer.id=="building-3d"&&r.features.push(l);n(0,r),n(1,s),n(3,t)}},[r,s,o,t]}class ye extends J{constructor(e){super(),M(this,e,be,_e,T,{})}}function he(i){let e,n,t,s,r,o,l,a,f,m,B;return{c(){e=L("label"),n=L("input"),t=j(`
  Basemap roads`),s=S(),r=L("br"),o=S(),l=L("label"),a=L("input"),f=j(`
  Basemap buildings`),P(n,"type","checkbox"),P(a,"type","checkbox")},m(p,_){b(p,e,_),g(e,n),n.checked=i[0],g(e,t),b(p,s,_),b(p,r,_),b(p,o,_),b(p,l,_),g(l,a),a.checked=i[1],g(l,f),m||(B=[V(n,"change",i[3]),V(a,"change",i[4])],m=!0)},p(p,[_]){_&1&&(n.checked=p[0]),_&2&&(a.checked=p[1])},i:I,o:I,d(p){p&&(y(e),y(s),y(r),y(o),y(l)),m=!1,Z(B)}}}function ke(i,e,n){let t;G(i,O,a=>n(2,t=a));let s=!0,r=!0;function o(){s=this.checked,n(0,s)}function l(){r=this.checked,n(1,r)}return i.$$.update=()=>{if(i.$$.dirty&5&&t){let a=s?"visible":"none";for(let f of t.getStyle().layers)f.id.startsWith("road_")&&t.setLayoutProperty(f.id,"visibility",a)}if(i.$$.dirty&6&&t){let a=r?"visible":"none";t.setLayoutProperty("building","visibility",a),t.setLayoutProperty("building-3d","visibility",a)}},[s,r,t,o,l]}class we extends J{constructor(e){super(),M(this,e,ke,he,T,{})}}function Q(i){let e,n;return e=new ye({}),{c(){h(e.$$.fragment)},m(t,s){k(e,t,s),n=!0},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Le(i){let e,n,t,s,r,o,l,a,f,m,B,p,_,C;s=new re({});function U(u){i[5](u)}let q={};i[1]!==void 0&&(q.settings=i[1]),o=new $e({props:q}),W.push(()=>z(o,"settings",U));function X(u){i[6](u)}let A={settings:i[1]};i[0]!==void 0&&(A.imported=i[0]),f=new ie({props:A}),W.push(()=>z(f,"imported",X)),p=new oe({props:{imported:i[0]}});let c=i[3]&&Q();return{c(){e=L("div"),n=L("h1"),n.textContent="osm2streets road width tool",t=S(),h(s.$$.fragment),r=S(),h(o.$$.fragment),a=S(),h(f.$$.fragment),B=S(),h(p.$$.fragment),_=S(),c&&c.c(),P(e,"slot","left")},m(u,v){b(u,e,v),g(e,n),g(e,t),k(s,e,null),g(e,r),k(o,e,null),g(e,a),k(f,e,null),g(e,B),k(p,e,null),g(e,_),c&&c.m(e,null),C=!0},p(u,v){const E={};!l&&v&2&&(l=!0,E.settings=u[1],H(()=>l=!1)),o.$set(E);const R={};v&2&&(R.settings=u[1]),!m&&v&1&&(m=!0,R.imported=u[0],H(()=>m=!1)),f.$set(R);const F={};v&1&&(F.imported=u[0]),p.$set(F),u[3]?c?v&8&&$(c,1):(c=Q(),c.c(),$(c,1),c.m(e,null)):c&&(le(),d(c,1,1,()=>{c=null}),ae())},i(u){C||($(s.$$.fragment,u),$(o.$$.fragment,u),$(f.$$.fragment,u),$(p.$$.fragment,u),$(c),C=!0)},o(u){d(s.$$.fragment,u),d(o.$$.fragment,u),d(f.$$.fragment,u),d(p.$$.fragment,u),d(c),C=!1},d(u){u&&y(e),w(s),w(o),w(f),w(p),c&&c.d()}}}function Se(i){let e,n;return e=new we({}),{c(){h(e.$$.fragment)},m(t,s){k(e,t,s),n=!0},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ve(i){let e,n,t,s;return e=new ce({}),e.$on("polygon",i[4]),t=new me({props:{layers:i[2],$$slots:{default:[Se]},$$scope:{ctx:i}}}),{c(){h(e.$$.fragment),n=S(),h(t.$$.fragment)},m(r,o){k(e,r,o),b(r,n,o),k(t,r,o),s=!0},p(r,o){const l={};o&4&&(l.layers=r[2]),o&128&&(l.$$scope={dirty:o,ctx:r}),t.$set(l)},i(r){s||($(e.$$.fragment,r),$(t.$$.fragment,r),s=!0)},o(r){d(e.$$.fragment,r),d(t.$$.fragment,r),s=!1},d(r){r&&y(n),w(e,r),w(t,r)}}}function Be(i){let e,n,t;return n=new ue({props:{$$slots:{default:[ve]},$$scope:{ctx:i}}}),{c(){e=L("div"),h(n.$$.fragment),P(e,"slot","main")},m(s,r){b(s,e,r),k(n,e,null),t=!0},p(s,r){const o={};r&135&&(o.$$scope={dirty:r,ctx:s}),n.$set(o)},i(s){t||($(n.$$.fragment,s),t=!0)},o(s){d(n.$$.fragment,s),t=!1},d(s){s&&y(e),w(n)}}}function Ce(i){let e,n;return e=new x({props:{$$slots:{main:[Be],left:[Le]},$$scope:{ctx:i}}}),{c(){h(e.$$.fragment)},m(t,s){k(e,t,s),n=!0},p(t,[s]){const r={};s&143&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ge(i,e,n){let t;G(i,O,m=>n(3,t=m));let s={kind:"nothing"},r,o=[];ee(async()=>{await fe()});const l=m=>pe(m,s,r);function a(m){r=m,n(1,r)}function f(m){s=m,n(0,s)}return i.$$.update=()=>{i.$$.dirty&1&&s.kind=="done"&&(te.set(s.network),ne.set(s.boundaryGJ),n(2,o=se(s.network,s.boundaryGJ)))},[s,r,o,t,l,a,f]}class je extends J{constructor(e){super(),M(this,e,Ge,Ce,T,{})}}new je({target:document.getElementById("app")});
