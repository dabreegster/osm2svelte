import{S as E,i as Q,s as X,X as K,h as T,j as B,n as j,m as N,e as U,u as G,a as y,x as q,t as h,b as O,y as I,d as b,D as Y,H as z,W as H,Y as V,k as F,C as Z,l as P,o as C,q as J,w as W,L as x,G as ee,I as te,J as re,M as se,N as ne,g as oe,c as ie,O as le,P as ae,Q as ue,R as fe,T as pe}from"./SelectImportArea-d617bfcc.js";import{O as me}from"./Osm2streetsSettings-ef2ef7fa.js";function _e(n){const e=n.slice(),s=e[0]||e[1];return e[8]=s,e}function ge(n){let e;return{c(){e=F("p"),e.textContent="Hover on a road to see its details"},m(s,t){y(s,e,t)},p:Z,d(s){s&&b(e)}}}function A(n){let e,s,t,r,o=n[8].properties.osm_id+"",a,_,v,k,f,g=n[8].properties.weight+"",c,w,i,m,$,p=JSON.stringify(JSON.parse(n[8].properties.osm_tags),null,"  ")+"",u,S,L,M=JSON.stringify(JSON.parse(n[8].properties.lane_specs_ltr),null,"  ")+"",R;return{c(){e=F("br"),s=N(),t=F("a"),r=P("Open OSM way "),a=P(o),v=N(),k=F("br"),f=P(`
  Weight: `),c=P(g),w=N(),i=F("br"),m=P(`
  Tags:
  `),$=F("pre"),u=P(p),S=P(`
  Lanes:
  `),L=F("pre"),R=P(M),C(t,"href",_=`http://openstreetmap.org/way/${n[8].properties.osm_id}`),C(t,"target","_blank"),C(t,"rel","noreferrer"),C($,"class","svelte-y0uczf"),C(L,"class","svelte-y0uczf")},m(l,d){y(l,e,d),y(l,s,d),y(l,t,d),J(t,r),J(t,a),y(l,v,d),y(l,k,d),y(l,f,d),y(l,c,d),y(l,w,d),y(l,i,d),y(l,m,d),y(l,$,d),J($,u),y(l,S,d),y(l,L,d),J(L,R)},p(l,d){d&3&&o!==(o=l[8].properties.osm_id+"")&&W(a,o),d&3&&_!==(_=`http://openstreetmap.org/way/${l[8].properties.osm_id}`)&&C(t,"href",_),d&3&&g!==(g=l[8].properties.weight+"")&&W(c,g),d&3&&p!==(p=JSON.stringify(JSON.parse(l[8].properties.osm_tags),null,"  ")+"")&&W(u,p),d&3&&M!==(M=JSON.stringify(JSON.parse(l[8].properties.lane_specs_ltr),null,"  ")+"")&&W(R,M)},d(l){l&&b(e),l&&b(s),l&&b(t),l&&b(v),l&&b(k),l&&b(f),l&&b(c),l&&b(w),l&&b(i),l&&b(m),l&&b($),l&&b(S),l&&b(L)}}}function $e(n){let e,s,t,r,o,a;function _(i){n[4](i)}function v(i){n[5](i)}let k={source:"road-weights",gj:n[2],layerStyle:n[3],interactive:!0};n[0]!==void 0&&(k.clickedFeature=n[0]),n[1]!==void 0&&(k.hoveredFeature=n[1]),e=new K({props:k}),T.push(()=>B(e,"clickedFeature",_)),T.push(()=>B(e,"hoveredFeature",v));function f(i,m){return i[0]||i[1]?A:ge}function g(i,m){return m===A?_e(i):i}let c=f(n),w=c(g(n,c));return{c(){j(e.$$.fragment),r=N(),w.c(),o=U()},m(i,m){G(e,i,m),y(i,r,m),w.m(i,m),y(i,o,m),a=!0},p(i,[m]){const $={};m&4&&($.gj=i[2]),!s&&m&1&&(s=!0,$.clickedFeature=i[0],q(()=>s=!1)),!t&&m&2&&(t=!0,$.hoveredFeature=i[1],q(()=>t=!1)),e.$set($),c===(c=f(i))&&w?w.p(g(i,c),m):(w.d(1),w=c(g(i,c)),w&&(w.c(),w.m(o.parentNode,o)))},i(i){a||(h(e.$$.fragment,i),a=!0)},o(i){O(e.$$.fragment,i),a=!1},d(i){I(e,i),i&&b(r),w.d(i),i&&b(o)}}}function ce(n){return n.highway_type=="primary"?.8:.3}function de(n,e,s){let t;Y(n,z,g=>s(6,t=g));let r,o,a=H(),_={type:"fill",paint:{"fill-color":["interpolate",["linear"],["get","weight"],0,"blue",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],"fill-opacity":V("hover",.8,.4)}};function v(){let g=H();if(!t)return g;let c=JSON.parse(t.toGeojsonPlain()),w=JSON.parse(t.toJson());for(let[i,m]of w.roads){let $={highway_type:m.highway_type,lane_specs_ltr:m.lane_specs_ltr,osm_id:void 0,osm_tags:{},weight:0};m.osm_ids.length==1&&($.osm_id=m.osm_ids[0],$.osm_tags=JSON.parse(t.getOsmTagsForWay(BigInt($.osm_id)))),$.weight=ce($),g.features.push({type:"Feature",properties:$,geometry:c.features.find(p=>i==p.properties.id).geometry})}return g}function k(g){r=g,s(0,r)}function f(g){o=g,s(1,o)}return s(2,a=v()),[r,o,a,_,k,f]}class ye extends E{constructor(e){super(),Q(this,e,de,$e,X,{})}}function D(n){let e,s;return e=new ye({}),{c(){j(e.$$.fragment)},m(t,r){G(e,t,r),s=!0},i(t){s||(h(e.$$.fragment,t),s=!0)},o(t){O(e.$$.fragment,t),s=!1},d(t){I(e,t)}}}function be(n){let e,s,t,r,o,a,_,v,k,f,g,c;function w(u){n[5](u)}let i={};n[1]!==void 0&&(i.settings=n[1]),r=new me({props:i}),T.push(()=>B(r,"settings",w));function m(u){n[6](u)}let $={settings:n[1]};n[0]!==void 0&&($.imported=n[0]),_=new se({props:$}),T.push(()=>B(_,"imported",m)),f=new ne({props:{imported:n[0]}});let p=n[3]&&D();return{c(){e=F("div"),s=F("h1"),s.textContent="osm2streets route profile tool",t=N(),j(r.$$.fragment),a=N(),j(_.$$.fragment),k=N(),j(f.$$.fragment),g=N(),p&&p.c(),C(e,"slot","left")},m(u,S){y(u,e,S),J(e,s),J(e,t),G(r,e,null),J(e,a),G(_,e,null),J(e,k),G(f,e,null),J(e,g),p&&p.m(e,null),c=!0},p(u,S){const L={};!o&&S&2&&(o=!0,L.settings=u[1],q(()=>o=!1)),r.$set(L);const M={};S&2&&(M.settings=u[1]),!v&&S&1&&(v=!0,M.imported=u[0],q(()=>v=!1)),_.$set(M);const R={};S&1&&(R.imported=u[0]),f.$set(R),u[3]?p?S&8&&h(p,1):(p=D(),p.c(),h(p,1),p.m(e,null)):p&&(oe(),O(p,1,1,()=>{p=null}),ie())},i(u){c||(h(r.$$.fragment,u),h(_.$$.fragment,u),h(f.$$.fragment,u),h(p),c=!0)},o(u){O(r.$$.fragment,u),O(_.$$.fragment,u),O(f.$$.fragment,u),O(p),c=!1},d(u){u&&b(e),I(r),I(_),I(f),p&&p.d()}}}function we(n){let e,s,t,r;return e=new fe({}),e.$on("polygon",n[4]),t=new pe({props:{layers:n[2]}}),{c(){j(e.$$.fragment),s=N(),j(t.$$.fragment)},m(o,a){G(e,o,a),y(o,s,a),G(t,o,a),r=!0},p(o,a){const _={};a&4&&(_.layers=o[2]),t.$set(_)},i(o){r||(h(e.$$.fragment,o),h(t.$$.fragment,o),r=!0)},o(o){O(e.$$.fragment,o),O(t.$$.fragment,o),r=!1},d(o){I(e,o),o&&b(s),I(t,o)}}}function ke(n){let e,s,t;return s=new le({props:{$$slots:{default:[we]},$$scope:{ctx:n}}}),{c(){e=F("div"),j(s.$$.fragment),C(e,"slot","main")},m(r,o){y(r,e,o),G(s,e,null),t=!0},p(r,o){const a={};o&135&&(a.$$scope={dirty:o,ctx:r}),s.$set(a)},i(r){t||(h(s.$$.fragment,r),t=!0)},o(r){O(s.$$.fragment,r),t=!1},d(r){r&&b(e),I(s)}}}function ve(n){let e,s;return e=new x({props:{$$slots:{main:[ke],left:[be]},$$scope:{ctx:n}}}),{c(){j(e.$$.fragment)},m(t,r){G(e,t,r),s=!0},p(t,[r]){const o={};r&143&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){s||(h(e.$$.fragment,t),s=!0)},o(t){O(e.$$.fragment,t),s=!1},d(t){I(e,t)}}}function he(n,e,s){let t;Y(n,z,f=>s(3,t=f));let r={kind:"nothing"},o,a=[];ee(async()=>{await ae()});const _=f=>ue(f,r,o);function v(f){o=f,s(1,o)}function k(f){r=f,s(0,r)}return n.$$.update=()=>{n.$$.dirty&1&&r.kind=="done"&&(z.set(r.network),te.set(r.boundaryGJ),s(2,a=re(r.network,r.boundaryGJ)))},[r,o,a,t,_,v,k]}class Se extends E{constructor(e){super(),Q(this,e,he,ve,X,{})}}new Se({target:document.getElementById("app")});
