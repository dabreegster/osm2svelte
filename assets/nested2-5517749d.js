import{S as P,i as R,s as q,m as S,n as h,a as b,u as k,t as $,b as d,d as y,y as w,E as j,k as L,D as M,l as G,q as g,w as U,o as I,v as F,A as X,L as Y,H as Z,h as H,j as N,x as V,g as x,c as ee}from"./maplibre-gl-d0269db5.js";import{k as te,m as J,a as ne,l as W,n as re,b as se,f as ie,A as oe,B as le,I as ae,M as ue,i as fe,d as pe,S as me,L as ce}from"./SelectImportArea-7b14db0e.js";import{O as $e}from"./Osm2streetsSettings-37090808.js";function de(i){let e;return{c(){e=L("p"),e.textContent="Click a road"},m(n,t){b(n,e,t)},p:M,d(n){n&&y(e)}}}function ge(i){let e,n=i[0].features.length+"",t,r;return{c(){e=L("p"),t=G(n),r=G(" buildings onscreen")},m(s,o){b(s,e,o),g(e,t),g(e,r)},p(s,o){o&1&&n!==(n=s[0].features.length+"")&&U(t,n)},d(s){s&&y(e)}}}function _e(i){let e,n,t;function r(l,a){return l[1]?ge:de}let s=r(i),o=s(i);return n=new te({props:{source:"building-hitboxes",gj:i[0],layerStyle:i[2]}}),{c(){o.c(),e=S(),h(n.$$.fragment)},m(l,a){o.m(l,a),b(l,e,a),k(n,l,a),t=!0},p(l,[a]){s===(s=r(l))&&o?o.p(l,a):(o.d(1),o=s(l),o&&(o.c(),o.m(e.parentNode,e)));const f={};a&1&&(f.gj=l[0]),n.$set(f)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&y(e),o.d(l),w(n,l)}}}function be(i,e,n){let t,r;j(i,J,l=>n(3,t=l)),j(i,ne,l=>n(1,r=l));let s=W(),o={type:"fill",paint:{"fill-color":"blue"}};return i.$$.update=()=>{if(i.$$.dirty&11){if(n(0,s=W()),r)for(let l of t.queryRenderedFeatures())l.layer.id=="building-3d"&&s.features.push(l);n(0,s),n(1,r),n(3,t)}},[s,r,o,t]}class ye extends P{constructor(e){super(),R(this,e,be,_e,q,{})}}function he(i){let e,n,t,r,s,o,l,a,f,c,B;return{c(){e=L("label"),n=L("input"),t=G(`
  Basemap roads`),r=S(),s=L("br"),o=S(),l=L("label"),a=L("input"),f=G(`
  Basemap buildings`),I(n,"type","checkbox"),I(a,"type","checkbox")},m(p,_){b(p,e,_),g(e,n),n.checked=i[0],g(e,t),b(p,r,_),b(p,s,_),b(p,o,_),b(p,l,_),g(l,a),a.checked=i[1],g(l,f),c||(B=[F(n,"change",i[3]),F(a,"change",i[4])],c=!0)},p(p,[_]){_&1&&(n.checked=p[0]),_&2&&(a.checked=p[1])},i:M,o:M,d(p){p&&(y(e),y(r),y(s),y(o),y(l)),c=!1,X(B)}}}function ke(i,e,n){let t;j(i,J,a=>n(2,t=a));let r=!0,s=!0;function o(){r=this.checked,n(0,r)}function l(){s=this.checked,n(1,s)}return i.$$.update=()=>{if(i.$$.dirty&5&&t){let a=r?"visible":"none";for(let f of t.getStyle().layers)f.id.startsWith("road_")&&t.setLayoutProperty(f.id,"visibility",a)}if(i.$$.dirty&6&&t){let a=s?"visible":"none";t.setLayoutProperty("building","visibility",a),t.setLayoutProperty("building-3d","visibility",a)}},[r,s,t,o,l]}class we extends P{constructor(e){super(),R(this,e,ke,he,q,{})}}function z(i){let e,n;return e=new ye({}),{c(){h(e.$$.fragment)},m(t,r){k(e,t,r),n=!0},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Le(i){let e,n,t,r,s,o,l,a,f,c,B,p,_,C;r=new oe({});function K(u){i[5](u)}let T={};i[1]!==void 0&&(T.settings=i[1]),o=new $e({props:T}),H.push(()=>N(o,"settings",K));function Q(u){i[6](u)}let E={settings:i[1]};i[0]!==void 0&&(E.imported=i[0]),f=new le({props:E}),H.push(()=>N(f,"imported",Q)),p=new ae({props:{imported:i[0]}});let m=i[3]&&z();return{c(){e=L("div"),n=L("h1"),n.textContent="osm2streets road width tool",t=S(),h(r.$$.fragment),s=S(),h(o.$$.fragment),a=S(),h(f.$$.fragment),B=S(),h(p.$$.fragment),_=S(),m&&m.c(),I(e,"slot","left")},m(u,v){b(u,e,v),g(e,n),g(e,t),k(r,e,null),g(e,s),k(o,e,null),g(e,a),k(f,e,null),g(e,B),k(p,e,null),g(e,_),m&&m.m(e,null),C=!0},p(u,v){const O={};!l&&v&2&&(l=!0,O.settings=u[1],V(()=>l=!1)),o.$set(O);const A={};v&2&&(A.settings=u[1]),!c&&v&1&&(c=!0,A.imported=u[0],V(()=>c=!1)),f.$set(A);const D={};v&1&&(D.imported=u[0]),p.$set(D),u[3]?m?v&8&&$(m,1):(m=z(),m.c(),$(m,1),m.m(e,null)):m&&(x(),d(m,1,1,()=>{m=null}),ee())},i(u){C||($(r.$$.fragment,u),$(o.$$.fragment,u),$(f.$$.fragment,u),$(p.$$.fragment,u),$(m),C=!0)},o(u){d(r.$$.fragment,u),d(o.$$.fragment,u),d(f.$$.fragment,u),d(p.$$.fragment,u),d(m),C=!1},d(u){u&&y(e),w(r),w(o),w(f),w(p),m&&m.d()}}}function Se(i){let e,n;return e=new we({}),{c(){h(e.$$.fragment)},m(t,r){k(e,t,r),n=!0},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ve(i){let e,n,t,r;return e=new me({}),e.$on("polygon",i[4]),t=new ce({props:{layers:i[2],$$slots:{default:[Se]},$$scope:{ctx:i}}}),{c(){h(e.$$.fragment),n=S(),h(t.$$.fragment)},m(s,o){k(e,s,o),b(s,n,o),k(t,s,o),r=!0},p(s,o){const l={};o&4&&(l.layers=s[2]),o&128&&(l.$$scope={dirty:o,ctx:s}),t.$set(l)},i(s){r||($(e.$$.fragment,s),$(t.$$.fragment,s),r=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),r=!1},d(s){s&&y(n),w(e,s),w(t,s)}}}function Be(i){let e,n,t;return n=new ue({props:{$$slots:{default:[ve]},$$scope:{ctx:i}}}),{c(){e=L("div"),h(n.$$.fragment),I(e,"slot","main")},m(r,s){b(r,e,s),k(n,e,null),t=!0},p(r,s){const o={};s&135&&(o.$$scope={dirty:s,ctx:r}),n.$set(o)},i(r){t||($(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&y(e),w(n)}}}function Ce(i){let e,n;return e=new Y({props:{$$slots:{main:[Be],left:[Le]},$$scope:{ctx:i}}}),{c(){h(e.$$.fragment)},m(t,r){k(e,t,r),n=!0},p(t,[r]){const s={};r&143&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function je(i,e,n){let t;j(i,J,c=>n(3,t=c));let r={kind:"nothing"},s,o=[];Z(async()=>{await fe()});const l=c=>pe(c,r,s);function a(c){s=c,n(1,s)}function f(c){r=c,n(0,r)}return i.$$.update=()=>{i.$$.dirty&1&&r.kind=="done"&&(re.set(r.network),se.set(r.boundaryGJ),n(2,o=ie(r.network,r.boundaryGJ)))},[r,s,o,t,l,a,f]}class Ge extends P{constructor(e){super(),R(this,e,je,Ce,q,{})}}new Ge({target:document.getElementById("app")});
