import{S as G,i as I,s as M,n as k,o as b,a as m,v as y,t as p,b as _,d,z as h,F as C,l as $,E as B,m as S,r as g,x as A,p as j,w as P,B as E,L as F,I as z,j as N,k as V,y as W,g as D,c as H}from"./OverpassSelector-56b33c1b.js";import{g as K,m as R,a as O,h as T,n as Q,b as U,d as X,A as Y,I as Z,M as x,i as ee,L as te}from"./ImportControls-199be6c9.js";function ne(s){let e;return{c(){e=$("p"),e.textContent="Click a road"},m(n,t){m(n,e,t)},p:B,d(n){n&&d(e)}}}function re(s){let e,n=s[0].features.length+"",t,r;return{c(){e=$("p"),t=S(n),r=S(" buildings onscreen")},m(o,l){m(o,e,l),g(e,t),g(e,r)},p(o,l){l&1&&n!==(n=o[0].features.length+"")&&A(t,n)},d(o){o&&d(e)}}}function se(s){let e,n,t;function r(i,u){return i[1]?re:ne}let o=r(s),l=o(s);return n=new K({props:{source:"building-hitboxes",gj:s[0],layerStyle:s[2]}}),{c(){l.c(),e=k(),b(n.$$.fragment)},m(i,u){l.m(i,u),m(i,e,u),y(n,i,u),t=!0},p(i,[u]){o===(o=r(i))&&l?l.p(i,u):(l.d(1),l=o(i),l&&(l.c(),l.m(e.parentNode,e)));const f={};u&1&&(f.gj=i[0]),n.$set(f)},i(i){t||(p(n.$$.fragment,i),t=!0)},o(i){_(n.$$.fragment,i),t=!1},d(i){i&&d(e),l.d(i),h(n,i)}}}function oe(s,e,n){let t,r;C(s,R,i=>n(3,t=i)),C(s,O,i=>n(1,r=i));let o=T(),l={type:"fill",paint:{"fill-color":"blue"}};return s.$$.update=()=>{if(s.$$.dirty&11){if(n(0,o=T()),r)for(let i of t.queryRenderedFeatures())i.layer.id=="building-3d"&&o.features.push(i);n(0,o),n(1,r),n(3,t)}},[o,r,l,t]}class ie extends G{constructor(e){super(),I(this,e,oe,se,M,{})}}function le(s){let e,n,t,r,o,l,i,u,f,w,L;return{c(){e=$("label"),n=$("input"),t=S(`
  Basemap roads`),r=k(),o=$("br"),l=k(),i=$("label"),u=$("input"),f=S(`
  Basemap buildings`),j(n,"type","checkbox"),j(u,"type","checkbox")},m(a,c){m(a,e,c),g(e,n),n.checked=s[0],g(e,t),m(a,r,c),m(a,o,c),m(a,l,c),m(a,i,c),g(i,u),u.checked=s[1],g(i,f),w||(L=[P(n,"change",s[3]),P(u,"change",s[4])],w=!0)},p(a,[c]){c&1&&(n.checked=a[0]),c&2&&(u.checked=a[1])},i:B,o:B,d(a){a&&(d(e),d(r),d(o),d(l),d(i)),w=!1,E(L)}}}function ae(s,e,n){let t;C(s,R,u=>n(2,t=u));let r=!0,o=!0;function l(){r=this.checked,n(0,r)}function i(){o=this.checked,n(1,o)}return s.$$.update=()=>{if(s.$$.dirty&5&&t){let u=r?"visible":"none";for(let f of t.getStyle().layers)f.id.startsWith("road_")&&t.setLayoutProperty(f.id,"visibility",u)}if(s.$$.dirty&6&&t){let u=o?"visible":"none";t.setLayoutProperty("building","visibility",u),t.setLayoutProperty("building-3d","visibility",u)}},[r,o,t,l,i]}class ue extends G{constructor(e){super(),I(this,e,ae,le,M,{})}}function q(s){let e,n;return e=new ie({}),{c(){b(e.$$.fragment)},m(t,r){y(e,t,r),n=!0},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){h(e,t)}}}function ce(s){let e,n,t,r,o,l,i,u,f;r=new Y({});function w(c){s[3](c)}let L={};s[0]!==void 0&&(L.imported=s[0]),l=new Z({props:L}),N.push(()=>V(l,"imported",w));let a=s[2]&&q();return{c(){e=$("div"),n=$("h1"),n.textContent="osm2streets road width tool",t=k(),b(r.$$.fragment),o=k(),b(l.$$.fragment),u=k(),a&&a.c(),j(e,"slot","left")},m(c,v){m(c,e,v),g(e,n),g(e,t),y(r,e,null),g(e,o),y(l,e,null),g(e,u),a&&a.m(e,null),f=!0},p(c,v){const J={};!i&&v&1&&(i=!0,J.imported=c[0],W(()=>i=!1)),l.$set(J),c[2]?a?v&4&&p(a,1):(a=q(),a.c(),p(a,1),a.m(e,null)):a&&(D(),_(a,1,1,()=>{a=null}),H())},i(c){f||(p(r.$$.fragment,c),p(l.$$.fragment,c),p(a),f=!0)},o(c){_(r.$$.fragment,c),_(l.$$.fragment,c),_(a),f=!1},d(c){c&&d(e),h(r),h(l),a&&a.d()}}}function fe(s){let e,n;return e=new ue({}),{c(){b(e.$$.fragment)},m(t,r){y(e,t,r),n=!0},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){h(e,t)}}}function pe(s){let e,n;return e=new te({props:{layers:s[1],$$slots:{default:[fe]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,r){y(e,t,r),n=!0},p(t,r){const o={};r&2&&(o.layers=t[1]),r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){h(e,t)}}}function me(s){let e,n,t;return n=new x({props:{$$slots:{default:[pe]},$$scope:{ctx:s}}}),{c(){e=$("div"),b(n.$$.fragment),j(e,"slot","main")},m(r,o){m(r,e,o),y(n,e,null),t=!0},p(r,o){const l={};o&18&&(l.$$scope={dirty:o,ctx:r}),n.$set(l)},i(r){t||(p(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&d(e),h(n)}}}function de(s){let e,n;return e=new F({props:{$$slots:{main:[me],left:[ce]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,r){y(e,t,r),n=!0},p(t,[r]){const o={};r&23&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){h(e,t)}}}function $e(s,e,n){let t;C(s,R,i=>n(2,t=i));let r={kind:"nothing"},o=[];z(async()=>{await ee()});function l(i){r=i,n(0,r)}return s.$$.update=()=>{s.$$.dirty&1&&r.kind=="done"&&(Q.set(r.network),U.set(r.boundaryGJ),n(1,o=X(r.network,r.boundaryGJ)))},[r,o,t,l]}class _e extends G{constructor(e){super(),I(this,e,$e,de,M,{})}}new _e({target:document.getElementById("app")});
